<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]-->
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 1.5.2">
<meta name="author" content="v0.1, Sep 20, 2015">
<title>Minecraft Modding with Spigot</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400">
<style>
/* Asciidoctor default stylesheet | MIT License | http://asciidoctor.org */
/* Remove the comments around the @import statement below when using this as a custom stylesheet */
/*@import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400";*/
article,aside,details,figcaption,figure,footer,header,hgroup,main,nav,section,summary{display:block}
audio,canvas,video{display:inline-block}
audio:not([controls]){display:none;height:0}
[hidden],template{display:none}
script{display:none!important}
html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}
body{margin:0}
a{background:transparent}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
abbr[title]{border-bottom:1px dotted}
b,strong{font-weight:bold}
dfn{font-style:italic}
hr{-moz-box-sizing:content-box;box-sizing:content-box;height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type="button"],input[type="reset"],input[type="submit"]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type="checkbox"],input[type="radio"]{box-sizing:border-box;padding:0}
input[type="search"]{-webkit-appearance:textfield;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;box-sizing:content-box}
input[type="search"]::-webkit-search-cancel-button,input[type="search"]::-webkit-search-decoration{-webkit-appearance:none}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,*:before,*:after{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;font-weight:400;font-style:normal;line-height:1;position:relative;cursor:auto}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
#map_canvas img,#map_canvas embed,#map_canvas object,.map_canvas img,.map_canvas embed,.map_canvas object{max-width:none!important}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
.antialiased,body{-webkit-font-smoothing:antialiased}
img{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
p.lead,.paragraph.lead>p,#preamble>.sectionbody>.paragraph:first-of-type p{font-size:1.21875em;line-height:1.6}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0;direction:ltr}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:none}
p{font-family:inherit;font-weight:400;font-size:1em;line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #ddddd8;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em;height:0}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{font-size:1em;line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol,ul.no-bullet,ol.no-bullet{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0;font-size:1em}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ul.no-bullet{list-style:none}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
abbr,acronym{text-transform:uppercase;font-size:90%;color:rgba(0,0,0,.8);border-bottom:1px dotted #ddd;cursor:help}
abbr{text-transform:none}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote cite{display:block;font-size:.9375em;color:rgba(0,0,0,.6)}
blockquote cite:before{content:"\2014 \0020"}
blockquote cite a,blockquote cite a:visited{color:rgba(0,0,0,.6)}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media only screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}table{background:#fff;margin-bottom:1.25em;border:solid 1px #dedede}
table thead,table tfoot{background:#f7f8f7;font-weight:bold}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt,table tr:nth-of-type(even){background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{display:table-cell;line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.clearfix:before,.clearfix:after,.float-group:before,.float-group:after{content:" ";display:table}
.clearfix:after,.float-group:after{clear:both}
*:not(pre)>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background-color:#f7f7f8;-webkit-border-radius:4px;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}
pre,pre>code{line-height:1.45;color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;text-rendering:optimizeSpeed}
.keyseq{color:rgba(51,51,51,.8)}
kbd{display:inline-block;color:rgba(0,0,0,.8);font-size:.75em;line-height:1.4;background-color:#f7f7f7;border:1px solid #ccc;-webkit-border-radius:3px;border-radius:3px;-webkit-box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em white inset;box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em #fff inset;margin:-.15em .15em 0 .15em;padding:.2em .6em .2em .5em;vertical-align:middle;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menu{color:rgba(0,0,0,.8)}
b.button:before,b.button:after{position:relative;top:-1px;font-weight:400}
b.button:before{content:"[";padding:0 3px 0 2px}
b.button:after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin-left:auto;margin-right:auto;margin-top:0;margin-bottom:0;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header:before,#header:after,#content:before,#content:after,#footnotes:before,#footnotes:after,#footer:before,#footer:after{content:" ";display:table}
#header:after,#content:after,#footnotes:after,#footer:after{clear:both}
#content{margin-top:1.25em}
#content:before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #ddddd8}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #ddddd8;padding-bottom:8px}
#header .details{border-bottom:1px solid #ddddd8;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:-ms-flexbox;display:-webkit-flex;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span:before{content:"\00a0\2013\00a0"}
#header .details br+span.author:before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark:before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber:after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #ddddd8;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #efefed;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media only screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background-color:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #efefed;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #efefed;left:auto;right:0}}@media only screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}#content #toc{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:100%;background-color:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:rgba(255,255,255,.8);line-height:1.44}
.sect1{padding-bottom:.625em}
@media only screen and (min-width:768px){.sect1{padding-bottom:1.25em}}.sect1+.sect1{border-top:1px solid #efefed}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor:before,h2>a.anchor:before,h3>a.anchor:before,#toctitle>a.anchor:before,.sidebarblock>.content>.title>a.anchor:before,h4>a.anchor:before,h5>a.anchor:before,h6>a.anchor:before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock>caption.title{white-space:nowrap;overflow:visible;max-width:0}
.paragraph.lead>p,#preamble>.sectionbody>.paragraph:first-of-type p{color:rgba(0,0,0,.85)}
table.tableblock #preamble>.sectionbody>.paragraph:first-of-type p{font-size:inherit}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #ddddd8;color:rgba(0,0,0,.6)}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border-style:solid;border-width:1px;border-color:#e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;-webkit-border-radius:4px;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock pre:not(.highlight),.listingblock pre[class="highlight"],.listingblock pre[class^="highlight "],.listingblock pre.CodeRay,.listingblock pre.prettyprint{background:#f7f7f8}
.sidebarblock .literalblock pre,.sidebarblock .listingblock pre:not(.highlight),.sidebarblock .listingblock pre[class="highlight"],.sidebarblock .listingblock pre[class^="highlight "],.sidebarblock .listingblock pre.CodeRay,.sidebarblock .listingblock pre.prettyprint{background:#f2f1f1}
.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{-webkit-border-radius:4px;border-radius:4px;word-wrap:break-word;padding:1em;font-size:.8125em}
.literalblock pre.nowrap,.literalblock pre[class].nowrap,.listingblock pre.nowrap,.listingblock pre[class].nowrap{overflow-x:auto;white-space:pre;word-wrap:normal}
@media only screen and (min-width:768px){.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{font-size:.90625em}}@media only screen and (min-width:1280px){.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{font-size:1em}}.literalblock.output pre{color:#f7f7f8;background-color:rgba(0,0,0,.9)}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;-webkit-border-radius:4px;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.listingblock>.content{position:relative}
.listingblock code[data-lang]:before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:#999}
.listingblock:hover code[data-lang]:before{display:block}
.listingblock.terminal pre .command:before{content:attr(data-prompt);padding-right:.5em;color:#999}
.listingblock.terminal pre .command:not([data-prompt]):before{content:"$"}
table.pyhltable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.pyhltable td{vertical-align:top;padding-top:0;padding-bottom:0}
table.pyhltable td.code{padding-left:.75em;padding-right:0}
pre.pygments .lineno,table.pyhltable td:not(.code){color:#999;padding-left:0;padding-right:.5em;border-right:1px solid #ddddd8}
pre.pygments .lineno{display:inline-block;margin-right:.25em}
table.pyhltable .linenodiv{background:none!important;padding-right:0!important}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock blockquote p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote:before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.5em;margin-right:.5ex;text-align:right}
.quoteblock .quoteblock{margin-left:0;margin-right:0;padding:.5em 0;border-left:3px solid rgba(0,0,0,.6)}
.quoteblock .quoteblock blockquote{padding:0 0 0 .75em}
.quoteblock .quoteblock blockquote:before{display:none}
.verseblock{margin:0 1em 1.25em 1em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.05em;color:rgba(0,0,0,.6)}
.quoteblock.abstract{margin:0 0 1.25em 0;display:block}
.quoteblock.abstract blockquote,.quoteblock.abstract blockquote p{text-align:left;word-spacing:0}
.quoteblock.abstract blockquote:before,.quoteblock.abstract blockquote p:first-of-type:before{display:none}
table.tableblock{max-width:100%;border-collapse:separate}
table.tableblock td>.paragraph:last-child p>p:last-child,table.tableblock th>p:last-child,table.tableblock td>p:last-child{margin-bottom:0}
table.spread{width:100%}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all th.tableblock,table.grid-all td.tableblock{border-width:0 1px 1px 0}
table.grid-all tfoot>tr>th.tableblock,table.grid-all tfoot>tr>td.tableblock{border-width:1px 1px 0 0}
table.grid-cols th.tableblock,table.grid-cols td.tableblock{border-width:0 1px 0 0}
table.grid-all *>tr>.tableblock:last-child,table.grid-cols *>tr>.tableblock:last-child{border-right-width:0}
table.grid-rows th.tableblock,table.grid-rows td.tableblock{border-width:0 0 1px 0}
table.grid-all tbody>tr:last-child>th.tableblock,table.grid-all tbody>tr:last-child>td.tableblock,table.grid-all thead:last-child>tr>th.tableblock,table.grid-rows tbody>tr:last-child>th.tableblock,table.grid-rows tbody>tr:last-child>td.tableblock,table.grid-rows thead:last-child>tr>th.tableblock{border-bottom-width:0}
table.grid-rows tfoot>tr>th.tableblock,table.grid-rows tfoot>tr>td.tableblock{border-width:1px 0 0 0}
table.frame-all{border-width:1px}
table.frame-sides{border-width:0 1px}
table.frame-topbot{border-width:1px 0}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{display:table-cell;line-height:1.6;background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
td>div.verse{white-space:pre}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
ol>li p,ul>li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.unstyled,ol.unnumbered,ul.checklist,ul.none{list-style-type:none}
ul.unstyled,ol.unnumbered,ul.checklist{margin-left:.625em}
ul.checklist li>p:first-child>.fa-square-o:first-child,ul.checklist li>p:first-child>.fa-check-square-o:first-child{width:1em;font-size:.85em}
ul.checklist li>p:first-child>input[type="checkbox"]:first-child{width:1em;position:relative;top:1px}
ul.inline{margin:0 auto .625em auto;margin-left:-1.375em;margin-right:0;padding:0;list-style:none;overflow:hidden}
ul.inline>li{list-style:none;float:left;margin-left:1.375em;display:block}
ul.inline>li>*{display:block}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1{padding-right:.75em;font-weight:bold}
td.hdlist1,td.hdlist2{vertical-align:top}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist>table tr>td:first-of-type{padding:0 .75em;line-height:1}
.colist>table tr>td:last-of-type{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:solid 4px #fff;-webkit-box-shadow:0 0 0 1px #ddd;box-shadow:0 0 0 1px #ddd}
.imageblock.left,.imageblock[style*="float: left"]{margin:.25em .625em 1.25em 0}
.imageblock.right,.imageblock[style*="float: right"]{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none}
span.footnote,span.footnoteref{vertical-align:super;font-size:.875em}
span.footnote a,span.footnoteref a{text-decoration:none}
span.footnote a:active,span.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em 0;border-width:1px 0 0 0}
#footnotes .footnote{padding:0 .375em;line-height:1.3;font-size:.875em;margin-left:1.2em;text-indent:-1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
.gist .file-data>table{border:0;background:#fff;width:100%;margin-bottom:0}
.gist .file-data>table td.line-data{width:99%}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background-color:#00fafa}
.black{color:#000}
.black-background{background-color:#000}
.blue{color:#0000bf}
.blue-background{background-color:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background-color:#fa00fa}
.gray{color:#606060}
.gray-background{background-color:#7d7d7d}
.green{color:#006000}
.green-background{background-color:#007d00}
.lime{color:#00bf00}
.lime-background{background-color:#00fa00}
.maroon{color:#600000}
.maroon-background{background-color:#7d0000}
.navy{color:#000060}
.navy-background{background-color:#00007d}
.olive{color:#606000}
.olive-background{background-color:#7d7d00}
.purple{color:#600060}
.purple-background{background-color:#7d007d}
.red{color:#bf0000}
.red-background{background-color:#fa0000}
.silver{color:#909090}
.silver-background{background-color:#bcbcbc}
.teal{color:#006060}
.teal-background{background-color:#007d7d}
.white{color:#bfbfbf}
.white-background{background-color:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background-color:#fafa00}
span.icon>.fa{cursor:default}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note:before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip:before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning:before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution:before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important:before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background-color:rgba(0,0,0,.8);-webkit-border-radius:100px;border-radius:100px;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]:after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
h1,h2{letter-spacing:-.01em}
dt,th.tableblock,td.content{text-rendering:optimizeLegibility}
p,td.content{letter-spacing:-.01em}
p strong,td.content strong{letter-spacing:-.005em}
p,blockquote,dt,td.content{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background-color:#fffef7;border-color:#e0e0dc;-webkit-box-shadow:0 1px 4px #e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@media print{@page{margin:1.25cm .75cm}
*{-webkit-box-shadow:none!important;box-shadow:none!important;text-shadow:none!important}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare):after,a[href^="https:"]:not(.bare):after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]:after{content:" (" attr(title) ")"}
pre,blockquote,tr,img{page-break-inside:avoid}
thead{display:table-header-group}
img{max-width:100%!important}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #ddddd8!important;padding-bottom:0!important}
.sect1{padding-bottom:0!important}
.sect1+.sect1{border:0!important}
#header>h1:first-child{margin-top:1.25rem}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em 0}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span:before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]:before{display:block}
#footer{background:none!important;padding:0 .9375em}
#footer-text{color:rgba(0,0,0,.6)!important;font-size:.9em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
</style>
</head>
<body class="article">
<div id="header">
<h1>Minecraft Modding with Spigot</h1>
<div class="details">
<span id="author" class="author">v0.1, Sep 20, 2015</span><br>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>Latest HTML:
<a href="http://htmlpreview.github.io/?https://raw.githubusercontent.com/arun-gupta/spigot-book/master/book.html" class="bare">http://htmlpreview.github.io/?https://raw.githubusercontent.com/arun-gupta/spigot-book/master/book.html</a></p>
</div>
<div id="toc" class="toc">
<div id="toctitle" class="title">Minecraft Modding with Spigot</div>
<ul class="sectlevel1">
<li><a href="#New_Chapter_1">Your First Plugin</a>
<ul class="sectlevel2">
<li><a href="#_spigot_introduction">Spigot introduction</a></li>
<li><a href="#_download_and_install_tools">Download and install tools</a>
<ul class="sectlevel3">
<li><a href="#_java">Java</a></li>
<li><a href="#_spigot">Spigot</a></li>
<li><a href="#_netbeans">NetBeans</a></li>
</ul>
</li>
<li><a href="#_start_minecraft_server">Start Minecraft server</a></li>
<li><a href="#_join_the_server">Join the Server</a></li>
</ul>
</li>
<li><a href="#_create_a_plugin">Create a Plugin</a>
<ul class="sectlevel3">
<li><a href="#_generate_project">Generate project</a></li>
<li><a href="#_register_and_create_the_listener">Register and create the listener</a></li>
<li><a href="#_add_event_handlers">Add event handlers</a></li>
<li><a href="#_build_and_install_the_plugin">Build and install the plugin</a></li>
<li><a href="#_verify_that_it_works">Verify that it works</a></li>
<li><a href="#_summary">Summary</a></li>
</ul>
</li>
<li><a href="#Block-Money-Chapter">Creating In-game Money</a>
<ul class="sectlevel2">
<li><a href="#_create_the_plugin">Create the plugin</a></li>
<li><a href="#_register_and_create_the_listener_2">Register and create the Listener</a></li>
<li><a href="#_add_event_handlers_2">Add event handlers</a></li>
<li><a href="#_install_and_verify">Install and verify</a></li>
<li><a href="#_summary_2">Summary</a></li>
</ul>
</li>
<li><a href="#Zombies">Zombies Dropping Bones</a>
<ul class="sectlevel2">
<li><a href="#_create_the_plugin_2">Create the plugin</a></li>
<li><a href="#_register_and_create_the_listener_3">Register and create the Listener</a></li>
<li><a href="#_add_event_handlers_3">Add event handlers</a></li>
<li><a href="#_install_and_verify_2">Install and verify</a></li>
<li><a href="#_summary_3">Summary</a></li>
</ul>
</li>
<li><a href="#More_Listeners">Bigger TNT Explosions</a>
<ul class="sectlevel2">
<li><a href="#_create_the_plugin_3">Create the plugin</a></li>
<li><a href="#_create_the_listener">Create the Listener</a></li>
<li><a href="#_add_event_handlers_4">Add event handlers</a></li>
<li><a href="#_install_and_verify_3">Install and verify</a></li>
<li><a href="#_summary_4">Summary</a></li>
</ul>
</li>
<li><a href="#Flaming_Pigs">Flaming Pigs</a>
<ul class="sectlevel2">
<li><a href="#_create_the_plugin_4">Create the plugin</a></li>
<li><a href="#_register_the_command">Register the command</a></li>
<li><a href="#_add_command_functionality">Add command functionality</a></li>
<li><a href="#_install_and_verify_4">Install and verify</a></li>
<li><a href="#_summary_5">Summary</a></li>
</ul>
</li>
<li><a href="#Throw_Egg">Throw Egg</a>
<ul class="sectlevel2">
<li><a href="#_create_the_plugin_5">Create the plugin</a></li>
<li><a href="#_register_the_command_2">Register the command</a></li>
<li><a href="#_add_command_functionality_2">Add command functionality</a></li>
<li><a href="#_register_and_create_the_listener_4">Register and create the Listener</a></li>
<li><a href="#_add_event_handlers_5">Add event handlers</a></li>
<li><a href="#_install_and_verify_5">Install and verify</a></li>
<li><a href="#_summary_6">Summary</a></li>
</ul>
</li>
<li><a href="#Sponge">Sponge Water</a>
<ul class="sectlevel2">
<li><a href="#_create_the_plugin_6">Create the plugin</a></li>
<li><a href="#_register_and_create_the_listener_5">Register and create the Listener</a></li>
<li><a href="#_add_event_handlers_6">Add event handlers</a></li>
<li><a href="#_install_and_verify_6">Install and verify</a></li>
<li><a href="#_summary_7">Summary</a></li>
</ul>
</li>
<li><a href="#Tower_Builder">Tower Builder</a>
<ul class="sectlevel2">
<li><a href="#_create_the_plugin_7">Create the plugin</a></li>
<li><a href="#_register_the_command_3">Register the command</a></li>
<li><a href="#_add_command_functionality_3">Add command functionality</a></li>
<li><a href="#_install_and_verify_7">Install and verify</a></li>
<li><a href="#_summary_8">Summary</a></li>
</ul>
</li>
<li><a href="#Fun_Plugins">Recipes and Enchantments</a>
<ul class="sectlevel2">
<li><a href="#_crafting_recipe">Crafting Recipe</a></li>
<li><a href="#_smelting_recipe">Smelting Recipe</a></li>
<li><a href="#_higher_enchantments">Higher Enchantments</a></li>
<li><a href="#_summary_9">Summary</a></li>
</ul>
</li>
<li><a href="#Explosions">Explosions and Rocket Launchers</a>
<ul class="sectlevel2">
<li><a href="#_tnt_magnet">TNT Magnet</a></li>
<li><a href="#_rocket_launcher">Rocket Launcher</a></li>
<li><a href="#_summary_10">Summary</a></li>
</ul>
</li>
<li><a href="#Warp_Board">Warp Board</a>
<ul class="sectlevel2">
<li><a href="#_warp_board">Warp Board</a></li>
<li><a href="#_registering_the_command">Registering the command</a></li>
<li><a href="#_adding_command_functionality">Adding command functionality</a></li>
<li><a href="#_create_the_listener_and_add_event_handlers">Create the Listener and add event handlers</a></li>
<li><a href="#_verify_that_it_works_2">Verify that it works</a></li>
<li><a href="#_summary_11">Summary</a></li>
</ul>
</li>
<li><a href="#Managing_your_server_with_CraftBukkit">Managing your CraftBukkit server</a>
<ul class="sectlevel2">
<li><a href="#_bukkit_api">Bukkit API</a></li>
<li><a href="#Which_CraftBukkit_Build_to_use">Which CraftBukkit build to use ?</a></li>
<li><a href="#Running_CraftBukkit_Server">Run a CraftBukkit server</a></li>
<li><a href="#Manage_CraftBukkit_Server">Manage a CraftBukkit Server</a></li>
<li><a href="#Bukkit_documentation">Bukkit documentation</a></li>
<li><a href="#_summary_12">Summary</a></li>
</ul>
</li>
<li><a href="#Tools_for_building_plugins">Tools for Building Plugins</a>
<ul class="sectlevel2">
<li><a href="#Maven">Maven</a></li>
<li><a href="#Tools_for_Authoring_Plugins">Tools for Authoring Plugins</a>
<ul class="sectlevel3">
<li><a href="#_netbeans_2">NetBeans</a></li>
</ul>
</li>
<li><a href="#_summary_13">Summary</a></li>
</ul>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="New_Chapter_1">Your First Plugin</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Minecraft is a 3D game about breaking and placing <em>blocks</em> to obtain <em>materials</em>. These materials can then be used to build or <em>craft</em> new <em>items</em> and <em>tools</em>. These, in turn, can be used to harvest more types of
blocks. The game also contains <em>entities</em>, which are dynamic moving objects in Minecraft, for example, cow, pig, and horse. Some of the entities are hostile and called as <em>monsters</em>, for example, zombie and creeper. <em>Bosses</em> are monsters that are very hard to defeat.</p>
</div>
<div class="paragraph">
<p>Playing the game itself is a lot of fun, but what makes the game more interesting and engaging is how it allows modifications (known as "mods" or "plugins"). These modifications can change the game from what it was originally written. They can add content to the game to alter gameplay. For example, new blocks, mobs, and abilities of the player can be added.</p>
</div>
<div class="paragraph">
<p>An individual player uses a <em>client</em>, think of it as a program downloaded on your machine, to connect to a <em>server</em>, think of it as a program running on your machine or a different machine on the Internet. This is called as <em>single player</em>. Minecraft also allows multiple players to join a server. This is called as <em>multiplayer</em>. This book will explain how to run your own Minecraft server, write plugins and install them on that server.</p>
</div>
<div class="paragraph">
<p>Its very common to have a server run with multiple plugins. There are almost an infinite number of plugins someone could do to make Minecraft a more amusing game to play. There is no official way to create these plugins, but there are several third-party vendors that provide that capability; Bukkit is one such way, and the most popular way. The ability to write plugins and alter the gameplay gives players more control over the game, and makes them more excited.</p>
</div>
<div class="sect2">
<h3 id="_spigot_introduction">Spigot introduction</h3>
<div class="paragraph">
<p><span class="image"><img src="images/spigot-logo.png" alt="spigot-logo"></span> Spigot is a free, open-source, software project that provides the means to extend Minecraft multiplayer servers. It is not the official way to add mods to a server, nor is it supported by Mojang yet. However, it is one of the most popular ways to build server-side plugins, which are plugins that only work on servers.</p>
</div>
<div class="paragraph">
<p>Spigot does NOT make mods. It makes plugins, which, contrary to popular belief, are not the same as mods.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">What is the difference between mods and plugins?</div>
<div class="paragraph">
<p>Mods involve <em>modifying</em> the source code of Minecraft to do something or add additional functionality. Plugins are extra software that <em>plug</em> into an application, instead of modifying the source code. Mods generally provide a framework that recognize plugins built using that framework. This makes mod free-standing, while plugins are generally built on the framework provided by mods.</p>
</div>
<div class="paragraph">
<p>For example, Spigot is a modded Minecraft server that recognizes plugins built using the Bukkit API.</p>
</div>
</div>
</div>
<div class="paragraph">
<p>The plugins you can make with Spigot don&#8217;t actually modify your server. Instead, they just add on to it. For example, a mod would change the size of a TNT explosion by modifying the source code of Minecraft. In order to remove that modification and go back to the original game play, the source code needs to be modified back to the original one. A plugin can also make a bigger TNT explosion. They are called plugins because that is how you install them; you ``plug them in'' to your server.</p>
</div>
<div class="paragraph">
<p>There are so many currently existing plugins for Bukkit (over 10,000) that it can do pretty much anything! You can find all of these plugins at <a href="http://plugins.bukkit.org/" class="bare">http://plugins.bukkit.org/</a>. This book will teach you how to build plugins like that.</p>
</div>
</div>
<div class="sect2">
<h3 id="_download_and_install_tools">Download and install tools</h3>
<div class="paragraph">
<p>In order to create plugins, we need to use a few tools.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Java Development Kit</p>
</li>
<li>
<p>Spigot</p>
</li>
<li>
<p>NetBeans</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Lets learn about these tools and see how to download and install them.</p>
</div>
<div class="sect3">
<h4 id="_java">Java</h4>
<div class="paragraph">
<p><span class="image"><img src="images/java-logo.png" alt="java-logo" width="75" height="137"></span> Markus "Notch" Persson (<a href="http://twitter.com">@notch</a>) wrote the game of Minecraft using the Java programming language. Java is one of the most popular programming languages. Game developers like Notch write computer programs as text files following the rules defined by Java. These text files are called as <em>Java source files</em> or <em>class</em> files, and end with a <code>.java</code> extension. These files are then converted into binary JAR files using the tools provided by Java Development Kit (JDK).</p>
</div>
<div class="paragraph">
<p>Before you can run your server, and later build plugins, you need to install JDK. JDK is like a swiss army knife for Java that provides a variety of tools. Another important tool provided by JDK is how these JAR files can be run on any machine.</p>
</div>
<div class="paragraph">
<p>Download JDK from <a href="http://www.oracle.com/technetwork/java/javase/downloads/index.html" class="bare">http://www.oracle.com/technetwork/java/javase/downloads/index.html</a> and install on your machine by following the instructions at <a href="http://docs.oracle.com/javase/8/docs/technotes/guides/install/install_overview.html" class="bare">http://docs.oracle.com/javase/8/docs/technotes/guides/install/install_overview.html</a>.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
<div class="title">Is JDK already installed ?</div>
<div class="paragraph">
<p>If you are not sure that JDK is already installed on your machine then follow the installation instructions listed above. This will update to the latest version anyway and is the recommended version for this book. Either way, you&#8217;ll need at least JDK 6.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_spigot">Spigot</h4>
<div class="paragraph">
<p>The <em>vanilla</em>, or un-modded server as downloaded from <a href="http://minecraft.net" class="bare">http://minecraft.net</a> does not understand the plugins built using Bukkit. Spigot is a modified version of the vanilla server that does understand Bukkit plugins. It is available for download at <a href="https://hub.spigotmc.org/jenkins/job/BuildTools/lastSuccessfulBuild/artifact/target/BuildTools.jar" class="bare">https://hub.spigotmc.org/jenkins/job/BuildTools/lastSuccessfulBuild/artifact/target/BuildTools.jar</a> at no cost at all. That is one of the many reasons that modders like to use it to make plugins for their servers.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Difference between Bukkit, Spigot, and CraftBukkit</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Bukkit is the API used by developers to make plugins.</p>
</li>
<li>
<p>CraftBukkit is the modded server that understands Bukkit API.</p>
</li>
<li>
<p>Spigot API: <a href="https://github.com/arun-gupta/spigot-book/issues/1" class="bare">https://github.com/arun-gupta/spigot-book/issues/1</a></p>
</li>
<li>
<p>Spigot is an improved CraftBukkit that is much faster and more configurable.</p>
</li>
</ol>
</div>
</div>
</div>
<div class="paragraph">
<p>To use the plugins you will make later on, you will need a server to put them on. This can be done by downloading <code>BuildTools.jar</code> and installing it. Detailed instructions to install Spigot are available at <a href="https://www.spigotmc.org/wiki/buildtools/#running-buildtools" class="bare">https://www.spigotmc.org/wiki/buildtools/#running-buildtools</a>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
This book will provide all the instructions assuming you are using a Mac OS X.
</td>
</tr>
</table>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Open a Terminal using Spotlight (Press <code>Cmd</code> and <code>Space</code> keys together and type &#8220;terminal&#8221; and hit Enter)</p>
</li>
<li>
<p>Create a new directory &#8216;spigot&#8217; by typing the command <code>mkdir spigot</code>.</p>
</li>
<li>
<p>Change to this directory by giving the command <code>cd spigot</code>.</p>
</li>
<li>
<p>Download <code>BuildTools.jar</code> by giving the command <code>curl -o BuildTools.jar <a href="https://hub.spigotmc.org/jenkins/job/BuildTools/lastSuccessfulBuild/artifact/target/BuildTools.jar" class="bare">https://hub.spigotmc.org/jenkins/job/BuildTools/lastSuccessfulBuild/artifact/target/BuildTools.jar</a></code></p>
</li>
<li>
<p>Setup properties to generate the Spigot project by giving the command <code>export MAVEN_OPTS="-Xmx2G"</code>.</p>
</li>
<li>
<p>Generate Spigot project by giving the command <code>java -Xmx2G -jar BuildTools.jar</code>. This will show the output:</p>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-text" data-lang="text">spigot&gt; java -Xmx2G -jar ~/Downloads/BuildTools.jar
Loading BuildTools version: git-BuildTools-1847da7-45 (#45)
arun-gupta
arun.gupta@gmail.com
Starting clone of https://hub.spigotmc.org/stash/scm/spigot/bukkit.git to Bukkit
Cloned git repository https://hub.spigotmc.org/stash/scm/spigot/bukkit.git to /Users/arungupta/tools/spigot/Bukkit. Current HEAD: 31d4f76a1510fa4810a917af05eeceec03d4b98a

. . .

Success! Everything compiled successfully. Copying final .jar files now.
Copying craftbukkit-1.8.8-R0.1-SNAPSHOT.jar to /Users/arungupta/tools/spigot/.
  - Saved as craftbukkit-1.8.8.jar
Copying spigot-1.8.8-R0.1-SNAPSHOT.jar to /Users/arungupta/tools/spigot/.
  - Saved as spigot-1.8.8.jar</code></pre>
</div>
</div>
<div class="paragraph">
<p>This generates the following directories:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-text" data-lang="text">BuildData           Bukkit			Spigot			    craftbukkit-1.8.8.jar	work
BuildTools.log.txt	CraftBukkit		apache-maven-3.2.5	spigot-1.8.8.jar</code></pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="_netbeans">NetBeans</h4>
<div class="paragraph">
<p><span class="image"><img src="images/netbeans-logo.png" alt="netbeans-logo" width="223" height="82"></span> A Spigot plugin is a JAR file and requires a specific directory structure with Java and other files in it. These files have a lot of similarities but also contain some basic differences like plugin name, different commands they offer, and of course the functionality itself. These directories and files can be manually created every time by going into Explorer for Windows or Finder for Mac. That does help you understand the directory layout better, and might be interesting for the first couple of times. However, we plan to write quite a few plugins in this book. So we need to think of an efficient way to create these directories and files.</p>
</div>
<div class="paragraph">
<p>To create the plugin, we will be using a recipe to generate our <em>project</em>. The project contains the entire source code and other files to make the plugin. This recipe allows us to create a project to start with. We will call this recipe as the <em>Spigot Recipe</em> throughout this book. It simplifies the task of making plugins so you can focus on the more important and fun stuff, such as bigger TNT explosions.</p>
</div>
<div class="paragraph">
<p>So, how do you use this recipe?</p>
</div>
<div class="paragraph">
<p>This can be accomplished with an <em>IDE</em>, or an <em>integrated development environment</em>. An IDE is a tool that has a way to edit files, a way to package and run those files, and a debugger for finding issues with the files. There are many IDEs available for use, but this book will use NetBeans IDE for creating our plugins.</p>
</div>
<div class="paragraph">
<p>The two important parts of an IDE are the file editor and the packager. The file editor lets you edit separate code files in the project, while the packager puts them together into one file. In our case, that file is the plugin JAR file.</p>
</div>
<div class="paragraph">
<p>NetBeans is a free tool that runs on Macintosh, Windows, Linux, and other operating systems that has JDK installed already. This book will use it for creating plugins.</p>
</div>
<div class="paragraph">
<p>Download NetBeans from <a href="https://netbeans.org/downloads/" class="bare">https://netbeans.org/downloads/</a>. Make sure to click on ``Download&#8217; button in &#8216;Java SE&#8217; column as shown in <a href="#NetBeans_download">NetBeans download</a>.</p>
</div>
<div id="NetBeans_download" class="imageblock">
<div class="content">
<img src="images/netbeans-download.png" alt="NetBeans Download">
</div>
<div class="title">Figure 1. NetBeans download</div>
</div>
<div class="paragraph">
<p>Install NetBeans following the instructions at <a href="https://netbeans.org/community/releases/80/install.html" class="bare">https://netbeans.org/community/releases/80/install.html</a>.</p>
</div>
<div class="paragraph">
<p>If you do have a prior version of NetBeans, its recommended to install this new version anyway since it is much faster and easier to work with.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_start_minecraft_server">Start Minecraft server</h3>
<div class="paragraph">
<p>Spigot JAR file (generated earlier) and JDK are required to start the modded Minecraft server.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Go to &#8216;spigot&#8217; directory in a Command Prompt on a Windows machine or Terminal in Macintosh.</p>
</li>
<li>
<p>Create a new directory &#8216;server&#8217; in this directory. This is required because starting the server later will generate several files and directories and this will keep all of them contained in a single directory.</p>
</li>
<li>
<p>Type in <code>java -jar ../spigot-1.8.8.jar</code>.</p>
<div class="paragraph">
<p><code>java -jar &lt;file name&gt;</code> is the generic command for starting any JAR file. In this case, we are starting the server jar file, which starts the Minecraft server.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
<div class="title">java command not found</div>
<div class="paragraph">
<p>If running the server shows an error as `java: Command not found' or `java: No such file or directory' then you need to make sure the tools bundled with JDK can be invoked from Command Prompt or Terminal. Follow the instructions from <a href="http://docs.oracle.com/javase/tutorial/essential/environment/paths.html" class="bare">http://docs.oracle.com/javase/tutorial/essential/environment/paths.html</a> to set up PATH envinronment variable.</p>
</div>
</td>
</tr>
</table>
</div>
</li>
<li>
<p>Running this command will show the output:</p>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-text" data-lang="text">Loading libraries, please wait...
[21:11:27 INFO]: Starting minecraft server version 1.8.8
[21:11:27 INFO]: Loading properties
[21:11:27 WARN]: server.properties does not exist
[21:11:27 INFO]: Generating new properties file
[21:11:27 WARN]: Failed to load eula.txt
[21:11:27 INFO]: You need to agree to the EULA in order to run the server. Go to eula.txt for more info.
[21:11:27 INFO]: Stopping server</code></pre>
</div>
</div>
</li>
<li>
<p>Edit <code>eula.txt</code> by giving the command <code>vi eula.txt</code> and change the line <code>eula=false</code> to <code>eula=true</code>.</p>
</li>
<li>
<p>Give the command <code>java -jar ../spigot-1.8.8.jar</code> again in a Terminal.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Running this command will display a lot of messages in Terminal. It may look confusing at first but there is relevant for each and every line. However two messages in the output are important to understand, and are shown in <a href="#Start_Server_Output">Output from Minecraft server start</a>.</p>
</div>
<div id="Start_Server_Output" class="exampleblock">
<div class="title">Example 1. Output from Minecraft server start</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-text" data-lang="text">[21:15:37 INFO]: Starting minecraft server version 1.8.8 <b class="conum">(1)</b>
...
[21:15:37 INFO]: Default game type: SURVIVAL <b class="conum">(2)</b></code></pre>
</div>
</div>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Shows that Minecraft server version is 1.8.8. Note the exact version may differ if you have a more recent version of the JAR file.</p>
</li>
<li>
<p>Shows the default game mode is Survival. It is much easier to test these plugins in Creative, but for now, you can stay in Survival.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Starting a server for the first time in a new directory will create some new directories and files. These are all important to the server, but the only one that is important to us is the <code>plugins</code> directory.</p>
</div>
</div>
<div class="sect2">
<h3 id="_join_the_server">Join the Server</h3>
<div class="paragraph">
<p>Now that the server has started, lets see how we can join this server. Without being able to log onto a server, you cannot test your plugins. To log onto the server:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Click on the &#8216;Multiplayer&#8217; tab in the Minecraft laucnher</p>
</li>
<li>
<p>Click on &#8216;Direct Connect&#8217;</p>
</li>
<li>
<p>Enter &#8216;localhost&#8217; in the &#8216;Server Adress&#8217; box</p>
</li>
<li>
<p>Click &#8216;Join Server&#8217;</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>&#8216;localhost&#8217; is a special name reserved for everybody&#8217;s local machine. What you are doing is telling Minecraft to join the server running on your computer. Plugins will be installed on this server later.</p>
</div>
<div class="paragraph">
<p>Lets create our plugin and see how this directory is used.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_create_a_plugin">Create a Plugin</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This section will walk you through the steps of creating a plugin. Don&#8217;t panic if they seem unfamiliar at first. We&#8217;ll be using steps multiple times through out the book and you&#8217;ll be an expert at them pretty quickly.</p>
</div>
<div class="paragraph">
<p>The steps are outlined in <a href="#Steps_for_creating_a_plugin">Steps for creating a plugin</a>:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Generate a project as a placeholder to contain different files</p>
</li>
<li>
<p>Edit Java and other files, create new images, etc. in the project</p>
</li>
<li>
<p>Package the project in a JAR file</p>
</li>
<li>
<p>Copy the JAR file to CraftBukkit&#8217;s <code>plugins</code> directory</p>
</li>
</ol>
</div>
<div id="Steps_for_creating_a_plugin" class="imageblock">
<div class="content">
<img src="images/steps-for-creating-plugin.png" alt="steps for creating plugin">
</div>
<div class="title">Figure 2. Steps for creating a plugin</div>
</div>
<div class="paragraph">
<p>NetBeans helps us simplify all of these steps. Lets create our first plugin.</p>
</div>
<div class="paragraph">
<p>Our first plugin will send a message to the server console every time a player joins or leaves the server. Minecraft already does that, but the message contains many elements that may not be useful to whoever is reading it. These elements can make the message confusing. The message looks something like <a href="#Player_Join_Server_Message">Message shown on player login</a>.</p>
</div>
<div id="Player_Join_Server_Message" class="exampleblock">
<div class="title">Example 2. Message shown on player login</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-text" data-lang="text">[17:31:18 INFO]: Adityagupta[/127.0.0.1:51180] logged in with entity id 462 at ([world] 19.27553977561729, 18.113231330555088, -68.8607335912105)</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>This plugin will make the console print another message, but it will be much simpler. Each plugin needs to have a name, this plugin will be called ``Player Entry/Exit''.</p>
</div>
<div class="sect3">
<h4 id="_generate_project">Generate project</h4>
<div class="paragraph">
<p>NetBeans will be used to create the project.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
<div class="title">How to start NetBeans</div>
<div class="paragraph">
<p>On Windows, NetBeans can be started by clicking on <code>Start'', selecting the NetBeans group, and clicking on NetBeans icon. NetBeans icon <span class="image"><img src="images/netbeans-icon.png" alt="netbeans-icon" width="32" height="32"></span>. In Macintosh, click on NetBeans icon in </code>Applications''.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>To create the project, start NetBeans, and create a new project by selecting <code>File'', </code>New Project&#8230;&#8203;'' as shown in <a href="#Create_new_project_in_NetBeans">Create new project in NetBeans</a>.</p>
</div>
<div id="Create_new_project_in_NetBeans" class="imageblock">
<div class="content">
<img src="images/netbeans-create-new-project.png" alt="netbeans create new project">
</div>
<div class="title">Figure 3. Create new project in NetBeans</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>The images are captured from a Windows machine and so the menu will look different if you are using a different operating system.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>NetBeans allows you to create many different types of projects, but we want to create a project from Maven Archetype. This is what allows us to specify the recipe that has been precreated for you. You may wonder how and where this recipe is downloaded from. For curious readers, more details are available in <a href="#Maven">Maven</a>.</p>
</div>
<div class="paragraph">
<p>To do this, select <code>Maven'' and </code>Project from Archetype'' as shown in <a href="#Create_new_project_in_NetBeans_from_Maven_archetype">Create new project in NetBeans from Maven archetype</a>.</p>
</div>
<div id="Create_new_project_in_NetBeans_from_Maven_archetype" class="imageblock">
<div class="content">
<img src="images/netbeans-create-project-from-archetype.png" alt="netbeans create project from archetype">
</div>
<div class="title">Figure 4. Create new project in NetBeans from Maven archetype</div>
</div>
<div class="paragraph">
<p>This will display a list of many recipes, but we want to select our Bukkit Recipe. In the <code>Search:'' box, type </code>bukkit-template'', because that is the name of our recipe.</p>
</div>
<div class="paragraph">
<p>This recipe does not come with NetBeans. Instead, it is downloaded from Internet and installed on your machine. So make sure you are connected to the Internet when you try this step.</p>
</div>
<div id="Select_Bukkit_archetype" class="imageblock">
<div class="content">
<img src="images/netbeans-create-plugin-sample-archetype.png" alt="netbeans create plugin sample archetype">
</div>
<div class="title">Figure 5. Select Bukkit archetype</div>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<div class="title">Important</div>
</td>
<td class="content">
Although NetBeans allows you to change other values, you must not change them, becuase if you do, the correct recipe will not be chosen.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>At the time this book was written, the latest version of Bukkit was version 1.7.9-R0.2. The corresponding recipe version is 1.5. As newer versions of Bukkit are released, the recipe&#8217;s version will change as well.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<div class="title">Warning</div>
</td>
<td class="content">
<div class="title">Bukkit Recipe version</div>
<div class="paragraph">
<p>If the version in the creation screen is incorrect, change it to 1.5.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Click on ``Next'' to accept the values and continue with the creation of the plugin. You should see a screen like <a href="#PlayerEntryExit_Plugin_Details_Image">PlayerEntryExit plugin details</a>.</p>
</div>
<div id="PlayerEntryExit_Plugin_Details_Image" class="imageblock">
<div class="content">
<img src="images/netbeans-create-plugin-playerentryexit.png" alt="netbeans create plugin playerentryexit">
</div>
<div class="title">Figure 6. PlayerEntryExit plugin details</div>
</div>
<div class="paragraph">
<p>There are many important values in this screen:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Change the <code>Project Name'' to </code>PlayerEntryExit'', or whatever name you like. The Project Name defines the name of the plugin. Normally, you would keep the first letter of all words capital so you can distinguish between words. Spaces and characters like <code>;'', </code>.'', and ``)'' are not allowed in the name.</p>
</li>
<li>
<p><code>Project Location'' is the location of a directory where you would like to store all of your plugins. It is recommended to define one directory where all the plugins will be stored. For convenience, create </code>plugins'' directory <code>C:\</code> on Windows or <code>/Users/&lt;name&gt;</code> on Mac where &lt;name&gt; is your username.</p>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
<div class="paragraph">
<p>Its recommended to keep all the plugins in the same directory. This makes it easy to zip them all together and share with your minecraft buddies.</p>
</div>
</td>
</tr>
</table>
</div>
</li>
<li>
<p><code>Group Id'' uniquely identifies your plugin amongst all the plugins that you create. For example, you can change this value to </code>org.yourname.bukkit.plugins''. Make sure to replace ``yourname'' with your name. This value will be same for all plugins created in this book.</p>
</li>
<li>
<p>``Version'' defines the first version of your plugin. The default value of this field follows the standard version naming convention and typically does not need to be updated.</p>
</li>
<li>
<p>If the <code>Group Id'' value is changed, then the </code>Package'' value is accordingly updated. For simplicity, its better to accept this value.</p>
</li>
<li>
<p>In the <code>Additional Creation Properties'', click in the text box under the </code>Value'' column and type the value of craftbukkit directory from your machine. This will be used to install the generated plugin JAR file to the plugins directory of your server. This directory name must match the directory where your server was started, <code>C:\craftbukkit</code> or <code>\Users\&lt;username&gt;\craftbukkit</code> in our case.</p>
<div class="paragraph">
<p>The directory path shown is from a Windows machine. It will be different if your machine has a different operating system.</p>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>Clicking on ``Finish'' button creates your plugin project and shows the structure in <a href="#Player_EntryExit_Plugin_Default_Structure_Image">Player Entry/Exit plugin directory structure</a>. It will be located on the left-hand side of the IDE.</p>
</div>
<div id="Player_EntryExit_Plugin_Default_Structure_Image" class="imageblock">
<div class="content">
<img src="images/netbeans-create-plugin-playerentryexit-directory-structure.png" alt="netbeans create plugin playerentryexit directory structure">
</div>
<div class="title">Figure 7. Player Entry/Exit plugin directory structure</div>
</div>
<div class="paragraph">
<p>This structure contains the files that make your plugin work. <code>Source Packages'' contains the Java source files. </code>Other Sources'' contains the configuration files. ``Project Files'' has some other files required for creating the JAR file.</p>
</div>
<div class="paragraph">
<p>If you click on the <code>+'' signs next to </code>Source Packages'', <code>Other Sources'', or </code>Project Files'', it will expand them to let you see what&#8217;s inside. An expanded directory structure with those three directories open looks like as shown in <a href="#Expanded_Project_Structure_Player_EntryExit_Plugin_Image">Player Entry/Exit plugin expanded directory structure</a>.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
<div class="paragraph">
<p>You can also click on the ``-'' signs to close the structure.</p>
</div>
</td>
</tr>
</table>
</div>
<div id="Expanded_Project_Structure_Player_EntryExit_Plugin_Image" class="imageblock">
<div class="content">
<img src="images/netbeans-create-plugin-playerentryexit-directory-structure-expanded.png" alt="netbeans create plugin playerentryexit directory structure expanded">
</div>
<div class="title">Figure 8. Player Entry/Exit plugin expanded directory structure</div>
</div>
<div class="paragraph">
<p>The key points in <a href="#Expanded_Project_Structure_Player_EntryExit_Plugin_Image">Player Entry/Exit plugin expanded directory structure</a> are explained:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><code>Source Packages'' shows the </code>org.devoxx4kids.Bukkits.plugins.playerentryexit'' Java <em>package</em>. Package is a Java concept that allows to keep similar Java files together. For example, Java files for entities can be in one package, all files for enchantments can be in a different package, and so on. This allows an easy organization of a large number of Java files easily. In our case, ``MyPlugin.java'' file is in the shown package.</p>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
<div class="paragraph">
<p>Each Java file is a text-based file, and ends with <code>.java</code> extension.</p>
</div>
</td>
</tr>
</table>
</div>
</li>
<li>
<p><code>Other Sources'' has </code>plugin.yml''. This file is used to provide basic information about the plugin such as plugin name, author, vesion, and the commands exposed by the plugin.</p>
</li>
<li>
<p><code>Project Files'' has </code>pom.xml''. This file provides some information about how the project will be turned into a single JAR file and how it can be installed on your server. The most important information is the version of the CraftBukkit JAR file being used.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Click on ``MyPlugin.java'' to see the code shown in <a href="#PlayerEntryExit_MyPlugin_java">MyPlugin.java in Player Entry/Exit plugin</a>. It is shown in the large middle section of the IDE.</p>
</div>
<div id="PlayerEntryExit_MyPlugin_java" class="exampleblock">
<div class="title">Example 3. MyPlugin.java in Player Entry/Exit plugin</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">package org.devoxx4kids.bukkit.plugins.playerentryexit;

import java.util.logging.Level;
import org.Bukkit.plugin.java.JavaPlugin;

public class MyPlugin extends JavaPlugin {
    // This code is called after the server starts and after the /reload command
    @Override
    public void onEnable() {
        getLogger().log(Level.INFO, "{0}.onEnable()",
            this.getClass().getName());
    }

    // This code is called before the server stops and after the /reload command
    @Override
    public void onDisable() {
        getLogger().log(Level.INFO, "{0}.onDisable()",
            this.getClass().getName());
    }
}</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>Most of the code in this file is a Java <em>class</em>, which in this case is named <code>MyPlugin</code> (as you can see on the third line). This is our first Java class and follows the syntax defined by the Java programming langauge. There is no need to worry too much about different Java keywords, parentheses, and formatting in this code.</p>
</div>
<div class="paragraph">
<p>The key part to understand is that this class contains two <em>methods</em>, which is where you keep the code that actually does something. The two methods in this class are called <code>onEnable()</code> and <code>onDisable()</code>. (Don&#8217;t worry about the ``public void''"'' stuff; we&#8217;ll explain that later.) Most method names are verbs, which indicate what the code in the method does.</p>
</div>
<div class="paragraph">
<p>The two methods in this code are made to run when the plugin is enabled and disabled.</p>
</div>
</div>
<div class="sect3">
<h4 id="_register_and_create_the_listener">Register and create the listener</h4>
<div class="paragraph">
<p>One of the ways Bukkit plugins are created is listening for different <em>events</em> in <em>listeners</em>. Events are something that happens in your world such as player breaks a block, an entity explodes, or a recipe completed in a crafting table. These events are ``handled'' using Event Handlers in Listener classes.</p>
</div>
<div class="paragraph">
<p>Event Handlers are methods written in a Java class bundled with the plugin. These methods perform the action required when the particular event occurs, such as displaying a message to the player when a particular block is placed or broken. The Java class itself is called the ``Listener'' because its methods are listening for the events. Lets create a Listener and add Event Handler to them.</p>
</div>
<div class="paragraph">
<p>We need to make sure that the listener is registered before the player can play the game. This will ensure that any events are correctly handled by the listener. We&#8217;ll look at what these events little later in this chapter. For now, the appropriate place to add the listener would be in the <code>onEnable()</code> method, as this method is called when the plugin is enabled. Registering a listener requires us to add a little bit of Java code. Lets add that code first, and then we&#8217;ll understand it.</p>
</div>
<div class="paragraph">
<p>Add the line shown in <a href="#Player_EntryExist_Register_Listener">Registering the Player Entry/Exit Listener</a> to <code>onEnable()</code> method of <code>MyPlugin</code> class. Click after the <code>{</code> right next to <code>onEnable()</code>, then press Enter to make a new line. Copy and paste the code there.</p>
</div>
<div id="Player_EntryExist_Register_Listener" class="exampleblock">
<div class="title">Example 4. Registering the Player Entry/Exit Listener</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">getServer()
    .getPluginManager()
    .registerEvents(
        new PlayerEntryExitListener(getLogger()),
        this);</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>This code may look confusing at first but it has been formatted so that you can read it easily. Don&#8217;t worry about <code>()</code>, <code>.</code>, <code>this</code>, and <code>new</code> for now, this is explained in <a href="#Getting_Started_with_Java">[Getting_Started_with_Java]</a>. This method obtains the CraftBukkit server where the plugin is installed, gets a manager to interact with different plugins, and register the event listener named <code>PlayerEntryExitListener</code>. Simple, isn&#8217;t it ?</p>
</div>
<div class="paragraph">
<p>The new listener class needs to be created next. NetBeans simplifies the creation of this file. Next to the line you just created, there should be a stop sign.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
<div class="paragraph">
<p>The stop sign (
<span class="image"><img src="images/netbeans-error-stopsign-1.png" alt="netbeans-error-stopsign-1"></span> or
<span class="image"><img src="images/netbeans-error-stopsign-2.png" alt="netbeans-error-stopsign-2"></span> ) is shown on the left side of your code to indicate a syntax error. That way, you can fix the error before building the plugin. The plugin cannot be built if it contains errors. Generally the error can be fixed by clicking on the stop sign to open a list of suggested fixes.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The purpose of the stop sign is to inform that there is an error. Click on the stop sign to open a drop-down menu with three options in it as shown in <a href="#Creating_Player_EntryExit_Listener_From_DropDown_Menu">Creating the PlayerEntryExitListener</a>. The one you want to select is <code>Create class 'PlayerEntryExitListener' with constructor "PlayerEntryExitListener(java.util.logging.Logger)" in package org.devoxx4kids.bukkit.plugins.playerentryexit</code>.</p>
</div>
<div id="Creating_Player_EntryExit_Listener_From_DropDown_Menu" class="imageblock">
<div class="content">
<img src="images/netbeans-create-plugin-playerentryexit-create-listener.png" alt="netbeans create plugin playerentryexit create listener">
</div>
<div class="title">Figure 9. Creating the PlayerEntryExitListener</div>
</div>
<div class="paragraph">
<p>This will automatically create a new file <code>PlayerEntryExitListener</code> and opens it in the IDE. It looks like as shown in <a href="#Player_EntryExist_Listener_Source_File">PlayerEntryExitListener Java source</a>.</p>
</div>
<div id="Player_EntryExist_Listener_Source_File" class="exampleblock">
<div class="title">Example 5. PlayerEntryExitListener Java source</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">package org.devoxx4kids.bukkit.plugins.playerentryexit; <b class="conum">(1)</b>

import java.util.logging.Logger; <b class="conum">(2)</b>
import org.bukkit.event.Listener;

class PlayerEntryExitListener implements Listener { <b class="conum">(3)</b>

    public PlayerEntryExitListener(Logger logger) { <b class="conum">(4)</b>
    }

}</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>Some key Java concepts to be understood in this code:</p>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Each class belongs to a package. This is identified using <code>package</code> keyword in Java, a space, followed by the package name, and ended by <code>;</code>.</p>
</li>
<li>
<p>A Java class can use other Java classes from different packages. These classes need to be <em>imported</em> so that they can be referred to within the code. This class is importing two classes, <code>java.util.logging.Logger</code> is from Java and <code>org.bukkit.event.Listener</code> is from Bukkit. Any package name starting with <code>java.</code> comes from Java and any package name starting with <code>org.bukkit.</code> comes from Bukkit.</p>
</li>
<li>
<p>A special method is created in the class that has the exact same name as of the class. This method is called as <em>constructor</em> of the class. This method also takes a <em>parameter</em> (we&#8217;ll explain this shortly), in this case <code>Logger</code> is a JDK class that allows to log statements.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>When a file is created, it shows up in the middle part of the IDE. You can make changes to it there.</p>
</div>
<div class="paragraph">
<p>Lets change this code, or the constructor specifically, as shown in <a href="#PlayerEntryExitListener_updated_method">PlayerEntryExitListener updated method</a>.</p>
</div>
<div id="PlayerEntryExitListener_updated_method" class="exampleblock">
<div class="title">Example 6. PlayerEntryExitListener updated method</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">package org.devoxx4kids.bukkit.plugins.playerentryexit;</code></pre>
</div>
</div>
<div class="paragraph">
<p>import java.util.logging.Logger;
import org.Bukkit.event.Listener;</p>
</div>
<div class="paragraph">
<p>class PlayerEntryExitListener implements Listener {</p>
</div>
<div class="literalblock">
<div class="content">
<pre>Logger logger; <b class="conum">(1)</b></pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>public PlayerEntryExitListener(Logger logger) {
    this.logger = logger; <b class="conum">(2)</b>
}</pre>
</div>
</div>
<div class="paragraph">
<p>}</p>
</div>
</div>
</div>
<div class="paragraph">
<p>This will allow us to log the message in Minecraft server log using <code>logger</code>.</p>
</div>
<div class="paragraph">
<p>Now, we will have to add some methods in the class so that it can listen for players joining and leaving the server.</p>
</div>
</div>
<div class="sect3">
<h4 id="_add_event_handlers">Add event handlers</h4>
<div class="paragraph">
<p>Finally, we will have to add the methods that <code>`listen'' for players joining and leaving the server in Listener. The events are generated by the server and identified by predefined Java classes in the Bukkit API. For example, `PlayerJoinEvent</code> is an event called when a player joins the server and <code>PlayerQuitEvent</code> is an event called when a player leaves the server. A complete list of these events is defined in Bukkit API but you don&#8217;t need to worry about it for now. These will be explained in <a href="#Bukkit_documentation">Bukkit documentation</a>.</p>
</div>
<div class="paragraph">
<p>For now, lets take a look at the methods that need to be added in <a href="#PlayerEntryExit_Listener_methods">Listener methods for Player Entry/Exit plugin</a>.</p>
</div>
<div id="PlayerEntryExit_Listener_methods" class="exampleblock">
<div class="title">Example 7. Listener methods for Player Entry/Exit plugin</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">@EventHandler <b class="conum">(1)</b>
public void playerJoin(PlayerJoinEvent event){ <b class="conum">(2)</b>
    logger.log(Level.INFO,
        "{0} has joined the server.", event.getPlayer().getName()); <b class="conum">(3)</b>
}

@EventHandler
public void playerLeave(PlayerQuitEvent event){ <b class="conum">(4)</b>
    logger.log(Level.INFO,
        "{0} has left the server.", event.getPlayer().getName());
}</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>There are some important parts in this code:</p>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Any method of this class can be marked to <code>`listen'' for events. Such a method needs to be marked with `@EventHandler</code>. The <code>@</code> at the beginning indicates that this is a <em>Java annotation</em> which allows Java to define special marks in the code. The exact behavior of the annotation is defined by Bukkit.</p>
</li>
<li>
<p>This method is called when a player joins the server. This is identified by the <code>PlayerJoinEvent</code> parameter, which as explained earlier, is an event created by Minecraft server and captured as a Bukkit class.</p>
</li>
<li>
<p>This line logs the message stating that a player has joined the server. The text is <code>playername has joined the server.</code> where <code>playername</code> is value returned from <code>event.getPlayer().getName()</code>.</p>
</li>
<li>
<p>The second method does the same thing, but listens for a player leaving the server, as defined by the <code>PlayerQuitEvent</code> parameter. Of course, the message now says <code>playername has left the server</code>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>You are now done adding functionality to your Listener. The complete code should look like as shown in <a href="#Player_EntryExit_complete_Listener">Player Entry/Exit plugin complete Listener</a>.</p>
</div>
<div id="Player_EntryExit_complete_Listener" class="exampleblock">
<div class="title">Example 8. Player Entry/Exit plugin complete Listener</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">package org.devoxx4kids.bukkit.plugins.playerentryexit;

import java.util.logging.Level;
import java.util.logging.Logger;
import org.bukkit.entity.Player;
import org.bukkit.event.EventHandler;
import org.bukkit.event.Listener;
import org.bukkit.event.player.PlayerJoinEvent;
import org.bukkit.event.player.PlayerQuitEvent;

public class PlayerEntryExitListener implements Listener {

    Logger logger;

    public PlayerEntryExitListener(Logger logger) {
        this.logger = logger;
    }

    @EventHandler
    public void playerJoin(PlayerJoinEvent event){
        logger.log(Level.INFO,
            "{0} has joined the server.", event.getPlayer().getName());
    }

    @EventHandler
    public void playerLeave(PlayerQuitEvent event){
        logger.log(Level.INFO,
            "{0} has left the server.", event.getPlayer().getName());
    }

}</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_build_and_install_the_plugin">Build and install the plugin</h4>
<div class="paragraph">
<p>Now, we will have to install the plugin into your server.</p>
</div>
<div class="paragraph">
<p>We can&#8217;t just put the plugin source directory into it; that wouldn&#8217;t work. Computers undertand binary code. So we&#8217;ll have to use JDK to generate the JAR file. This will require a few steps in order to install the plugin:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Create a JAR file from your plugin Java source files and configuration files</p>
</li>
<li>
<p>Copy that JAR file into the ``plugins'' directory in your server directory</p>
</li>
<li>
<p>Restart your server and check that the plugin is correctly installed</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Fortunately, this is not too hard, but you will have to pay attention!</p>
</div>
<div class="paragraph">
<p>First of all, you will have to turn the plugin source and configuration files into a JAR file. In NetBeans, if you right-click on your project in the Projects window, a drop-down menu will appear with many options on it as shown in <a href="#Build_the_plugin">Build the plugin</a>.</p>
</div>
<div id="Build_the_plugin" class="imageblock">
<div class="content">
<img src="images/netbeans-create-plugin-sample-build.png" alt="Build the plugin">
</div>
<div class="title">Figure 10. Build the plugin</div>
</div>
<div class="paragraph">
<p>The one you want is called ``Build'', so select that.</p>
</div>
<div class="paragraph">
<p>Clicking on <code>Build'' will generate the JAR file and also copy it to the </code>plugins'' directory of your server.</p>
</div>
<div class="paragraph">
<p>When you click on ``Build'', a console window in NetBeans will pop up at the bottom of your screen as shown in <a href="#NetBeans_console_window">NetBeans console window</a>.</p>
</div>
<div id="NetBeans_console_window" class="imageblock">
<div class="content">
<img src="images/netbeans-create-plugin-sample-console-window.png" alt="netbeans create plugin sample console window">
</div>
<div class="title">Figure 11. NetBeans console window</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
<div class="title">NetBeans output window</div>
<div class="paragraph">
<p>If NetBeans Output window does not show up or you accidentally closed it, then you can click on Window &#8594; Projects menu to bring this window back.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Messages will start appearing in the log as the plugin JAR file is built and installed in the ``plugins'' directory. If the plugin is successfully built, you should see the output as shown in <a href="#Clean_and_build_log">Clean and build log</a>.</p>
</div>
<div id="Clean_and_build_log" class="exampleblock">
<div class="title">Example 9. Clean and build log</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre>[antrun:run]
Executing tasks
     [copy] Copying 1 file to C:\Users\Aditya\Desktop\craftbukkit\plugins <b class="conum">(1)</b>
Executed tasks
------------------------------------------------------------------------
BUILD SUCCESS <b class="conum">(2)</b>
------------------------------------------------------------------------</pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>There are two important things in this part of the log:</p>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Tells you that the generated plugin is installed in this directory.</p>
</li>
<li>
<p>If this line says <code>BUILD SUCCESS</code>, then your plugin was built correctly. Otherwise, the plugin was not built correctly.</p>
</li>
</ol>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<div class="title">Warning</div>
</td>
<td class="content">
<div class="paragraph">
<p>Any errors during building the plugin JAR file are highlighted in the console window as shown in <a href="#A_sample_error">A sample error</a>. By default, the generated sample plugin should work as is. But these errors could occur if you mistakenly typed something in the source files before clicking on ``Build''.</p>
</div>
</td>
</tr>
</table>
</div>
<div id="A_sample_error" class="imageblock">
<div class="content">
<img src="images/netbeans-create-plugin-sample-error.png" alt="netbeans create plugin sample error">
</div>
<div class="title">Figure 12. A sample error</div>
</div>
<div class="paragraph">
<p>The best way to fix it is to delete the plugin directory and regenerate it again using the instructions in <a href="#Create_Sample_Plugin">[Create_Sample_Plugin]</a>.</p>
</div>
</div>
<div class="sect3">
<h4 id="_verify_that_it_works">Verify that it works</h4>
<div class="paragraph">
<p>Clicking that one simple <code>Build'' menu item created the JAR file and deployed it in the </code>plugins'' directory of our server as well. We just need to restart our server now.</p>
</div>
<div class="paragraph">
<p>The deployed plugin can be reloaded by giving the <code>reload</code> command in server console as shown in <a href="#Reloading_PlayerEntryExit_Plugin">Reloading your server</a>. This will print the following message in the server console.</p>
</div>
<div id="Reloading_PlayerEntryExit_Plugin" class="exampleblock">
<div class="title">Example 10. Reloading your server</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-text" data-lang="text">&gt;reload
[21:32:33 INFO]: [sample] Loading playerentryexit v1.0-SNAPSHOT <b class="conum">(1)</b>
[21:32:33 INFO]: [sample] Enabling playerentryexit v1.0-SNAPSHOT <b class="conum">(2)</b>
[21:32:33 INFO]: [sample] org.devoxx4kids.bukkit.plugins.playerentryexit.MyPlugin.onEnable() <b class="conum">(3)</b>
[21:32:33 INFO]: Server permissions file permissions.yml is empty, ignoring it
[21:32:33 INFO]: CONSOLE: Reload complete.</code></pre>
</div>
</div>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>This message is printed by CraftBukkit to indicate that the plugin is now loaded.</p>
</li>
<li>
<p>This message is printed by CraftBukkit to indicate that the plugin is now enabled.</p>
</li>
<li>
<p>This message is printed from the <code>onEnable</code> method of <code>MyPlugin</code> class.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Now that the plugin has been successfully installed, lets make sure the plugin actually works. Join your server. You should see a message in the console saying that <code>playername joined the server</code> where <code>playername</code> should be your Minecraft account name.</p>
</div>
<div class="paragraph">
<p>Disconnect from the server and check for the message <code>playername has left the server</code> in the console. Connect to the server again to see the message <code>playername has joined the server</code>. Disconnect and connect a couple of times just to celebrate the creationf of your first plugin! Don&#8217;t forget to check for messages in the console.</p>
</div>
<div class="paragraph">
<p>Another way to confirm that the plugin is indeed installed on the server is by issuing the <code>plugins</code> command in server as shown in <a href="#Check_the_list_of_installed_plugins_on_server">Check the list of installed plugins on server</a>.</p>
</div>
<div id="Check_the_list_of_installed_plugins_on_server" class="exampleblock">
<div class="title">Example 11. Check the list of installed plugins on server</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-text" data-lang="text">&gt;plugins
[15:23:06 INFO]: Plugins (1): playerentryexit</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>The list here shows that only ``playerentryexit'' plugin is installed. If you have moved ahead, and installed other plugins, then those will be shown here as well.</p>
</div>
</div>
<div class="sect2">
<h3 id="_summary">Summary</h3>
<div class="paragraph">
<p>This chapter explained the key components to create a plugin. Your machine was setup with the tools required to create a plugin. A simple CraftBukkit server was started and we explained how you can use Minecraft launcher to connect to this server. Bukkit Recipe and how it simplifies the creation of a plugin was introduced. This recipe will be used in subsequent chapters to create other plugins. Finally we packaged, installed, and verified the plugin to our server.</p>
</div>
<div class="paragraph">
<p>Even though this was a simple plugin but it showed the most important pieces to create a plugin. It also taught some fundamental Bukkit concepts like Listeners and Event Handlers. Basic Java concepts like annotations, methods, and method parameters were introduced as well.</p>
</div>
<div class="paragraph">
<p>Now that we know how to make a simple plugin, we can move on to build more advanced plugins. The next few chapters will be based upon this chapter and make more plugins. They will start off simple like this one, and get more complicated along the way.</p>
</div>
<div class="paragraph">
<p>Lets keep reading and make some fun plugins!</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="Block-Money-Chapter">Creating In-game Money</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Now that you know how to create a plugin, lets make our first fun plugin.</p>
</div>
<div class="paragraph">
<p>In this chapter, we will be using the Bukkit Recipe introduced in last chapter to create a new plugin. We will then use a Listener to reward a player with in-game money whenever he/she breaks or places a block.</p>
</div>
<div class="sect2">
<h3 id="_create_the_plugin">Create the plugin</h3>
<div class="paragraph">
<p>Again, we will be using the Bukkit Recipe to create the plugin. To reiterate the steps for creating a plugin are:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Click on <code>File'' then </code>New Project&#8230;&#8203;''.</p>
</li>
<li>
<p>Select <code>Maven'' then </code>Project from Archetype''.</p>
</li>
<li>
<p>Use the <code>Search'' box to find </code>bukkit-template'' and make sure the version is 1.5.</p>
</li>
<li>
<p>Click ``Next'' to create the plugin.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>The information that you enter in the plugin creation will be very similar to
<a href="#PlayerEntryExit_Plugin_Details_Image">PlayerEntryExit plugin details</a>. <a href="#BlockMoney_plugin_values">BlockMoney plugin updated values</a> shows the values that needs to be updated.</p>
</div>
<table id="BlockMoney_plugin_values" class="tableblock frame-all grid-all spread">
<caption class="title">Table 1. BlockMoney plugin updated values</caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field</th>
<th class="tableblock halign-left valign-top">Value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Project Name</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">BlockMoney</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Package</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">org.devoxx4kids.bukkit.plugins.blockmoney</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Click on `Finish' button to complete the plugin creation and open the project. The expanded directory should look like as shown in <a href="#Block_Money_expanded_directory_structure">Block Money expanded directory structure</a>.</p>
</div>
<div id="Block_Money_expanded_directory_structure" class="imageblock">
<div class="content">
<img src="images/netbeans-create-plugin-block-money-directory-structure-expanded.png" alt="netbeans create plugin block money directory structure expanded">
</div>
<div class="title">Figure 13. Block Money expanded directory structure</div>
</div>
<div class="paragraph">
<p>Note that the new values are reflected in first and fourth line of this image.</p>
</div>
<div class="paragraph">
<p>Just like Player Entry/Exit plugin directory structure explained in <a href="#Expanded_Project_Structure_Player_EntryExit_Plugin_Image">Player Entry/Exit plugin expanded directory structure</a>, this directory has <code>org.devoxx4kids.bukkit.plugins.blockmoney.MyPlugin</code> class which is the entry point of the plugin, <code>plugin.yml</code> that defines plugin configuration, and <code>pom.xml</code> that defines instructions on how to build and install the plugin.</p>
</div>
</div>
<div class="sect2">
<h3 id="_register_and_create_the_listener_2">Register and create the Listener</h3>
<div class="paragraph">
<p>A new Listener, just like the one in Player Entry/Exit plugin, needs to be created. Open the generated <code>MyPlugin.java</code>, add the line shown in <a href="#Block_Money_plugin_register_listener">Register listener in MyPlugin class of Block Money plugin</a> in <code>onEnable()</code> method. This can be done by placing your curson before the first occurrence of <code>}</code> after <code>onEnable</code> method and pressing Enter key couple of times to create empty lines to add this code. And then type or copy/paste this code in these newly added lines.</p>
</div>
<div id="Block_Money_plugin_register_listener" class="exampleblock">
<div class="title">Example 12. Register listener in MyPlugin class of Block Money plugin</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">getServer()
  .getPluginManager()
  .registerEvents(new MoneyListener(),
    this);</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>This line registers the Listener, just like in <a href="#Player_EntryExist_Register_Listener">Registering the Player Entry/Exit Listener</a>. Notice that the name of the Listener is different, to match the purpose of this plugin.</p>
</div>
<div class="paragraph">
<p>The updated method will look like as shown in <a href="#Block_Money_plugin_onEnable_method">onEnable method in BlockMoney plugin class</a>.</p>
</div>
<div id="Block_Money_plugin_onEnable_method" class="exampleblock">
<div class="title">Example 13. onEnable method in BlockMoney plugin class</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">@Override
public void onEnable() {
    getLogger().log(Level.INFO, "{0}.onEnable()",
        this.getClass().getName());
    getServer().getPluginManager() <b class="conum">(1)</b>
        .registerEvents(new MoneyListener(), this);
}</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>The newly added code is highlighted in bold.</p>
</div>
<div class="paragraph">
<p>Again, click on the stop sign to see the drop-down menu as shown in <a href="#Create_BlockMoney_Listener_From_DropDown_Menu">Create the BlockMoneyListener class</a> and select the option that says <code>Create class 'BlockMoneyListener' in package org.devoxx4kids.bukkit.plugins.blockmoney</code></p>
</div>
<div id="Create_BlockMoney_Listener_From_DropDown_Menu" class="imageblock">
<div class="content">
<img src="images/netbeans-create-plugin-block-money-create-listener.png" alt="netbeans create plugin block money create listener">
</div>
<div class="title">Figure 14. Create the BlockMoneyListener class</div>
</div>
<div class="paragraph">
<p>This will create a new Java source file for you and opens it in NetBeans. Now the functionality can be added to the plugin. The generated class is shown in <a href="#Generated_MoneyListener_class">Generated MoneyListener class</a>.</p>
</div>
<div id="Generated_MoneyListener_class" class="exampleblock">
<div class="title">Example 14. Generated MoneyListener class</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">class MoneyListener implements Listener {

    public MoneyListener() {
    }

}</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>This is a Java class named <code>MoneyListener</code> with a constructor method.</p>
</div>
</div>
<div class="sect2">
<h3 id="_add_event_handlers_2">Add event handlers</h3>
<div class="paragraph">
<p>Open up the Listener class. Unlike Player Entry/Exit plugin, there is no need to change the constructor. However we need to store some values such as how much money to reward and how much money is accumulated by each player. These values are stored in <em>variables</em>. A variable needs a name, has a type, and is assigned a value using <code>=</code>. Java has lots of predefined types such as <code>int</code> for storing integer values, <code>boolean</code> for storing true or false values, and <code>String</code> for storing text values.</p>
</div>
<div class="paragraph">
<p>Add the code shown in <a href="#BlockMoney_plugin_variables">Variables in BlockMoney plugin</a> in the <code>BlockMoneyListener.java</code>.</p>
</div>
<div id="BlockMoney_plugin_variables" class="exampleblock">
<div class="title">Example 15. Variables in BlockMoney plugin</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">float moneyToReward = 0.10F; <b class="conum">(1)</b>

HashMap&lt;String, Float&gt; money = new HashMap(); <b class="conum">(2)</b>

public MoneyListener() {
}</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>These lines add two important variables:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>The first one is of the type <em>float</em>, another of the Java predefined types, and stores a decimal value. It is set to 0.10, and will be used to determine how much money each player will receive. By default, any decimal value in Java, 0.10 in our case, is stored such that it can accommodate really large decimal values. But since our decimal number is rather small, <code>f</code> or <code>F</code> can be added after the number to indicate otherwise.</p>
<div class="paragraph">
<p>Note no $ signs are stored as part of this value. Its our understanding that this variable will be used for storing money. And we&#8217;ll show that symbol when we display the money earned.</p>
</div>
</li>
<li>
<p>The second one is a <code>HashMap</code>, and will be used to store each player&#8217;s money value. HashMap is a predefined Java class that store multiple records. Each record has a <em>key</em> and a <em>value</em> of different types. The key uniquely idenitfies a record. In our case, the key is the player&#8217;s name, of the type <code>String</code>, and the corresponding value is the player&#8217;s money, of the type <code>Float</code>. More details about HashMap are available in the javadocs at <a href="http://docs.oracle.com/javase/8/docs/api/java/util/HashMap.html" class="bare">http://docs.oracle.com/javase/8/docs/api/java/util/HashMap.html</a>.</p>
<div class="paragraph">
<p>An in-memory representation of a Java class needs to be created in order to run the program. This representation is called as an <em>instance</em> and can be created using the <code>new</code> keyword in Java. Constructor of the class needs to be speified in order to create a new instance. We will create a new instance of HashMap to store the money earned by each player.</p>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>Now, we need to add methods to earn money. The methods are shown in <a href="#BlockMoney_methods_to_earn_money">BlockMoney plugin methods to earn money</a>.</p>
</div>
<div id="BlockMoney_methods_to_earn_money" class="exampleblock">
<div class="title">Example 16. BlockMoney plugin methods to earn money</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">@EventHandler
public void checkForNullMoney(PlayerJoinEvent event){ <b class="conum">(1)</b>
    if (!money.containsKey(event.getPlayer().getName())) { <b class="conum">(2)</b>
        money.put(event.getPlayer().getName(), 0F); <b class="conum">(3)</b>
    }
}

@EventHandler
public void rewardBlockPlace(BlockPlaceEvent event){ <b class="conum">(4)</b>
    money.put(event.getPlayer(), <b class="conum">(5)</b>
        money.get(event.getPlayer().getName())
        + moneyToReward);
    event.getPlayer().sendMessage(ChatColor.GOLD + "You now have " <b class="conum">(6)</b>
        + ChatColor.GREEN + "$"
        + String.format("%.2f", money.get(event.getPlayer())));
}

@EventHandler
public void rewardBlockBreak(BlockBreakEvent event){ <b class="conum">(7)</b>
    money.put(event.getPlayer(),
        money.get(event.getPlayer().getName())
        + moneyToReward);
    event.getPlayer().sendMessage(ChatColor.GOLD + "You now have "
        + ChatColor.DARK_GREEN
        + "$" + String.format("%.2f", money.get(event.getPlayer())));
}</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>All these methods are event handlers but probably look confusing to you, so here is an explanation:</p>
</div>
<div class="colist arabic">
<ol>
<li>
<p>This method has <code>@EventHandler</code> above it, so it can listen for events. Minecraft generates an event when a player joins the server. This event is captured as <code>PlayerJoinEvent</code> in Bukkit. Using this class as Java method parameter type ensures that this method is called whenever a player joins the server.</p>
</li>
<li>
<p><code>money.containsKey</code> is invoking the method <code>containsKey</code> on the <code>money</code> HashMap and returns true if it contains a specific key. In this case the key is player&#8217;s name that is obtained by <code>event.getPlayer().getName()</code>. Note that the name returned will be of the player that caused the event. So if <code>money</code> HashMap contains the player&#8217;s name then a true value is returned, false otherwise. The true and false values are defined by another predefined Java type known as <em>boolean</em>. A boolean type can have only true or false value.</p>
</li>
<li>
<p>If the player&#8217;s name does not exist in the <code>money</code> HashMap then a new one is created with a value of 0.</p>
</li>
<li>
<p>This method also listens for events, but the event is <code>BlockPlaceEvent</code> in this case. This event is once again generated by the server and defined by the Bukkit API. This method will reward players with money when they place blocks.</p>
</li>
<li>
<p>This line updates the player&#8217;s money value in the HashMap.</p>
</li>
<li>
<p>This line sends the player a message telling them how much money they now have. The money value is in the color GREEN to show that the player placed a block.</p>
</li>
<li>
<p>This method does the same thing as the previous one, but is called when a player breaks a block. The money value is in DARK_GREEN to show that the player has broken a block.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_install_and_verify">Install and verify</h3>
<div class="paragraph">
<p>Now, build and install the plugin as explained in <a href="#Reloading_PlayerEntryExit_Plugin">Reloading your server</a>. To reiterate, right-click on your project and select <code>Build</code>. This will create the JAR file of your plugin that you can put in your server&#8217;s ``plugins'' directory.</p>
</div>
<div class="paragraph">
<p>If there are no errors, NetBeans should show the message as shown in <a href="#BlockMoney_NetBeans_Build">NetBeans output window for BlockMoney plugin</a>. It will be the same as the message shown when you build the Player Entry/Exit plugin.</p>
</div>
<div id="BlockMoney_NetBeans_Build" class="exampleblock">
<div class="title">Example 17. NetBeans output window for BlockMoney plugin</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-text" data-lang="text">[antrun:run]
Executing tasks
     [copy] Copying 1 file to C:\Users\Aditya\Desktop\craftbukkit\plugins <b class="conum">(1)</b>
Executed tasks
------------------------------------------------------------------------
BUILD SUCCESS
------------------------------------------------------------------------</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>Restart the CraftBukkit server as explained in <a href="#Running_CraftBukkit_Server">Run a CraftBukkit server</a>. Now when you play the game and try to place or break a block, the amount of money is shown in the game console as in <a href="#BlockMoney_Money_earned_for_breaking_and_placing_blocks">Money earned for breaking and placing blocks</a>.</p>
</div>
<div id="BlockMoney_Money_earned_for_breaking_and_placing_blocks" class="imageblock">
<div class="content">
<img src="images/netbeans-create-plugin-block-money-minecraft-output.png" alt="netbeans create plugin block money minecraft output">
</div>
<div class="title">Figure 15. Money earned for breaking and placing blocks</div>
</div>
<div class="paragraph">
<p>Notice that the player placed two blocks and broke one block. There are two light green messages for placing blocks and one dark green message for breaking blocks.</p>
</div>
</div>
<div class="sect2">
<h3 id="_summary_2">Summary</h3>
<div class="paragraph">
<p>This chapter used concepts from the previous chapter to build a plugin that rewards players with ingame money whenever they place or break blocks. The Bukkit Recipe was used to create the plugin, <code>PlayerJoinEvent</code>, <code>BlockPlaceEvent</code>, and <code>BlockBreakEvent</code> event handlers were used in the listener.</p>
</div>
<div class="paragraph">
<p>Creating a new instance of a Java class, variables, data types, using HashMap to store key/value records, comparing two values of same type using <code>if</code> statement, and boolean conditions were also explained using examples from the code.</p>
</div>
<div class="paragraph">
<p>In the next chapter, we will be exploring even more ways to use Listeners.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="Zombies">Zombies Dropping Bones</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Normally, in Minecraft, zombies are the most common hostile mob, and they are also probably the most complicated. For example, they can wear armor and hold items/blocks. They also drop a lot of items. Normally, they drop rotten flesh, and sometimes they drop other items like carrots and potatoes. In this chapter, we will make a new plugin that makes them drop bones as well.</p>
</div>
<div class="sect2">
<h3 id="_create_the_plugin_2">Create the plugin</h3>
<div class="paragraph">
<p>As always, our first step is to create the plugin using Bukkit Recipe. The exact steps to use the recipe are explained in earlier chapters. The information that you enter in the plugin creation will be very similar to <a href="#PlayerEntryExit_Plugin_Details_Image">PlayerEntryExit plugin details</a>. <a href="#ZombieBones_plugin_values">BlockMoney plugin updated values</a> shows the values that needs to be updated.</p>
</div>
<table id="ZombieBones_plugin_values" class="tableblock frame-all grid-all spread">
<caption class="title">Table 2. BlockMoney plugin updated values</caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field</th>
<th class="tableblock halign-left valign-top">Value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Project Name</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ZombieBones</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Package</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">org.devoxx4kids.bukkit.plugins.zombiebones</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Click on `Finish' button to complete the plugin creation and open the project. The expanded directory should look like as shown in <a href="#ZombieBones_Expanded_Directory_Structure">ZombieBones expanded directory structure</a>.</p>
</div>
<div id="ZombieBones_Expanded_Directory_Structure" class="imageblock">
<div class="content">
<img src="images/netbeans-create-plugin-zombie-bones-directory-structure-expanded.png" alt="netbeans create plugin zombie bones directory structure expanded">
</div>
<div class="title">Figure 16. ZombieBones expanded directory structure</div>
</div>
<div class="paragraph">
<p>Notice the initial structure of the plugins created so far is quite similar to the plugins created in earlier chapters. This directory has <code>org.devoxx4kids.bukkit.plugins.zombiebones.MyPlugin</code> class which is the entry point of the plugin, <code>plugin.yml</code> that defines plugin configuration, and <code>pom.xml</code> that defines instructions on how to build and install the plugin.</p>
</div>
</div>
<div class="sect2">
<h3 id="_register_and_create_the_listener_3">Register and create the Listener</h3>
<div class="paragraph">
<p>Now, the plugin needs a Listener. Like Player Entry/Exit and Block Money, add a line in the <code>onEnable()</code> method in <code>MyPlugin.java</code> as shown in <a href="#Registering_ZombieBones_Listener">Registering the ZombieBones Listener</a>. It is similar to the listener registration lines in previous plugins. Remember you need to create empty lines by placing your curson before <code>}</code> and pressing Enter key and then add the code there.</p>
</div>
<div id="Registering_ZombieBones_Listener" class="exampleblock">
<div class="title">Example 18. Registering the ZombieBones Listener</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">getServer()
  .getPluginManager()
  .registerEvents(new BoneListener(),
    this);</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>This line registers the Listener, just like in previous chapters. Note that the name of the Listener is different, to match the purpose of this plugin.</p>
</div>
<div class="paragraph">
<p>Click on the stop sign to show the drop-down menu in <a href="#ZombieBones_Listener_Creation">Creating the ZombieBones Listener</a>. Select the option that says <code>Create class 'BoneListener' in package org.devoxx4kids.bukkit.plugins.zombiebones</code>.</p>
</div>
<div id="ZombieBones_Listener_Creation" class="imageblock">
<div class="content">
<img src="images/netbeans-create-plugin-zombie-bones-create-listener.png" alt="netbeans create plugin zombie bones create listener">
</div>
<div class="title">Figure 17. Creating the ZombieBones Listener</div>
</div>
<div class="paragraph">
<p>NetBeans create a new Java source file, calls it <code>BoneListener.java</code>, opens it in the main window and it should look like as in <a href="#ZombieBones_Listener">ZombieBones Listener</a>.</p>
</div>
<div id="ZombieBones_Listener" class="exampleblock">
<div class="title">Example 19. ZombieBones Listener</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">package org.devoxx4kids.bukkit.plugins.zombiebones;

import org.bukkit.event.Listener;

class BoneListener implements Listener {

    public BoneListener() {
    }

}</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>Note that the constructor does not take any parameters here.</p>
</div>
</div>
<div class="sect2">
<h3 id="_add_event_handlers_3">Add event handlers</h3>
<div class="paragraph">
<p>A listener needs to have an event handler. Since we are dropping bones when a zombie dies, so we will look for an event when the zombie dies. Instead of throwing a specific event for when zombie dies, Bukkit throws an event when an entity dies. This simplifies to catch one event for all entity deaths and then find out which of the entity has died. We&#8217;ll catch that event and then perform the needed action, i.e. drop bones instead of rotten flesh.</p>
</div>
<div class="paragraph">
<p>Only one method will have to be added and it looks like <a href="#Listener_method_for_ZombieBones">Listener method for ZombieBones</a>.</p>
</div>
<div id="Listener_method_for_ZombieBones" class="exampleblock">
<div class="title">Example 20. Listener method for ZombieBones</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">@EventHandler <b class="conum">(1)</b>
public void dropBones(EntityDeathEvent e) {
    if (e.getEntityType() != EntityType.ZOMBIE){ <b class="conum">(2)</b>
        return;
    }
    Location location = e.getEntity().getLocation(); <b class="conum">(3)</b>
    World world = e.getEntity().getWorld(); <b class="conum">(4)</b>

    Random random = new Random(); <b class="conum">(5)</b>
    int howManyBones = random.nextInt(3); <b class="conum">(6)</b>

    world.dropItem(location, new ItemStack(Material.BONE, howManyBones)); <b class="conum">(7)</b>
}</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>This method has some important parts:</p>
</div>
<div class="colist arabic">
<ol>
<li>
<p>As in plugins created so far, <code>@EventHandler</code> marks the method <code>dropBones</code> as listener. The method is called when an entity dies, an event generated by Minecraft server, and is identified by a Bukkit-defined <code>EntityDeathEvent</code> parameter to this method. The parameter <code>e</code> provides information about the died entity such as how much EXP should be dropped from this death, or you can even set this value by calling <code>setDroppedExp</code> method and giving an integer value.</p>
</li>
<li>
<p>This class represents an entity death and it could be pig, sheep, horse, or any other entity. Our purpose is to call this method only when this event is thrown for a zombie. This can be verified by comparing if the entity that throws the event is indeed a zombie.</p>
</li>
<li>
<p>If the entity is indeed a zombie then the method does not stop and continues executing other statements after the <code>return</code> statement. The location, or the x, y, and z coordinates of the entity are stored in <code>location</code> variable. Note that instead of storing the value of x, y, and z coordinates separately, they are stored in <code>Location</code> class. This is another class defined by the Bukkit API.</p>
</li>
<li>
<p>The world in which the entity resides is stored in <code>world</code> variable and defined by Bukkit-defined <code>World</code> class.</p>
</li>
<li>
<p>Lets make this method somewhat more interesting by dropping a random number of bones. This can be achieved by using <code>Random</code> class from Java. A new instance of the class can be created using <code>new Random();</code>.</p>
</li>
<li>
<p>A random number is always generated higher than 0 but an upper limit of 3 can be specified by passing that value in the parentheses after <code>nextInt</code>. This number is used to determine how many bones should be dropped, and so the variable is aptly named <code>howManyBones</code>.</p>
</li>
<li>
<p>The bones are then dropped at zombie&#8217;s location by calling <code>dropItem</code> method and specifyig the previously stored locations and creating a stack of bones using Bukkit-defined <code>ItemStack</code> class.</p>
</li>
</ol>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>You can remove the part that says <code>BONE</code> and press <code>Ctrl + SPACE</code> to show you a list of all the blocks/items the zombie can drop. Scroll through the list until you find the one that you want. Some of the names will be confusing (for example, diamond horse armor is called DIAMOND_BARDING). <a href="#Control_Space_Item_List">List of items from Ctrl + SPACE</a> shows what the list of items looks like. You can also do the same thing for the part that says <code>ZOMBIE</code> if you want a different mob to drop bones.</p>
</div>
</td>
</tr>
</table>
</div>
<div id="Control_Space_Item_List" class="imageblock">
<div class="content">
<img src="images/netbeans-ctrl-space-item-list.png" alt="netbeans ctrl space item list">
</div>
<div class="title">Figure 18. List of items from Ctrl + SPACE</div>
</div>
<div class="paragraph">
<p>Lastly, zombies do rare drops of potato, carrot, and ingot iron. A rare drop usually drops about 2.5% of the time. We will update our method so that zombies drop diamonds 2.5% of the time.</p>
</div>
<div class="paragraph">
<p>To add the rare drop, the code in <a href="#ZombieBones_Listener_Rare_Drop">Rare drops Listener method for ZombieBones</a> must be added to <code>dropBones</code> event handler. Place your cursor at the end of the line <code>world.dropItem(location, new ItemStack(Material.BONE, howManyBones));</code> and press Enter key to make some space to add code. Type or copy the code from <a href="#Listener_method_for_ZombieBones">Listener method for ZombieBones</a> in this newly created space.</p>
</div>
<div id="ZombieBones_Listener_Rare_Drop" class="exampleblock">
<div class="title">Example 21. Rare drops Listener method for ZombieBones</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">if(random.nextInt(200) &lt; 5){ <b class="conum">(1)</b>
    world.dropItem(location, new ItemStack(Material.DIAMOND, 1));
}</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>As earlier, <code>random.nextInt(200)</code> will generate a random number between 0 and 200. <code>&lt;</code> is a predefined Java symbol to compare two integers and returns true if the number on the left hand side is less than the number on the right hand side. In our case, the ``if'' statement checks if the random number is less than 5. If so then a diamond is dropped. 5 out of 200 makes it 2.5% of the times the diamon is dropped.</p>
</div>
<div class="paragraph">
<p>Just like <code>&lt;</code>, <code>&gt;</code> returns true if the left hand side is greater than the right side. Together <code>&lt;</code> and <code>&gt;</code> are part of a group called <em>equality operators</em>.</p>
</div>
<div class="paragraph">
<p>This is all you need to add to make diamonds a rare drop of zombies. Feel free to change diamonn to some other material or change the percentage of time the rare drop is dropped.</p>
</div>
<div class="paragraph">
<p>The finished Listener should look like <a href="#Finished_ZombieBones_Listener">Finished ZombieBones Listener</a>.</p>
</div>
<div id="Finished_ZombieBones_Listener" class="exampleblock">
<div class="title">Example 22. Finished ZombieBones Listener</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">package org.devoxx4kids.bukkit.plugins.zombiebones;

import java.util.Random;
import org.bukkit.Location;
import org.bukkit.Material;
import org.bukkit.World;
import org.bukkit.entity.EntityType;
import org.bukkit.event.EventHandler;
import org.bukkit.event.Listener;
import org.bukkit.event.entity.EntityDeathEvent;
import org.bukkit.inventory.ItemStack;

class BoneListener implements Listener {

    public BoneListener() {
    }

    @EventHandler
    public void dropBones(EntityDeathEvent e) {
        if(e.getEntityType() != EntityType.ZOMBIE){
            return;
        }
        Location location = e.getEntity().getLocation();
        World world = e.getEntity().getWorld();

        Random random = new Random();
        int i = random.nextInt(3);

        world.dropItem(location, new ItemStack(Material.BONE, i));
        if(random.nextInt(200) &lt; 5){
            world.dropItem(location, new ItemStack(Material.DIAMOND, 1));
        }
    }
}</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>Wow, that&#8217;s a lot of code! Feel free to take some time and reread the sections if any portion is not clear.</p>
</div>
</div>
<div class="sect2">
<h3 id="_install_and_verify_2">Install and verify</h3>
<div class="paragraph">
<p>Like the other plugins, you will have to build the plugin by clicking on `Build' menu item before it can be used. If it successfully builds, it should output the message in <a href="#Building_ZombieBones">Building the ZombieBones plugin</a>.</p>
</div>
<div id="Building_ZombieBones" class="exampleblock">
<div class="title">Example 23. Building the ZombieBones plugin</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-text" data-lang="text">[antrun:run]
Executing tasks
     [copy] Copying 1 file to C:\Users\Aditya\Desktop\craftbukkit\plugins
Executed tasks
------------------------------------------------------------------------
BUILD SUCCESS
------------------------------------------------------------------------</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>Now, whenever you see a zombie and need some bones, you can kill it and get some! <a href="#Zombie_Dropping_Bones">Zombie dropping a bone</a> shows a red-colored zombie dead on the floor. The white thing in the middle of the image is a bone that was dropped by the zombie.</p>
</div>
<div id="Zombie_Dropping_Bones" class="imageblock">
<div class="content">
<img src="images/netbeans-create-plugin-zombie-bones-kill-zombie.png" alt="netbeans create plugin zombie bones kill zombie">
</div>
<div class="title">Figure 19. Zombie dropping a bone</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
Sometimes, the zombie will drop ``ghost items'', which are items that cannot be picked up. If all of the dropped items are ghost items, you will just have to spawn and kill another zombie.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><a href="#Zombie_Dropping_Diamonds">Zombie dropping a diamond</a> shows a zombie dropping diamonds as its rare drop.</p>
</div>
<div id="Zombie_Dropping_Diamonds" class="imageblock">
<div class="content">
<img src="images/zombie-rare-drop.png" alt="zombie rare drop">
</div>
<div class="title">Figure 20. Zombie dropping a diamond</div>
</div>
</div>
<div class="sect2">
<h3 id="_summary_3">Summary</h3>
<div class="paragraph">
<p>In this chapter, we explored example of another Event Handler. <code>EntityDeathEvent</code> was used to make zombies drop bones instead of rotten flesh. We also learned some basic Java concepts such as stopping sequential execution of a method using return, random number generation, and comparing two values for less than or greater than using equality operators.</p>
</div>
<div class="paragraph">
<p>In the next chapter, you will see more examples of Listeners by making a plugin that enlarges TNT explosions.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="More_Listeners">Bigger TNT Explosions</h2>
<div class="sectionbody">
<div class="paragraph">
<p>TNT is a block in Minecraft and can be lit with a Flint and Steel item. There are multiple other ways to light it as well. However once lit, it will then explode after 4 seconds. Normally, TNT has a blast radius of 4 blocks, which isn&#8217;t that big. Bigger TNT explosions are more fun and so we will change that and make the explosions bigger. One cool thing you can do with TNT is to make cannons that shoot lit TNT for far distances.</p>
</div>
<div class="paragraph">
<p>As in previous chapters, we&#8217;ll be using Listeners and Event Handlers to achieve this functionality.</p>
</div>
<div class="sect2">
<h3 id="_create_the_plugin_3">Create the plugin</h3>
<div class="paragraph">
<p>After making a few plugins, you should now be an expert in how to get started with creating a sample plugin. So, as always, we start with the Bukkit Recipe. The information that you enter in the plugin creation, once again, will be very similar to <a href="#PlayerEntryExit_Plugin_Details_Image">PlayerEntryExit plugin details</a>. <a href="#BiggerTNT_plugin_values">BiggerTNT plugin updated values</a> shows the values that needs to be updated.</p>
</div>
<table id="BiggerTNT_plugin_values" class="tableblock frame-all grid-all spread">
<caption class="title">Table 3. BiggerTNT plugin updated values</caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field</th>
<th class="tableblock halign-left valign-top">Value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Project Name</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">BiggerTNTExplosions</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Package</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">org.devoxx4kids.bukkit.plugins.biggertnt</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Click on `Finish' button to complete the plugin creation and open the project. The expanded directory should look like as shown in <a href="#BiggerTNT_Directory_Structure_Expanded">BiggetxrTNT expanded directory structure</a>.</p>
</div>
<div id="BiggerTNT_Directory_Structure_Expanded" class="imageblock">
<div class="content">
<img src="images/netbeans-create-plugin-biggertnt-directory-structure-expanded.png" alt="netbeans create plugin biggertnt directory structure expanded">
</div>
<div class="title">Figure 21. BiggetxrTNT expanded directory structure</div>
</div>
<div class="paragraph">
<p>This directory has <code>org.devoxx4kids.bukkit.plugins.biggertnt.MyPlugin</code> class which is the entry point of the plugin, <code>plugin.yml</code> that defines plugin configuration, and <code>pom.xml</code> that defines instructions on how to build and install the plugin.</p>
</div>
</div>
<div class="sect2">
<h3 id="_create_the_listener">Create the Listener</h3>
<div class="paragraph">
<p>As in previous chapters, the plugin needs a listener where event handlers can be registered. Add the line from <a href="#BiggerTNT_Register_Listener">Registering the BiggerTNT Listener</a> in the <code>onEnable</code> method of <code>MyPlugin.java</code>.</p>
</div>
<div class="paragraph">
<p>Remember you need to create space before this code can be added by placing your curson at the right place and pressing Enter keys.</p>
</div>
<div id="BiggerTNT_Register_Listener" class="exampleblock">
<div class="title">Example 24. Registering the BiggerTNT Listener</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">getServer()
  .getPluginManager()
  .registerEvents(new TNTListener(),
    this);</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>This code registers the <code>TNTListener</code> class as the plugin&#8217;s Listener. Notice that the name of the Listener is different, to match the purpose of this plugin.</p>
</div>
<div class="paragraph">
<p>Click on the stop sign and select the option shown in <a href="#Creating_TNTListener_from_dropdown_menu">Creating the TNTListener from the drop-down menu</a>.</p>
</div>
<div id="Creating_TNTListener_from_dropdown_menu" class="imageblock">
<div class="content">
<img src="images/netbeans-create-plugin-biggertnt-create-listener.png" alt="netbeans create plugin biggertnt create listener">
</div>
<div class="title">Figure 22. Creating the TNTListener from the drop-down menu</div>
</div>
<div class="paragraph">
<p>This will generate a new Java source file TNTListener.java and opens it in main window of NetBeans.</p>
</div>
</div>
<div class="sect2">
<h3 id="_add_event_handlers_4">Add event handlers</h3>
<div class="paragraph">
<p>The server generates an event when an entity explodes. This entity could be a creeper, a primed TNT, an ender crystal, or any other entity that can explode. Our event handler will listen for this event, check if the entity causing the event is a TNT, and then cause an explosion with the bigger radus.</p>
</div>
<div class="paragraph">
<p>Lets add the method shown in <a href="#BiggerTNT_Listener_Method">BiggerTNT Listener method</a> to the Listener.</p>
</div>
<div id="BiggerTNT_Listener_Method" class="exampleblock">
<div class="title">Example 25. BiggerTNT Listener method</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">@EventHandler
public void makeExplosion(EntityExplodeEvent event) { <b class="conum">(1)</b>
    World world = event.getEntity().getWorld(); <b class="conum">(2)</b>
    Location location = event.getEntity().getLocation();

    float power = 16.0F; <b class="conum">(3)</b>
    if (event.getEntityType() == EntityType.PRIMED_TNT) { <b class="conum">(4)</b>
        event.setCancelled(true);
        world.createExplosion(location, power);
    }
}</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>There are some important parts in this method:</p>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Server generated event is represented by <code>EntityExplodeEvent</code> Bukkit class and specified as the method parameter here. The parameter name, <code>event</code>, provides more information about the explosion such as list of blocks that would have been removed or were removed from the explosion, location where the explosion happened, and percentage of blocks to drop from this explosion.</p>
</li>
<li>
<p>Entity&#8217;s world is retrieved by calling <code>event.getEntity().getWorld()</code> method and stored in <code>world</code> variable. Entity&#8217;s current location is stored in <code>location</code> variable.</p>
</li>
<li>
<p>A float variable with a value of 16.0 is created here. It is called <code>power</code> and will be used to determine how big the TNT explosion is. If you set it to a value over 16, it will make an explosion with a 16 block radius, because that is the limit defined in the game&#8217;s source code.</p>
</li>
<li>
<p>Check if the entity that caused the explosion is a primed TNT. <code>EntityType.PRIMED_TNT</code> is a predefined Bukkit class and the values are compared using <code>==</code> operator. If it is then its current explosion is cancelled by calling <code>setCancelled</code> method on the <code>event</code> variable. This is required so that a bigger TNT explosion of our desired choice can be made to happen. Finally a bigger explosion, with the power of the variable <code>power</code>, is created at the same location.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_install_and_verify_3">Install and verify</h3>
<div class="paragraph">
<p>Now, the plugin must be built so that you can install it on your server. Right-click on the plugin and select ``Build''. The output that you get should look like <a href="#BiggerTNT_Build_Output">BiggerTNT build output</a>.</p>
</div>
<div id="BiggerTNT_Build_Output" class="exampleblock">
<div class="title">Example 26. BiggerTNT build output</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-text" data-lang="text">[antrun:run]
Executing tasks
     [copy] Copying 1 file to C:\Users\Aditya\Desktop\craftbukkit\plugins
Executed tasks
------------------------------------------------------------------------
BUILD SUCCESS
------------------------------------------------------------------------</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>Lets try out this new plugin.</p>
</div>
<div class="paragraph">
<p>Place a TNT somewhere in the game, light it up with a Flint and Steel and move away from it. The explosion will now have a blast radius of 16 blocks. <a href="#BiggerTNT_Explosions">Comparison of TNT explosion sizes</a> compares the size of a normal explosion to a enlarged one.</p>
</div>
<div id="BiggerTNT_Explosions" class="imageblock">
<div class="content">
<img src="images/netbeans-create-plugin-biggertnt-explosion-sizes.png" alt="netbeans create plugin biggertnt explosion sizes">
</div>
<div class="title">Figure 23. Comparison of TNT explosion sizes</div>
</div>
<div class="paragraph">
<p>The areas that are not green have been blown up. The small explosion didn&#8217;t reach to stone, so the crater is brown from dirt. The big explosion&#8217;s crater is gray because it contains stone. The big crater also contains other blocks you can find under the stone, like ores and gravel.</p>
</div>
</div>
<div class="sect2">
<h3 id="_summary_4">Summary</h3>
<div class="paragraph">
<p>This chapter explained another Event Handler to cause bigger TNT explosions. <code>EntityExplodeEvent</code> was used to listen for an entity explosion, checked if the explosion is caused by a primed TNT, and then a bigger explosion was caused in place of the current smaller explosion.</p>
</div>
<div class="paragraph">
<p>Refer to <a href="#Bukkit_documentation">Bukkit documentation</a> on how to read Bukkit documentation. A complete list of all the classes that represent events generated by the server is listed there.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="Flaming_Pigs">Flaming Pigs</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Have you ever wanted to add new commands to Minecraft? With Bukkit, you can do that. In this chapter, we will learn how to add new commands to the game.</p>
</div>
<div class="paragraph">
<p>In Minecraft, pigs aren&#8217;t normally on fire. The only way to ignite them is to push them into a fire block or into lava. This plugin will add a command that lets you spawn whatever number of pigs you want and also sets them on fire. It isn&#8217;t really very useful, just funny to see a bunch of pigs on fire. And isnt&#8217;t that what the entire game of Minecraft is about ?</p>
</div>
<div class="sect2">
<h3 id="_create_the_plugin_4">Create the plugin</h3>
<div class="paragraph">
<p>If you&#8217;ve followed the previous chapters, you exactly know how to get started. Yep, we&#8217;ll use Bukkit Recipe to create this plugin. The information for plugin creation is quite similar to <a href="#PlayerEntryExit_Plugin_Details_Image">PlayerEntryExit plugin details</a>. <a href="#FlamingPigs_plugin_values">FlamingPigs plugin updated values</a> shows the values that needs to be updated.</p>
</div>
<table id="FlamingPigs_plugin_values" class="tableblock frame-all grid-all spread">
<caption class="title">Table 4. FlamingPigs plugin updated values</caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field</th>
<th class="tableblock halign-left valign-top">Value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Project Name</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">FlamingPigs</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Package</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">org.devoxx4kids.bukkit.plugins.flamingpigs</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Click on `Finish' button to complete the plugin creation and open the project. The expanded directory should look like as shown in <a href="#FlamingPigs_Expanded_Directory_Structure">FlamingPigs expanded directory structure</a>.</p>
</div>
<div id="FlamingPigs_Expanded_Directory_Structure" class="imageblock">
<div class="content">
<img src="images/netbeans-create-plugin-flaming-pigs-directory-structure-expanded.png" alt="netbeans create plugin flaming pigs directory structure expanded">
</div>
<div class="title">Figure 24. FlamingPigs expanded directory structure</div>
</div>
<div class="paragraph">
<p>Like other plugins, the initial structure of the project is quite similar. This directory has <code>org.devoxx4kids.bukkit.plugins.flamingpigs.MyPlugin</code> class which is the entry point of the plugin, <code>plugin.yml</code> that defines plugin configuration and will be used in this plugin, and <code>pom.xml</code> that defines instructions on how to build and install the plugin.</p>
</div>
</div>
<div class="sect2">
<h3 id="_register_the_command">Register the command</h3>
<div class="paragraph">
<p>New commands are not registered in a Listener. Instead, they need to be registered in <code>plugin.yml</code> which ensures that Bukkit can tell Minecraft about the new command. The actual action of the command needs to be defined in <code>MyPlugin.java</code>.</p>
</div>
<div class="paragraph">
<p>First, we will register the command in <code>plugin.yml</code>. Click on the file and it opens up in the main window of NetBeans. The file should currently look like <a href="#FlamingPigs_plugin_yml">FlamingPigs plugin.yml</a>.</p>
</div>
<div id="FlamingPigs_plugin_yml" class="exampleblock">
<div class="title">Example 27. FlamingPigs plugin.yml</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">name: FlamingPigs
version: "1.0-SNAPSHOT"
author: Aditya Gupta
main: org.devoxx4kids.bukkit.plugins.flamingpigs.MyPlugin</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>The code you will have to add is pretty simple. It looks like <a href="#FlamingPigs_Registering_Command">Register the flamingpigs command</a>, and should be added at the end of the file. For that, place your cursor at the last line of the file and press Enter key to create a new line. Type the code shown below below there.</p>
</div>
<div id="FlamingPigs_Registering_Command" class="exampleblock">
<div class="title">Example 28. Register the flamingpigs command</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">commands: <b class="conum">(1)</b>
  flamingpigs: <b class="conum">(2)</b>
    description: spawn a certain number of flaming pigs where you are, which are on fire for 30 seconds. <b class="conum">(3)</b>
    usage: /flamingpigs &lt;number of pigs&gt;
    aliases: fp</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>Make sure that the code is indented as shown.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>YAML is a simple, easy to understand language used commonly to define configuration files. It uses spaces and indents to categorize different items.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>There are a few important things in this file:</p>
</div>
<div class="colist arabic">
<ol>
<li>
<p><code>commands:</code> tells you that everything under it is a command. One or more commands can be registered here.</p>
</li>
<li>
<p><code>flamingpigs:</code> registers a command under the name of <code>/flamingpigs''. Each new command is indented 2 spaces to the right from <code>commands:</code> line. The </code>/'' is automatically added to the beginning of the command name.</p>
</li>
<li>
<p>A text description of what the command does, how it should be used, and aliases of the command are set here. Aliases registers other commands, typically short cuts, that will do the same thing as the original command. Think of it as just another name for this command. So the user can issue the command <code>/flamingpigs</code> or a short cut name <code>/fp</code> to invoke this command.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Your <code>plugin.yml</code> file should now look like <a href="#FlamingPigs_Finished_plugin_yml">Finished plugin.yml</a>.</p>
</div>
<div id="FlamingPigs_Finished_plugin_yml" class="exampleblock">
<div class="title">Example 29. Finished plugin.yml</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">name: FlamingPigs
version: "1.0-SNAPSHOT"
author: Aditya Gupta
main: org.devoxx4kids.bukkit.plugins.flamingpigs.MyPlugin
commands: <b class="conum">(1)</b>
  flamingpigs:
    description: spawn a certain number of flaming pigs where you are, which are on fire for 30 seconds.
    usage: /flamingpigs &amp;lt;number of pigs&amp;gt;
    aliases: fp</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>The newly added code is highlighted in bold. This ensures that when your plugin is installed then your new command will be registered with Minecraft.</p>
</div>
</div>
<div class="sect2">
<h3 id="_add_command_functionality">Add command functionality</h3>
<div class="paragraph">
<p>Now your command is ready to be registered, but it doesn&#8217;t do anything. This functionality needs be added in <code>MyPlugin.java</code> so that the command functions properly.</p>
</div>
<div class="paragraph">
<p>Place your cursor after the first <code>}</code> after <code>onDisable</code> method in <code>MyPlugin.java</code>. Press Enter key couple of times to create space for adding a new method and add the method in <a href="#FlamingPigs_onCommand_Method">FlamingPigs onCommand method</a> there.</p>
</div>
<div id="FlamingPigs_onCommand_Method" class="exampleblock">
<div class="title">Example 30. FlamingPigs onCommand method</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">@Override
public boolean onCommand(CommandSender sender, <b class="conum">(1)</b>
                         Command cmd,
                         String label,
                         String[] args) {
    if (!cmd.getName().equals("flamingpigs")) { <b class="conum">(2)</b>
    	return false;
    }
    if (!(sender instanceof Player)) { <b class="conum">(3)</b>
        return false;
    }

    if (args.length != 1) { <b class="conum">(4)</b>
        sender.sendMessage(ChatColor.DARK_RED + cmd.getUsage());
        return false;
    }

    Location location = ((Player) sender).getLocation(); <b class="conum">(5)</b>

    int numberOfPigs;

    try { <b class="conum">(6)</b>
        numberOfPigs = Integer.parseInt(args[0]);
    } catch (NumberFormatException nfe){
        sender.sendMessage(ChatColor.RED + args[0] +
            ChatColor.DARK_RED + " is not a valid number!");
        return false;
    }

    for(int i = 0; i &lt; numberOfPigs; i++){ <b class="conum">(7)</b>
        Entity pig = ((Player) sender).getWorld()
            .spawnEntity(location, EntityType.PIG);
        pig.setFireTicks(6000);
    }
    return true; <b class="conum">(8)</b>
}</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>This method uses many Java concepts, and there are many important things in it:</p>
</div>
<div class="colist arabic">
<ol>
<li>
<p>The method <code>onCommand</code> is called by Bukkit whenever a command is issued in Minecraft. Bukkit also provides information about the command such as which player issued this command, the actual command that is being issued, alias of the command, and if any arguments were passed. All of this information is available in four parameters of this method.</p>
</li>
<li>
<p><code>equals()</code> is a predefined Java method that compares two String values. It returns true if the two values are equal, false otherwise. It is strongly recommended to use <code>equals()</code> method instead of <code>==</code> to compare string values.</p>
</li>
<li>
<p>Commands may be issued at console. However this command is valid only if the command is issued by a player because we need the exact location where the pigs need to be spawned. <code>instanceof</code> is another Java keyword that returns true if the left hand side of this keyword is not of the type defined by right hand side. This method returns false again if the command is not issued by a player. And like previous statement, no further statements are executed.</p>
</li>
<li>
<p>The arguments to the command are passed as an <em>array</em> of String. Arrays is a Java concept that stores multiple elements of the same type together. The <code>[]</code> after the type indicates this is an array, an array of String in this case. Each element of the array can be accessed using an <em>index</em>, starting from 0. So the first element is at 0th index, second element is at 1st index, and so on. The number of elements in the array can be found out by invoking <code>length</code> operator.</p>
</li>
<li>
<p>Command sender is confirmed to be a player by the time this piece of the code is reached. Java has the concept of <em>type casting</em> that allows a class to be defined to be of a different type, if the rules permit. We will not explain the rules here but lets say the <code>CommandSender</code> can be <em>casted</em> to <code>Player</code> in this case. Once that is done, we can invoke any methods from the <code>Player</code>. In this case specifically we can get the location of the player by calling <code>getLocation()</code> method and store it in the <code>location</code> variable.</p>
</li>
<li>
<p>Its normal for errors to occur when a user input is required. For example the user may accidentally type alphabets or punctuation characters when numbers are required. Java provides a very sophisticated mechanism to deal with such errors and even recover gracefully. This process is called as <em>exception handling</em>. A piece of code that is likely to generate an error is put inside a <em>try</em> block. This code may generate an error, or <em>throw an exception</em>. The exception is then <em>caught</em> using a <em>catch</em> block. Name of the exception is specified in the catch block. So the try and catch blocks together provides error handling within Java.</p>
</li>
<li>
<p>Java provides a means to repeat a certain piece of code one or more times easily. The number of times the code needs to be repeated can be a predefined number or until a condition is met. This is achieved using <em>loops</em>. Each repetition of the code is called as an <em>iteration</em>.</p>
</li>
<li>
<p>Finally a <code>true</code> value is returned by the method to signify that everything worked.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Finished <code>MyPlugin.java</code> should look like <a href="#FlamingPigs_Finished_MyPlugin_java">Finished MyPlugin.java</a></p>
</div>
<div id="FlamingPigs_Finished_MyPlugin_java" class="exampleblock">
<div class="title">Example 31. Finished MyPlugin.java</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">package org.devoxx4kids.bukkit.plugins.flamingpigs;</code></pre>
</div>
</div>
<div class="paragraph">
<p>import java.util.logging.Level;
import org.bukkit.ChatColor;
import org.bukkit.Location;
import org.bukkit.command.Command;
import org.bukkit.command.CommandSender;
import org.bukkit.entity.Entity;
import org.bukkit.entity.EntityType;
import org.bukkit.entity.Player;
import org.bukkit.plugin.java.JavaPlugin;</p>
</div>
<div class="paragraph">
<p>public class MyPlugin extends JavaPlugin {</p>
</div>
<div class="literalblock">
<div class="content">
<pre>// This code is called after the server starts and after the /reload command
@Override
public void onEnable() {
    getLogger().log(Level.INFO, "{0}.onEnable()",
        this.getClass().getName());
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>// This code is called before the server stops and after the /reload command
@Override
public void onDisable() {
    getLogger().log(Level.INFO, "{0}.onDisable()",
        this.getClass().getName());
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>@Override
public boolean onCommand(CommandSender sender, Command cmd, String label, String[] args) {
    if (!(cmd.getName().equals("flamingpigs"))) { <b class="conum">(1)</b>
        return false;
    }</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>if (!(sender instanceof Player)) { <b class="conum">(2)</b>
    return false;
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>Location location = ((Player) sender).getLocation(); <b class="conum">(3)</b></pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>if (args.length != 1) { <b class="conum">(4)</b>
    sender.sendMessage(ChatColor.DARK_RED + cmd.getUsage());
    return false;
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>int numberOfPigs; <b class="conum">(5)</b></pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>try{ <b class="conum">(6)</b>
    numberOfPigs = Integer.parseInt(args[0]);
} catch (NumberFormatException nfe){
    sender.sendMessage(ChatColor.RED + args[1] +
        ChatColor.DARK_RED + " is not a valid number!");
    return false;
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>        for (int i = 0; i &amp;lt; numberOfPigs; i++) { <b class="conum">(7)</b>
            Entity pig = ((Player) sender).getWorld() <b class="conum">(8)</b>
                .spawnEntity(location, EntityType.PIG);
            pig.setFireTicks(6000);
        }
        return true; <b class="conum">(9)</b>
    }
}</pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_install_and_verify_4">Install and verify</h3>
<div class="paragraph">
<p>Like the other plugins, you will have to build the plugin before it can be used. If it successfully builds, it should output the message in <a href="#Building_FlamingPigs">Building the FlamingPigs plugin</a>.</p>
</div>
<div id="Building_FlamingPigs" class="exampleblock">
<div class="title">Example 32. Building the FlamingPigs plugin</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-text" data-lang="text">[antrun:run]
Executing tasks
     [copy] Copying 1 file to C:\Users\Aditya\Desktop\craftbukkit\plugins
Executed tasks
------------------------------------------------------------------------
BUILD SUCCESS
------------------------------------------------------------------------</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>Restart your server and try out the new command! In your chat window, give the command as shown in <a href="#FlamingPigs_Command">FlamingPigs command</a></p>
</div>
<div id="FlamingPigs_Command" class="exampleblock">
<div class="title">Example 33. FlamingPigs command</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-text" data-lang="text">/flamingpigs 10</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>This should spawn 10 pigs at your current location and set them on fire. Since they are on fire, they will die in a few seconds.</p>
</div>
<div class="paragraph">
<p>Try with a larger number of pigs, say 100, and see how it works. Try the command alias. So instead of <a href="#FlamingPigs_Command">FlamingPigs command</a>, use <a href="#FlamingPigs_Command_alias">FlamingPigs command alias</a>.</p>
</div>
<div id="FlamingPigs_Command_alias" class="exampleblock">
<div class="title">Example 34. FlamingPigs command alias</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-text" data-lang="text">/fp 10</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>If you spawn pigs on the ground, they probably look something like <a href="#FlamingPigs">Flaming pigs</a>.</p>
</div>
<div id="FlamingPigs" class="imageblock">
<div class="content">
<img src="images/flaming-pigs.png" alt="flaming pigs">
</div>
<div class="title">Figure 25. Flaming pigs</div>
</div>
<div class="paragraph">
<p>Also try giving a command that does not include a number as shown in <a href="#FlamingPigs_Command_incorrect_number">FlamingPigs command with incorrect number</a>.</p>
</div>
<div id="FlamingPigs_Command_incorrect_number" class="exampleblock">
<div class="title">Example 35. FlamingPigs command with incorrect number</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-text" data-lang="text">/flamingpigs bob</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>This should generate a chat message in dark red color indicating that <code>bob</code> is not a number.</p>
</div>
<div class="paragraph">
<p>One fun thing you can do with it is fly up into the air about 10 blocks and type in the command in <a href="#FlamingPigs_Command">FlamingPigs command</a>.</p>
</div>
<div class="paragraph">
<p>200 pigs will drop down and they will take damage from falling. When they drop, they will spread out. Since they are on fire, they will die in a few seconds. When they die, the particles created from their deaths will make a <code>cloud''. <a href="#FlamingPigs_Cloud">FlamingPigs cloud</a> shows a picture of the </code>cloud''.</p>
</div>
<div id="FlamingPigs_Cloud" class="imageblock">
<div class="content">
<img src="images/flaming-pigs-cloud.png" alt="flaming pigs cloud">
</div>
<div class="title">Figure 26. FlamingPigs cloud</div>
</div>
</div>
<div class="sect2">
<h3 id="_summary_5">Summary</h3>
<div class="paragraph">
<p>This chapter taught you how to add new commands to the game using <code>plugin.yml</code> and <code>onCommand()</code> method of <code>Plugin.java</code>. You added a plugin that spawned any number of flaming pigs at player&#8217;s current location.</p>
</div>
<div class="paragraph">
<p>Several Java concepts like comparing two string values, arrays, return values, error handling using try/catch blocks, and for loops were explained as well.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="Throw_Egg">Throw Egg</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This chapter will build upon the previous chapter and show how commands and Listeners can work together.</p>
</div>
<div class="paragraph">
<p>When you right-click with an egg item, it gets thrown, and on landing, it has a 12.5% chance of spawning a baby chicken. This plugin will add a command that controls what spawns when the egg lands. So instead of chickens, it could spawn zombies, pigs, or whatever you want it to. You can also configure how many of that mob will be spawned.</p>
</div>
<div class="sect2">
<h3 id="_create_the_plugin_5">Create the plugin</h3>
<div class="paragraph">
<p>First of all, like all other plugins, use the Bukkit Recipe to create a new plugin. The information for plugin creation is quite similar to <a href="#PlayerEntryExit_Plugin_Details_Image">PlayerEntryExit plugin details</a>. <a href="#ThrowEgg_plugin_values">ThrowEgg plugin updated values</a> shows the values that needs to be updated.</p>
</div>
<table id="ThrowEgg_plugin_values" class="tableblock frame-all grid-all spread">
<caption class="title">Table 5. ThrowEgg plugin updated values</caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field</th>
<th class="tableblock halign-left valign-top">Value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Project Name</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ThrowEgg</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Package</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">org.devoxx4kids.bukkit.plugins.throwegg</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Click on `Finish' button to complete the plugin creation and open the project. The expanded directory should look like as shown in <a href="#ThrowEgg_Expanded_Directory_Structure">ThrowEgg expanded directory structure</a>.</p>
</div>
<div id="ThrowEgg_Expanded_Directory_Structure" class="imageblock">
<div class="content">
<img src="images/netbeans-create-plugin-throw-egg-directory-structure-expanded.png" alt="netbeans create plugin throw egg directory structure expanded">
</div>
<div class="title">Figure 27. ThrowEgg expanded directory structure</div>
</div>
<div class="paragraph">
<p>Like other plugins created so far, there is <code>org.devoxx4kids.bukkit.plugins.flamingpigs.MyPlugin</code> class, <code>plugin.yml</code> that defines plugin configuration and used for command registration, and <code>pom.xml</code> that defines instructions on how to build and install the plugin.</p>
</div>
</div>
<div class="sect2">
<h3 id="_register_the_command_2">Register the command</h3>
<div class="paragraph">
<p>Like the last plugin, you will need to register a new command in <code>plugin.yml</code>. The updated <code>plugin.yml</code> file should look like <a href="#ThrowEgg_Finished_plugin_yml">[ThrowEgg_Finished_plugin_yml]</a>.</p>
</div>
<div id="ThrowEgg_plugin_yml" class="exampleblock">
<div class="title">Example 36. ThrowEgg plugin.yml</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">name: ThrowEgg
version: "1.0-SNAPSHOT"
author: Aditya Gupta
main: org.devoxx4kids.bukkit.plugins.throwegg.MyPlugin
commands:
  &lt;emphasis role="strong"&gt;eggconfig:
    description: control what hatches from an egg and how many of it.
    usage: /eggconfig &amp;lt;entity to hatch&amp;gt; &amp;lt;number of entities to hatch&amp;gt;
    aliases: ec</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>The file is very similar to the one shown in <a href="#FlamingPigs_Finished_plugin_yml">Finished plugin.yml</a>. The updated sections are highlighted in bold.</p>
</div>
<div class="paragraph">
<p>A new command <code>eggconfig</code> is added with an alias <code>ec</code>. The command requires two arguments, first is the entity to hatch and second is the number of entities to hatch. Other properties are intuitively named and explained in <a href="#Flaming_Pigs">Flaming Pigs</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_add_command_functionality_2">Add command functionality</h3>
<div class="paragraph">
<p>Now, like the last plugin, the command is registered, but doesn&#8217;t do anything. Functionality will have to be added in <code>MyPlugin.java</code>.</p>
</div>
<div class="paragraph">
<p>First of all, a couple of variables are defined to store the entity type and the number of entities to hatch from the command. These variables are shown in <a href="#ThrowEgg_Variables_To_Add">Variables to add in ThrowEgg MyPlugin.java</a></p>
</div>
<div id="ThrowEgg_Variables_To_Add" class="exampleblock">
<div class="title">Example 37. Variables to add in ThrowEgg MyPlugin.java</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">public static EntityType entityType; <b class="conum">(1)</b>
public static int numberOfEntities; <b class="conum">(2)</b></code></pre>
</div>
</div>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>This variable stores an <code>EntityType</code> type, which is a type defined by Bukkit and is used to identify the entity type specified in the command. It is used in methods that spawn entities to determine what entity should be spawned.</p>
</li>
<li>
<p><code>numberOfEntities</code> is an integer variable that will store the number of entities that should be spawned.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>These variables do not have any use right now, so code will have to be added to use them. This code is shown in <a href="#ThrowEgg_Command_Method">ThrowEgg command method</a> and should be added as the last method in the file. If you recall, this can be easily done by placing your cursor after the first <code>}</code> after <code>onDisable</code> method in <code>MyPlugin.java</code>. Press Enter key to create space add this method there.</p>
</div>
<div id="ThrowEgg_Command_Method" class="exampleblock">
<div class="title">Example 38. ThrowEgg command method</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">@Override
public boolean onCommand(CommandSender sender,
                         Command cmd,
                         String label,
                         String[] args) {

    if (!(cmd.getName().equals("eggconfig"))) { <b class="conum">(1)</b>
        return false;
    }
    if (args.length != 2) { <b class="conum">(2)</b>
        sender.sendMessage(ChatColor.DARK_RED + cmd.getUsage());
        return false;
    }

    try{ <b class="conum">(3)</b>
        entityType = EntityType.valueOf(args[0]
                                        .toString()
                                        .toUpperCase());
    } catch (NullPointerException npe){
        sender.sendMessage(ChatColor.RED +
            entityType.toString() + ChatColor.DARK_RED +
            " is not a valid entity!");
        return false;
    }

    try{ <b class="conum">(4)</b>
        numberOfEntities = Integer.parseInt(args[1]);
    } catch (NumberFormatException nfe){
        sender.sendMessage(ChatColor.RED + args[1]
            + ChatColor.DARK_RED + " is not a valid number!");
        return false;
    }

    sender.sendMessage(ChatColor.GREEN + "Eggs will now hatch " <b class="conum">(5)</b>
        + numberOfEntities + " " + entityType + "(s).");

    return true; <b class="conum">(6)</b>
}</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>This code is quite similar to the one shown in <a href="#Flaming_Pigs">Flaming Pigs</a> but has a few differences:</p>
</div>
<div class="colist arabic">
<ol>
<li>
<p>If the command is not <code>eggconfig</code> or one of its aliases, this method will return false and stop running any further.</p>
</li>
<li>
<p>The method will also stop running if the number of arguments is not two. The first argument is the entity type and second argument denotes the number of entities to hatch.</p>
</li>
<li>
<p><code>toUpperCase()</code> is a method on Java-defined String class that converts the first argument to all upper case letters. Note that the first argument is identified by 0th element of the array. This conversion is required as <code>EntityType</code> stores all Minecraft defined entities in upper case letters.</p>
</li>
<li>
<p>Second element of the <code>args</code> array, indexed by 1, is then converted to integer. As discussed in the previous chapter, <code>NumberFormatException</code> is a Java defined class and is used to catch any exception if the string can not be parsed into an integer. If the conversion is sucessful then the <code>numberOfEntites</code> variable is set to the number of entities to spawn. If the value is invalid and the conversion is not successful, then the player is notified of that and the method stops running any further.</p>
</li>
<li>
<p>If everything looks good then the player is sent a message indicating the entity and the number of entities to spawn.</p>
</li>
<li>
<p>Finally, the method will return a value of true to indicate that the command execution is successful.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Now, the command sets the variables to whatever the player inputs. The variables' values still are not used anywhere, so a Listener will have to be added. The Listener will check for a chicken being hatched from an egg and change the chicken to the entity in <code>entityType</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_register_and_create_the_listener_4">Register and create the Listener</h3>
<div class="paragraph">
<p>In <code>MyPlugin.java</code>, add a line in the <code>onEnable()</code> method that looks like <a href="#ThrowEgg_Register_Listener">Register the ThrowEgg Listener</a> to register the Listener.</p>
</div>
<div class="paragraph">
<p>Remember you need to create empty lines by placing your curson before <code>}</code> and pressing Enter key and then add the code there.</p>
</div>
<div id="ThrowEgg_Register_Listener" class="exampleblock">
<div class="title">Example 39. Register the ThrowEgg Listener</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">getServer().getPluginManager()
    .registerEvents(new EggListener(),
      this);</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>Click on the stop sign next to this line and select the option shown in <a href="#ThrowEgg_Create_Listener">Create the ThrowEgg Listener</a>.</p>
</div>
<div id="ThrowEgg_Create_Listener" class="imageblock">
<div class="content">
<img src="images/netbeans-create-plugin-throw-egg-create-listener.png" alt="netbeans create plugin throw egg create listener">
</div>
<div class="title">Figure 28. Create the ThrowEgg Listener</div>
</div>
<div class="paragraph">
<p>This will generate a new class <code>EggListener</code> and open it in NetBeans.</p>
</div>
</div>
<div class="sect2">
<h3 id="_add_event_handlers_5">Add event handlers</h3>
<div class="paragraph">
<p>First of all, delete the constructor in the Listener. The constructor looks like <a href="#ThrowEgg_Listener_Constructor">ThrowEgg Listener constructor</a>.</p>
</div>
<div id="ThrowEgg_Listener_Constructor" class="exampleblock">
<div class="title">Example 40. ThrowEgg Listener constructor</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">public EggListener() {
}</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>The code in <a href="#ThrowEgg_Listener_Method">ThrowEgg Listener method</a> will have to be added into the Listener for it to work.</p>
</div>
<div id="ThrowEgg_Listener_Method" class="exampleblock">
<div class="title">Example 41. ThrowEgg Listener method</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">@EventHandler
public void hatchEntity(CreatureSpawnEvent event) { <b class="conum">(1)</b>
    Entity entity = event.getEntity(); <b class="conum">(2)</b>
    Location location = entity.getLocation();
    World world = entity.getWorld();

    if (event.getSpawnReason() == SpawnReason.EGG <b class="conum">(3)</b>
    &amp;&amp; event.getEntityType() == EntityType.CHICKEN) {
        entity.remove(); <b class="conum">(4)</b>
        for (int i = 0 ; i &lt; MyPlugin.numberOfEntities ; i++) {
            world.spawnEntity(location, MyPlugin.entityType);
        }
    }
}</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>This code should look quite familiar if you&#8217;ve worked through the previous chapters. However there are a few important things to explain in this code:</p>
</div>
<div class="colist arabic">
<ol>
<li>
<p>This method is run when a creature is spawned into the world and is identified by <code>CreatureSpawnEvent</code> Bukkit class. In this case, we will be using it to check for a chicken spwaning from a thrown eggs.</p>
</li>
<li>
<p>The entity spawned, its location, and its world are stored in variables called <code>entity</code>, <code>location</code>, and <code>world</code>, respectively.</p>
</li>
<li>
<p>We learned about <code>==</code> operator for comparing values. So the spawn reason for an entity is checked to be an egg by comparing the values returned from <code>event.getSpawnReason()</code> and <code>SpawnReason.EGG</code>. Both of these values are obtained using Bukkit API. Similarly the entity type is checked to be of type chicken. This statement has a new <code>&amp;&amp;</code> operator. It allows to combine two or more boolean statements together and provide a unified result. <code>&amp;&amp;</code> is called as logical AND operator. Another similar operator is <code>||</code> and is called logical OR. The results of these operators on two boolean operands is shown in <a href="#Logical_Operator_Results">Logical operator results</a>.</p>
</li>
<li>
<p>The body of <code>if</code> statement removes the entity from the world by calling <code>entity.remove()</code> Bukkit method. Finally, the <code>for</code> loop is used to spawn the chosen entity, defined by <code>MyPlugin.entityType</code>, at the location of the now dead chicken. The number of iterations is defined by <code>MyPlugin.numberOfEntites</code>.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_install_and_verify_5">Install and verify</h3>
<div class="paragraph">
<p>Now, you can build the plugin and restart your server to install it.  Use the ``/reload'' command to reload the server, then check that it works. Use the command in <a href="#ThrowEgg_Command">ThrowEgg command</a> to change what the egg spawns.</p>
</div>
<div id="ThrowEgg_Command" class="exampleblock">
<div class="title">Example 42. ThrowEgg command</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-text" data-lang="text">/eggconfig &lt;entity type&gt; &lt;number of entities&gt;</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>Try the full command <code>eggconfig</code>, the alias <code>ec</code>, different entities to hatch as defined at <a href="http://jd.bukkit.org/apidocs/org/bukkit/entity/EntityType.html" class="bare">http://jd.bukkit.org/apidocs/org/bukkit/entity/EntityType.html</a>, invalid text for specifying the number and validating that the error message shows correctly.</p>
</div>
<div class="paragraph">
<p>Some fun things you can do are:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Make the egg spawn 100 BAT and make a ``bat cloud''</p>
</li>
<li>
<p>Make the egg spawn 1 PRIMED_TNT and make explosive eggs</p>
</li>
<li>
<p>Make the egg spawn 100 ZOMBIE and make a zombie apocalypse</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>There are lots of fun things you can do with this plugin!</p>
</div>
<div class="paragraph">
<p><a href="#ThrowEgg_Command_Output">ThrowEgg command output</a> shows the output that comes when you do the command.</p>
</div>
<div id="ThrowEgg_Command_Output" class="imageblock">
<div class="content">
<img src="images/netbeans-create-plugin-throw-egg-minecraft-output.png" alt="netbeans create plugin throw egg minecraft output">
</div>
<div class="title">Figure 29. ThrowEgg command output</div>
</div>
<div class="paragraph">
<p>The player set eggs to hatch 5 ZOMBIEs, then 50 BATs, then 17 WITCHes.</p>
</div>
</div>
<div class="sect2">
<h3 id="_summary_6">Summary</h3>
<div class="paragraph">
<p>This chapter built upon the previous chapter by registering a new command in <code>plugin.yml</code>. The command lets you configure what a thrown egg should hatch, and how many of it, when it hits the ground. It utilized both command registration in <code>plugin.yml</code> and a Listener.</p>
</div>
<div class="paragraph">
<p>In the process, the chapter also explained how multiple try/catch blocks can exist in the same method. Two logical operators in Java, <code>&amp;&amp;</code> and <code>||</code> were also explained.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="Sponge">Sponge Water</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In this chapter, we will make a plugin that makes removing water easier. When you place a sponge, it will replace all water directly adjacent to it with glass. It may look like it is building a structure and indeed it builds a shell of glass around it.</p>
</div>
<div class="paragraph">
<p>New structures can be built either with Listeners or commands. The plugin in this chapter will use a Listener, while the next chapter will utilize commands.</p>
</div>
<div class="paragraph">
<p>In the very early versions of Minecraft, sponges actually did absorb water. The sponges made an area of air around them to ward away water. This functionality was removed in later versions, so a lot of work was required if a player wanted to remove water. The only ways they could achieve that were very hard to do and usually did not work. This plugin will make sponges do what they used to do - absorb water.</p>
</div>
<div class="sect2">
<h3 id="_create_the_plugin_6">Create the plugin</h3>
<div class="paragraph">
<p>Like all other plugins, this one starts with the Bukkit Recipe. The information for plugin creation is quite similar to <a href="#PlayerEntryExit_Plugin_Details_Image">PlayerEntryExit plugin details</a>. <a href="#SpongeWater_plugin_values">ThrowEgg plugin updated values</a> shows the values that needs to be updated.</p>
</div>
<table id="SpongeWater_plugin_values" class="tableblock frame-all grid-all spread">
<caption class="title">Table 7. ThrowEgg plugin updated values</caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field</th>
<th class="tableblock halign-left valign-top">Value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Project Name</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SpongeWater</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Package</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">org.devoxx4kids.bukkit.plugins.spongewater</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Click on `Finish' button to complete the plugin creation and open the project. The expanded directory should look like as shown in <a href="#SpongeWater_Directory_Structure_Expanded">SpongeWater expanded directory structure</a>.</p>
</div>
<div id="SpongeWater_Directory_Structure_Expanded" class="imageblock">
<div class="content">
<img src="images/netbeans-create-plugin-sponge-water-directory-structure-expanded.png" alt="netbeans create plugin sponge water directory structure expanded">
</div>
<div class="title">Figure 30. SpongeWater expanded directory structure</div>
</div>
<div class="paragraph">
<p>Like other plugins created so far, there is <code>org.devoxx4kids.bukkit.plugins.spongewater.MyPlugin</code> as the entry point to plugin, <code>plugin.yml</code> that defines plugin configuration, and <code>pom.xml</code> that defines instructions on how to build and install the plugin.</p>
</div>
</div>
<div class="sect2">
<h3 id="_register_and_create_the_listener_5">Register and create the Listener</h3>
<div class="paragraph">
<p>First of all, a Listener will have to be registered for this plugin. The code for registering the Listener needs to be specified in <code>onEnable()</code> method of <code>MyPlugin.java</code> and can be found in <a href="#SpongeWater_Registering_Listener">Register the SpongeWater Listener</a>. You know how to add code to <code>onEnable()</code> method. If you&#8217;ve forgotten then refresh your memory by referring to similar section from previous chapters.</p>
</div>
<div id="SpongeWater_Registering_Listener" class="exampleblock">
<div class="title">Example 43. Register the SpongeWater Listener</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">getServer()
    .getPluginManager()
    .registerEvents(new SpongeListener(this),
        this);</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>Unlike the last plugins, instead of creating a default instance using <code>new SpongeListener()</code>, we are passing <code>this</code> as the parameter to the constructor. <code>this</code> is a Java keyword and refers to the <em>current object</em>, which is an instance of the <code>MyPlugin.java</code> class in our case. This allows the Listener to use the methods from <code>MyPlugin.java</code>, especially the plugin&#8217;s logger.</p>
</div>
<div class="paragraph">
<p>Click on the stop sign next to the line in <a href="#SpongeWater_Registering_Listener">Register the SpongeWater Listener</a> and choose the option <code>Create class "SpongeListener" with constructor "SpongeListener(org.devoxx4kids.bukkit.plugins.spongewater.MyPlugin)" in pakage org.devoxx4kids.bukkit.plugins.spongewater</code> to create the Listener class. This is shown <a href="#SpongeWater_Creating_Listener">Creating the SpongeWater Listener</a>.</p>
</div>
<div id="SpongeWater_Creating_Listener" class="imageblock">
<div class="content">
<img src="images/netbeans-create-plugin-sponge-water-create-listener.png" alt="netbeans create plugin sponge water create listener">
</div>
<div class="title">Figure 31. Creating the SpongeWater Listener</div>
</div>
<div class="paragraph">
<p>A new Java source file is generated and opened in NetBeans main window.</p>
</div>
</div>
<div class="sect2">
<h3 id="_add_event_handlers_6">Add event handlers</h3>
<div class="paragraph">
<p>By default, the Listener doesn&#8217;t do anything, so lets add functionality for the sponges to work. The code from <a href="#SpongeWater_Listener_Method">SpongeWater Listener methods</a> will have to be added to the newly generated Listener class.</p>
</div>
<div id="SpongeWater_Listener_Method" class="exampleblock">
<div class="title">Example 44. SpongeWater Listener methods</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">@EventHandler
public void absorbWater(BlockPlaceEvent event) { <b class="conum">(1)</b>
    Block eventblock = event.getBlock(); <b class="conum">(2)</b>
    World world = eventblock.getWorld();
    if (eventblock.getType() != Material.SPONGE) {
        return;
    }

    plugin.getLogger().info("Sponge place detected."); <b class="conum">(3)</b>

    int radius = 1; <b class="conum">(4)</b>

    int x = eventblock.getX();
    int y = eventblock.getY();
    int z = eventblock.getZ();

    int waterBlocksFound = 0;

    for (int xx = x - radius; xx &lt;= x + radius; xx++) { <b class="conum">(5)</b>
        for (int yy = y - radius; yy &lt;= y + radius; yy++) {
            for (int zz = z - radius; zz &lt;= z + radius; zz++) {
                Block block = world.getBlockAt(xx, yy, zz);
                if (block.getType() == Material.WATER
                || block.getType() == Material.STATIONARY_WATER) {
                    block.setType(Material.GLASS);
                    waterBlocksFound++;
                }
            }
        }
    }
    plugin.getLogger().log(Level.INFO,
    "Replaced {0} water blocks with glass.", waterBlocksFound); <b class="conum">(6)</b>
}</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>As you can realize by now, a Listener class has one or more event handlers, each identified by a Java method marked with <code>@EventHandler</code>. Lets understand this ode now.</p>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Using <code>BlockPlaceEvent</code> Bukkit class as the Java method parameter ensures that this method is called whenever a block is placed by the player. As explained earlier, the name of the method does not matter, and just placing the <code>@EventHandler</code> annotation above the method is sufficient.</p>
</li>
<li>
<p>Two variables are created, <code>eventBlock</code> to store the event&#8217;s block and <code>world</code> to store the event&#8217;s world. If the block is not a Sponge, then the method returns without doing anything because this method is looking only for sponges. If the block is a Sponge, the method continues.</p>
</li>
<li>
<p>A message is logged in the console saying that a sponge has been placed.</p>
</li>
<li>
<p>A few variables are created. <code>radius</code> is initialized with a value of 1 and indicates the radius of blocks that will be converted into glass. Three more variables, <code>x</code>, <code>y</code>, and <code>z</code> are created to store the block&#8217;s position. One last variable, <code>waterBlocksFound</code>, is created to log the number of water blocks that were converted into glass.</p>
</li>
<li>
<p>We learned about for loops in earlier chapters. Java allows <em>nesting</em> of for loops, or using another for loop within a for loop. The first for loop is called as <em>outside for loop</em> and the second for loop is called as <em>inner for loop</em>. This allows the inner for loop to be executed for each iteration of the outside for loop. In this case, there are three nested for loop.</p>
</li>
<li>
<p>A message is logged in the server console that states the number of water blocks found and turned into Glass.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_install_and_verify_6">Install and verify</h3>
<div class="paragraph">
<p>This plugin is now complete! Build it and install it to your server to use it. You can change the <code>radius</code> variable to whatever you want the radius to be. It&#8217;s a good idea to keep it under 4 because otherwise you could become trapped in the glass. You have to be under five blocks away from a block to place something on it, so if you are too close, the glass could be placed where you are standing, trapping you.</p>
</div>
<div id="SpongeWater_Minecraft_Output" class="imageblock">
<div class="content">
<img src="images/netbeans-create-plugin-sponge-water-minecraft-output.png" alt="netbeans create plugin sponge water minecraft output">
</div>
<div class="title">Figure 32. SpongeWater sponges in water</div>
</div>
<div class="paragraph">
<p><a href="#SpongeWater_Minecraft_Output">SpongeWater sponges in water</a> shows what happens if you put multiple sponges in a row. The yellow blocks are sponges, and they are surrounded by transparent glass. The glass is surrounded by blue water.</p>
</div>
</div>
<div class="sect2">
<h3 id="_summary_7">Summary</h3>
<div class="paragraph">
<p>This chapter showed how you can use sponges to remove water from the world. When a sponge was placed, it turned all water in a one-block radius into glass. In the next chapter, you will use commands to make towers of any block and any height.</p>
</div>
<div class="paragraph">
<p>We also learned about <code>this</code> keyword in Java and nested for loops.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="Tower_Builder">Tower Builder</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This chapter will show how to build a pre-set schematic of blocks, something like a tower of iron or a quartz mansion.</p>
</div>
<div class="paragraph">
<p>Now that you have an idea of how to build a structure, we will make a plugin that allows you to create towers wherever you want. This plugin will add a command that creates a tower with whatever material and height that you want.</p>
</div>
<div class="paragraph">
<p>Towers like the ones created by this plugin can be created normally, but if you want to make really high towers, it could take a while. You would have to place eight blocks for each layer of the tower, so for a 100 block tower, you would have to place 800 blocks! That would be very time-consuming and not very fun either. This plugin lets you make towers with just one command, so you can focus on other fun aspects of Minecraft instead of spending your time building towers.</p>
</div>
<div class="sect2">
<h3 id="_create_the_plugin_7">Create the plugin</h3>
<div class="paragraph">
<p>First of all, like all other plugins, use the Bukkit Recipe to create a new plugin. The information for plugin creation is quite similar to <a href="#PlayerEntryExit_Plugin_Details_Image">PlayerEntryExit plugin details</a>. <a href="#SpongeWater_plugin_values">ThrowEgg plugin updated values</a> shows the values that needs to be updated.</p>
</div>
<table id="TowerBuilder_plugin_values" class="tableblock frame-all grid-all spread">
<caption class="title">Table 8. TowerBuilder plugin updated values</caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field</th>
<th class="tableblock halign-left valign-top">Value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Project Name</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TowerBuilder</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Package</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">org.devoxx4kids.bukkit.plugins.towerbuilder</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Click on `Finish' button to complete the plugin creation and open the project.</p>
</div>
<div class="paragraph">
<p>Now that you&#8217;ve built several plugins, you can click around the project and look for the expanded directory yourself.</p>
</div>
</div>
<div class="sect2">
<h3 id="_register_the_command_3">Register the command</h3>
<div class="paragraph">
<p>This plugin does not require a Listener, as it is command-only. First, the command will have to be registered. The updated <code>plugin.yml</code> is shown in <a href="#TowerBuilder_updated_plugin_yml">[TowerBuilder_updated_plugin_yml]</a>. The code that needs to be added is shown in bold.</p>
</div>
<div id="Tower_Registering_Command" class="exampleblock">
<div class="title">Example 45. Register tower command</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">name: ThrowEgg
version: "1.0-SNAPSHOT"
author: Aditya Gupta
main: org.devoxx4kids.bukkit.plugins.throwegg.MyPlugin
commands:
  commands:
  tower:
    description: make a tower of &amp;lt;material&amp;gt; that is &amp;lt;height&amp;gt; blocks tall.
    usage: /tower &amp;lt;material&amp;gt; &amp;lt;height&amp;gt;</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>This will introduce a new command <code>tower</code> that will take two arguments. The first argument is the material to be used for building the tower and the second argument is the height of the tower.</p>
</div>
<div class="paragraph">
<p>Note, no alias of the command is specified as that is optional.</p>
</div>
</div>
<div class="sect2">
<h3 id="_add_command_functionality_3">Add command functionality</h3>
<div class="paragraph">
<p>After the command is registered, functionality must be added to it with the <code>onCommand()</code> method in <code>MyPlugin.java</code>. The code for doing this is shown in <a href="#Tower_Command_Method">Tower onCommand method</a> and must be added to the end of <code>MyPlugin.java</code>.</p>
</div>
<div id="Tower_Command_Method" class="exampleblock">
<div class="title">Example 46. Tower onCommand method</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">@Override
public boolean onCommand(CommandSender sender,
                         Command cmd,
                         String label,
                         String[] args) {
    if (!(cmd.getName().equals("tower"))) { <b class="conum">(1)</b>
        return false;
    }
    if (!(sender instanceof Player)) {
        return false;
    }
    if (args.length != 2) {
        sender.sendMessage("Usage: /tower &lt;material&gt; &lt;height&gt;");
        return false;
    }

    Material material = Material.matchMaterial(args[0]); <b class="conum">(2)</b>

    if(material == null){
        sender.sendMessage(ChatColor.RED + args[0]
            + ChatColor.DARK_RED + " is not a valid material!");
        return false;
    }

    int height; <b class="conum">(3)</b>

    try{
        height = Integer.parseInt(args[1]);
    } catch (NumberFormatException nfe){
        sender.sendMessage(ChatColor.RED + args[1]
            + ChatColor.DARK_RED + " is not a valid number!");
        return false;
    }

    int x = ((Player) sender).getLocation().getBlockX(); <b class="conum">(4)</b>
    int y = ((Player) sender).getLocation().getBlockY();
    int z = ((Player) sender).getLocation().getBlockZ();

    int[] tower = {
        x + 1, y, z,
        x - 1, y, z,
        x, y, z + 1,
        x, y, z - 1,
        x + 1, y, z + 1,
        x - 1, y, z - 1,
        x + 1, y, z - 1,
        x - 1, y, z + 1
    };

    World world = ((Player) sender).getWorld(); <b class="conum">(5)</b>

    int layer = 0;

    for (int i = 0; i &lt; height; i++) { <b class="conum">(6)</b>
        for (int j = 0; j &lt; tower.length; j += 3) {
            world.getBlockAt(tower[j],
                tower[j + 1] + layer,
                tower[j + 2]).setType(material);
        }
        layer++;
    }

    sender.sendMessage(ChatColor.GREEN + "You made a tower of " <b class="conum">(7)</b>
        + material + " that is " + height + " blocks high.");
    return true;
}</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>A good part of this code should look familiar as it has been explained in previous chapters. There are some things that need explanation.</p>
</div>
<div class="colist arabic">
<ol>
<li>
<p>If the command is <code>/tower</code>, a player is running it, and there are 2 arguments, the method continues. If not, it returns false and stops execution. All of these statements have been explained earlier.</p>
</li>
<li>
<p><code>Material</code> is a Bukkit class that provides a <code>matchMaterial</code> method that can take any string parameter and returns a matching material. The exact list of material is shown at <a href="http://jd.bukkit.org/apidocs/org/bukkit/Material.html" class="bare">http://jd.bukkit.org/apidocs/org/bukkit/Material.html</a>.</p>
</li>
<li>
<p>Another variable, <code>height</code>, is created to store the tower&#8217;s height. Second argument to the command, identified by index 1 in <code>args</code> parameter, provides the second user input. If it is not a number, the method returns false and further execution is stopped. try/catch block are used to do exception handling here.</p>
</li>
<li>
<p>Three variables, <code>x</code>, <code>y</code>, and <code>z</code>, store the player&#8217;s current x, y, and z coordinates. A new array of integer is created based upon player&#8217;s current position and contain the positions for one layer of the tower. The array is called <code>tower</code>.</p>
</li>
<li>
<p>Two variables are created, one to store the world and another called <code>layer</code> that will be used in the creation of the tower.</p>
</li>
<li>
<p>A nested for loop makes tower layers on top of each other until the tower reaches the height specified by the player.</p>
</li>
<li>
<p>The player is sent a message telling them what their tower was built from and how tall it was.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_install_and_verify_7">Install and verify</h3>
<div class="paragraph">
<p>Now, you can build this plugin and install it to your server. The towers from the plugin are useful for building cool structures and spawnpoints.</p>
</div>
<div class="paragraph">
<p><a href="#TowerBuilder_Minecraft_Output">TowerBuilder towers</a> shows some of the different kinds of towers that can be created with this plugin. The tower on the left is made of COAL_ORE and is 2 blocks tall. The middle tower is made of DIAMOND_BLOCK and is 10 blocks tall. The tower on the right is made of IRON_BLOCK and is 5 blocks tall.</p>
</div>
<div id="TowerBuilder_Minecraft_Output" class="imageblock">
<div class="content">
<img src="images/netbeans-create-plugin-tower-builder-minecraft-output.png" alt="netbeans create plugin tower builder minecraft output">
</div>
<div class="title">Figure 33. TowerBuilder towers</div>
</div>
<div class="paragraph">
<p>The commands used to generate these towers are shown in</p>
</div>
<div id="TowerBuilder_Sample_Commands" class="exampleblock">
<div class="title">Example 47. TowerBuilder Sample Command</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-text" data-lang="text">/tower COAL_ORE 2
/tower DIAMOND_BLOCK 10
/tower IRON_BLOCK 5</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>Note the tower is created at player&#8217;s current location. So the first tower is created by giving the first command, the player moves to the next location and issues the second command, and the player moves to the last location and creates the last tower.</p>
</div>
<div class="paragraph">
<p>You can make towers with any blocks and with any heights. Note that you cannot have blocks over the Minecraft height limit, which is 256 blocks above the bottom of the world.</p>
</div>
<div class="paragraph">
<p>One fun thing you can do is make ``flaming blocks''. Make a tower of Mob Spawners (MOB_SPAWNER), then make a tower of the same height and at the same place, but with another block. Flame particles will appear around the second tower, making it look like its on fire.</p>
</div>
</div>
<div class="sect2">
<h3 id="_summary_8">Summary</h3>
<div class="paragraph">
<p>In this chapter, you learned how to generate structures with commands. You built on the concepts from the last chapter to make a plugin that allows you to build towers with commands.</p>
</div>
<div class="paragraph">
<p>The Java concepts learned so far, such as exception handling using try/catch, nested for loops, arrays, <code>instanceof</code> operator, were applied once again. In addition, the <code>null</code> keyword was introduced.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="Fun_Plugins">Recipes and Enchantments</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In this chapter, you will learn how to make three new plugins. The first two will show how to create a new crafting recipe and a smelting recipe. The last one is how to have higher enchantments. Since you already know how to create a plugin, and now can easily guess the value required during plugin creation, this chapter will provide only the relevant code for the plugins.</p>
</div>
<div class="paragraph">
<p>This chapter and the two after it are mostly to show you the capabilities of the Bukkit API.</p>
</div>
<div class="sect2">
<h3 id="_crafting_recipe">Crafting Recipe</h3>
<div class="paragraph">
<p>Minecraft already has several predefined crafting recipes such as TBD. In some recipes, the configuration of the items matters. For example, TBD. These are called <em>shaped recipes</em>. In <em>shapeless recipes</em>, the placement of the items does not matter.</p>
</div>
<div class="paragraph">
<p>The end result of each crafting recipe is creation of a one or multiple item(s) or block(s). This plugin shows how to add a new shaped crafting recipe to the existing set of recipes.</p>
</div>
<div class="paragraph">
<p>Crafting recipe requires placement of ingredients in a 3x3 crafting table. Creating a new shaped recipe will require you to define the placement of these ingredients in the grid, one row at a time. The output item(s) or block(s) also need to be defined. <a href="#onEnable_method_for_shaped_crafting_recipe">onEnable method for shaped crafting recipe</a> shows how this can be specified in <code>onEnable</code> method of <code>MyPlugin.java</code>. Remember, you need to create the plugin following the steps explained in earlier chapters before making these edits.</p>
</div>
<div id="onEnable_method_for_shaped_crafting_recipe" class="exampleblock">
<div class="title">Example 48. onEnable method for shaped crafting recipe</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">@Override
public void onEnable() {
    getLogger().log(Level.INFO, "{0}.onEnable()",
         this.getClass().getName());
    ShapedRecipe recipe = new ShapedRecipe( <b class="conum">(1)</b>
        new ItemStack(Material.NETHER_STAR, 1));
    recipe.shape("ded", "lnl", "ded"); <b class="conum">(2)</b>
    recipe.setIngredient('d', Material.DIAMOND_BLOCK) <b class="conum">(3)</b>
    recipe.setIngredient('e', Material.EMERALD)
    recipe.setIngredient('l', Material.LAPIS_BLOCK)
    recipe.setIngredient('n', Material.REDSTONE_BLOCK);
    getServer().addRecipe(recipe); <b class="conum">(4)</b>
}</code></pre>
</div>
</div>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Creates a new <code>ShapedRecipe</code> Bukkit class where the output item will a single Nether Star. The exact list of materials is available at <a href="http://jd.bukkit.org/apidocs/org/bukkit/Material.html" class="bare">http://jd.bukkit.org/apidocs/org/bukkit/Material.html</a>.</p>
</li>
<li>
<p>Three rows of the crafting table are defined by three parameters in the <code>shape()</code> method. Each column in that row is defined by one character. And since a row has three columns, three characters are required to specify a row.</p>
</li>
<li>
<p>The letters used in the recipe are mapped to the corresponding item using <code>setIngredient()</code> methods, one method call for each letter used in the recipe. For example, the letter ``e'' in the recipe signifies the item Emerald.</p>
</li>
<li>
<p>The recipe is added to the server.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><a href="#New_Crafting_Recipe">New crafting recipe</a> shows the new crafting recipe in action.</p>
</div>
<div id="New_Crafting_Recipe" class="imageblock">
<div class="content">
<img src="images/new-crafting-recipe.PNG" alt="new crafting recipe">
</div>
<div class="title">Figure 34. New crafting recipe</div>
</div>
<div class="paragraph">
<p>The <code>org.bukkit.inventory.ShapelessRecipe</code> Bukkit class can be used to create a shapeless crafting recipe. The only difference between the two recipes is that there is no <code>shape()</code> method call. Only the ingredients and how many of them are required needs to be specified. This allows the specified number of items to be placed anywhere in the 3x3 grid to craft the output item.</p>
</div>
<div id="onEnable_method_for_shapeless_crafting_recipe" class="exampleblock">
<div class="title">Example 49. onEnable method for shapeless crafting recipe</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">@Override
public void onEnable() {
    getLogger().log(Level.INFO, "{0}.onEnable()",
         this.getClass().getName());
    ShapelessRecipe recipe = new ShapelessRecipe( <b class="conum">(1)</b>
        new ItemStack(Material.DIAMOND, 1));
    recipe.setIngredient(5, Material.GRASS) <b class="conum">(3)</b>
    recipe.setIngredient(3, Material.DIRT);
    recipe.setIngredient(3, Material.PAPER);
    getServer().addRecipe(recipe); <b class="conum">(4)</b>
}</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p><a href="#onEnable_method_for_shapeless_crafting_recipe">onEnable method for shapeless crafting recipe</a> shows how a diamond can be created using grass, paper, and dirt.</p>
</div>
</div>
<div class="sect2">
<h3 id="_smelting_recipe">Smelting Recipe</h3>
<div class="paragraph">
<p>Smelting is a method of producing refined goods. Smelting is done in <em>furnace blocks</em> which takes one <code>input'' ingredient that will be heated, one field for the fuel, and one </code>output'' field for the final smelted product.</p>
</div>
<div class="paragraph">
<p>This plugin shows how to add a new smelting recipe. <a href="#onEnable_method_for_smelting_recipe">onEnable method for smelting recipe</a> shows the <code>onEnable</code> method for <code>MyPlugin.java</code> for this plugin.</p>
</div>
<div id="onEnable_method_for_smelting_recipe" class="exampleblock">
<div class="title">Example 50. onEnable method for smelting recipe</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">@Override
public void onEnable() {
    getLogger().log(Level.INFO, "{0}.onEnable()",
    this.getClass().getName());
    FurnaceRecipe recipe = new FurnaceRecipe( <b class="conum">(1)</b>
        new ItemStack(Material.DRAGON_EGG, 1), <b class="conum">(2)</b>
        Material.EGG <b class="conum">(3)</b>
    );
    getServer().addRecipe(recipe); <b class="conum">(4)</b>
}</code></pre>
</div>
</div>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>This recipe is a furnace recipe as identified by creating a new instance Bukkit-defined <code>FurnaceRecipe</code> class. The created recipe is stored in the <code>recipe</code> variable.</p>
</li>
<li>
<p>This is the <code>output'' item obtained from smelting. In this case, it is a Dragon Egg item. The second parameter defines the number of </code>output'' items that will be obtained.</p>
</li>
<li>
<p>This is the ``input'' ingredient that will be heated. In this case, it an Egg item. So one Egg item will be smelted to one Dragon Egg item.</p>
</li>
<li>
<p>The recipe is added to the server.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><a href="#New_Smelting_Recipe">New smelting recipe</a> shows the new recipe in action. A stack of 16 eggs was put into the input slot, and four of them are already smelted. The four Dragon Eggs resulting from that are in the output slot at the right. The remaining 12 Eggs are still at the top and will be eventually smelted to Dragon Egg as well.</p>
</div>
<div id="New_Smelting_Recipe" class="imageblock">
<div class="content">
<img src="images/new-smelting-recipe.png" alt="new smelting recipe">
</div>
<div class="title">Figure 35. New smelting recipe</div>
</div>
</div>
<div class="sect2">
<h3 id="_higher_enchantments">Higher Enchantments</h3>
<div class="paragraph">
<p>Enchantments can be added to armor or weapons to make them more powerful. However the level of enchantment is restricted. This plugin shows how higher enchantments can be enabled for the item currently held by the player. It shows that only for a small subset of enchantments. But similar mechanism may be applied to enable higher levels for other enchantments.</p>
</div>
<div class="paragraph">
<p>The plugin will introduce a new command that enables higher enchantment level. <a href="#Tower_Builder">Tower Builder</a> provide more details about how to add new commands. The <code>`plugin.yml</code> required for this plugin is shown in <a href="#plugin_yml_for_higher_enchantments">plugin.yml for higher enchantments</a>.</p>
</div>
<div id="plugin_yml_for_higher_enchantments" class="exampleblock">
<div class="title">Example 51. plugin.yml for higher enchantments</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">name: Enchantments
version: "1.0-SNAPSHOT"
author: Aditya Gupta
main: org.devoxx4kids.bukkit.plugins.enchantments.MyPlugin
&lt;emphasis role="strong"&gt;commands:
   enchantment: <b class="conum">(1)</b>
      description: allows a higher enchantment level.
      usage: /enchantment &lt;enchantment&gt; &lt;level&gt; <b class="conum">(2)</b>
      aliases: ench&lt;/emphasis&gt; <b class="conum">(3)</b></code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>Updated code is shown in bold.</p>
</div>
<div class="colist arabic">
<ol>
<li>
<p>The command name is <code>enchantment''. Note that the command name could not be </code>enchant'' because that is a vanilla command that enchants items up to the normal limits.</p>
</li>
<li>
<p>Usage requires to specify the enchantment and the level. The enchantment name should match the enchantment&#8217;s in-game name, with underscores for spaces. The exact list of enchantment is shown at <a href="http://jd.bukkit.org/rb/apidocs/org/bukkit/enchantments/Enchantment.html" class="bare">http://jd.bukkit.org/rb/apidocs/org/bukkit/enchantments/Enchantment.html</a>.</p>
</li>
<li>
<p>An alias for the command is ``ench''.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><code>onEnable()</code> method of <code>MyPlugin.java</code> needs to be updated and is shown in <a href="#MyPlugin_for_higher_enchantments">MyPlugin.java for higher enchantments</a>. In addition, <code>onCommand()</code> is added as well.</p>
</div>
<div id="MyPlugin_for_higher_enchantments" class="exampleblock">
<div class="title">Example 52. MyPlugin.java for higher enchantments</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">public class MyPlugin extends JavaPlugin {

    HashMap&lt;String, Enchantment&gt; enchantments = new HashMap(); <b class="conum">(1)</b>

    // This code is called after the server starts and after the /reload command
    @Override
    public void onEnable() {
        getLogger().log(Level.INFO, "{0}.onEnable()",
        this.getClass().getName());
        enchantments.put("flame", Enchantment.ARROW_FIRE); <b class="conum">(2)</b>
        enchantments.put("infinity", Enchantment.ARROW_INFINITE);
        enchantments.put("knockback", Enchantment.KNOCKBACK);
        enchantments.put("fortune", Enchantment.LUCK);
        enchantments.put("blast_protection", Enchantment.PROTECTION_EXPLOSIONS);
        enchantments.put("unbreaking", Enchantment.DURABILITY);
    }

    // This code is called before the server stops and after the /reload command
    @Override
    public void onDisable() {
        getLogger().log(Level.INFO, "{0}.onDisable()", this.getClass().getName());
    }

    @Override
    public boolean onCommand(CommandSender sender, Command cmd, String label, String[] args) {
        if (!cmd.getName().equals("enchantment")) {
            return false;
        }
        if (!(sender instanceof Player)) {
            return false;
        }

        if (args.length != 2) { <b class="conum">(3)</b>
            sender.sendMessage(ChatColor.DARK_RED + cmd.getUsage());
            return false;
        }

        if (!enchantments.containsKey(args[0])) { <b class="conum">(4)</b>
            sender.sendMessage(ChatColor.RED + args[0]
                + ChatColor.DARK_RED + " is not a supported enchantment!");
            return false;
        }

        int level;

        try{ <b class="conum">(5)</b>
            level = Integer.parseInt(args[1]);
        } catch (NumberFormatException nfe){
            sender.sendMessage(ChatColor.RED + args[1]
                + ChatColor.DARK_RED + " is not a valid number!");
            return false;
        }

        ItemStack itemStack = ((Player) sender).getItemInHand(); <b class="conum">(6)</b>
        itemStack.addUnsafeEnchantment( <b class="conum">(7)</b>
            enchantments.get(args[0]), level);

        ((Player) sender).sendMessage(ChatColor.GOLD <b class="conum">(8)</b>
            + "You have enchanted your item with "
            + ChatColor.GREEN + args[0]
            + ChatColor.GOLD + " at level "
            + ChatColor.GREEN + level
            + ChatColor.GOLD + ".");

        return true;
    }
}</code></pre>
</div>
</div>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Create a <code>java.util.HashMap</code> class that will store the mapping between in-game and Bukkit name of enchantment</p>
</li>
<li>
<p><code>onEnable</code> method adds several mappings for in-game enchantment name to the Bukkit name of enchantment. The mappings shown here don&#8217;t cover all of the enchantments, so all the other enchantments need to be added to make the command support them. The complete list of enchantments are liste at <a href="http://jd.bukkit.org/rb/apidocs/org/bukkit/enchantments/Enchantment.html" class="bare">http://jd.bukkit.org/rb/apidocs/org/bukkit/enchantments/Enchantment.html</a>.</p>
</li>
<li>
<p>Checks that at least two parameters are specified, one for enchantment in-game name, and another one for the level. If not then a message is displayed to the player and further execution of the method is halted.</p>
</li>
<li>
<p>Ensures that the first parameter is a valid enchantment. <code>containsKey</code> method ensures that the first command argument, identified by <code>args[0]</code> is in the <code>enchantments</code> map. If not, then a message is displayed to the user and further execution halted.</p>
</li>
<li>
<p>Checks that the second argument, identified by args[1], is an integer. If it is not, a <code>NumberFormatException</code> is thrown, and the player is notified that their number is invalid.</p>
</li>
<li>
<p>Gets the item player is holding by calling <code>getItemInHand()</code> Bukkit method on player.</p>
</li>
<li>
<p>Sets the specified enchantment level. Note that <code>addUnsafeEnchantment</code> is used because it ignores level restrictions. <code>addEnchantment</code> would not allow you to make enchantments above the normal limits.</p>
</li>
<li>
<p>Send the player a message telling them what enchantment they did and at what level. <a href="#Enchantment_Output">HigherEnchantments chat output</a> shows the output in the chat window.</p>
</li>
</ol>
</div>
<div id="Enchantment_Output" class="imageblock">
<div class="content">
<img src="images/enchantment-output.png" alt="enchantment output">
</div>
<div class="title">Figure 36. HigherEnchantments chat output</div>
</div>
<div class="paragraph">
<p>The player in the above picture enchanted their item with Flame, Infinity, and Unbreaking, all at level 100.</p>
</div>
</div>
<div class="sect2">
<h3 id="_summary_9">Summary</h3>
<div class="paragraph">
<p>In this chapter, you created three plugins. The first plugin added a new crafting recipe and we discussed how shaped and shapeless recipes can be created. The second plugin created a new smelting recipe. The last plugin added a new command to make higher enchantments.</p>
</div>
<div class="paragraph">
<p>The Java concepts learned in earlier chapters are applied and so the descriptions could be kept short. It shows how your overall Java knowledge is improving as well.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="Explosions">Explosions and Rocket Launchers</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This chapter, like the previous one, is targeted at readers who have read through the previous ones and know how to make plugins. It will expand on your knowledge of the Bukkit API and show you more about what it can do.</p>
</div>
<div class="paragraph">
<p>These two plugins are more complicated than the previous ones, and so will require you to pay closer attention to details.</p>
</div>
<div class="sect2">
<h3 id="_tnt_magnet">TNT Magnet</h3>
<div class="paragraph">
<p>This next plugin is very explosive!</p>
</div>
<div class="paragraph">
<p>Whenever a TNT block is placed, it turns into a TNT magnet. After 5 seconds, it will detonate, and all mobs around it will be teleported to it just before. In this way, you can destroy all mobs in an 8 block radius around the TNT.</p>
</div>
<div class="paragraph">
<p>First some Java concepts.</p>
</div>
<div class="paragraph">
<p>Java allows a class to be <em>derived</em> from another class. A class that is derived from another class is called a <em>subclass</em> (also a <em>derived class</em>, <em>extended class</em>, or <em>child class</em>). The class from which the subclass is derived is called a <em>superclass</em> (also a <em>base class</em> or <em>parent class</em>). A child class inherits a parent class using <code>extends</code> Java keyword. So a child class is also known to <em>extend</em> the parent class.</p>
</div>
<div class="paragraph">
<p>A class can be derived from a class that is derived from another class, and so on, and ultimately derived from the top most <code>java.lang.Object</code> class. All the classes, up to <code>java.lang.Object</code> are said to be in the <em>parent hierachy</em> of the child class.</p>
</div>
<div class="paragraph">
<p>This concept is commonly known as <em>inheritance</em>. A subclass <em>inherits</em> fields and methods of the classes in parent hierarchy. So the fields from all the parent classes can be directly manipulated in the child class. Similarly, methods from all the parent classes can be invoked in the child class.</p>
</div>
<div class="paragraph">
<p>Lets create our plugin now. First of all, like every other plugin, use the Bukkit Recipe to create a new plugin. Choose the plugin name as <code>TNTMagnet</code> and the package name as <code>org.devoxx4kids.bukkit.plugins.tntmagnet</code>.</p>
</div>
<div class="paragraph">
<p>In order to display a countdown timer in the chat console that shows <code>TNT will explode in 5 seconds'', </code>TNT will explode in 4 seconds'' and so on, we&#8217;ll use <code>BukkitRunnable</code> Bukkit class. This class allows us to defer execution of code to a later time, blow up TNT after 5 seconds in our case. This is called as <em>defining work</em> in Bukkit. This can be easily achieved by making any class extend from <code>BukkitRunnable</code> Bukkit class. This code, or <code>`work'', may be scheduled to be executed repeatedly at a fixed interval, show a message every 1 second in our case. This is called as <em>scheduling work</em> in Bukkit. This can be achieved by using any of the `run</code> methods in <code>BukkitRunnable</code>.</p>
</div>
<div class="paragraph">
<p>This plugin needs to register a Listener in <code>onEnable()</code> method of <code>MyPlugin.java</code> and can be found in <a href="#ExplosionPlugin_Registering_Listener">Register the SpongeWater Listener</a>. You know how to add code to <code>onEnable()</code> method. If you&#8217;ve forgotten then refresh your memory by referring to similar section from previous chapters.</p>
</div>
<div id="ExplosionPlugin_Registering_Listener" class="exampleblock">
<div class="title">Example 53. Register the SpongeWater Listener</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">getServer()
    .getPluginManager()
    .registerEvents(new TNTListener(this),
        this);</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p><code>TNTListener</code> can be created by clicking on the stop sign in NetBeans and picking the right option. The Listener itself, <code>TNTListener.java</code> is pretty straight forward and the complete class is shown in <a href="#TNTMagnet_class">TNTListener class</a>.</p>
</div>
<div id="TNTMagnet_class" class="exampleblock">
<div class="title">Example 54. TNTListener class</div>
<div class="content">
<div class="paragraph">
<p>class TNTListener implements Listener {</p>
</div>
<div class="literalblock">
<div class="content">
<pre>private final MyPlugin plugin;</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>public TNTListener(MyPlugin plugin) {
    this.plugin = plugin;
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>&lt;emphasis role="strong"&gt;@EventHandler
public void explodeTNT(BlockPlaceEvent event) throws InterruptedException { &lt;co id="tntmag-co-1" linkends="tntmag-co-11" /&gt;
    if (event.getBlock().getType() != Material.TNT) { &lt;co id="tntmag-co-2" linkends="tntmag-co-22" /&gt;
        return;
    }</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>p.sendMessage(ChatColor.GOLD + "You have placed a " + &lt;co id="tntmag-co-3" linkends="tntmag-co-33" /&gt;
    ChatColor.RED + "TNT Magnet" + ChatColor.GOLD + "! It will detonate in " +
    ChatColor.DARK_PURPLE + "5 " + ChatColor.GOLD + "seconds.");</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>        new TNTTask(this.plugin, 4, event.getPlayer(), event.getBlock()) &lt;co id="tntmag-co-4" linkends="tntmag-co-44" /&gt;
            .runTaskTimer(this.plugin, 20, 20); &lt;co id="tntmag-co-5" linkends="tntmag-co-55" /&gt;
    }&lt;/emphasis&gt;
}
&lt;simpara&gt;Event handler is highligted in bold.&lt;/simpara&gt;
&lt;calloutlist&gt;
&lt;callout arearefs="tntmag-co-1" id="tntmag-co-11"&gt;
&lt;para&gt;
The method is run when a block is placed by a player in the game. The game generates an event and this is captured as
&lt;literal&gt;BlockPlaceEvent&lt;/literal&gt; Bukkit class.
&lt;/para&gt;
&lt;/callout&gt;
&lt;callout arearefs="tntmag-co-2" id="tntmag-co-22"&gt;
&lt;para&gt;
If the block is not TNT, the method returns. Optionally, you may display a message here.
&lt;/para&gt;
&lt;/callout&gt;
&lt;callout arearefs="tntmag-co-3" id="tntmag-co-33"&gt;
&lt;para&gt;
First message is displayed using a mix of purple and gold colors.
&lt;/para&gt;
&lt;/callout&gt;
&lt;callout arearefs="tntmag-co-4" id="tntmag-co-44"&gt;
&lt;para&gt;
&lt;literal&gt;TNTTask&lt;/literal&gt; is a new class that defines the &amp;#8220;work&amp;#8221;, showing a message with countdown timer and
blowing up TNT in our case. The first parameter indicates how many times the task needs to be executed. Second parameter is
the player and third parameter is the block where TNT is placed. This class will be explained more in &lt;xref linkend="TNTMagnet_Runnable"/&gt;.
&lt;/para&gt;
&lt;/callout&gt;
&lt;callout arearefs="tntmag-co-5" id="tntmag-co-55"&gt;
&lt;para&gt;
The &lt;literal&gt;runTaskTimer()&lt;/literal&gt; method from &lt;literal&gt;BukkitRunnable&lt;/literal&gt; class schedules a task repeatedly until
cancelled. It takes three parameters. The first parameter is the plugin that is scheduling the task. The second parameter is the
ticks to wait before running the task. 20 ticks is 1 second and so wait 1 second before the first execution of the task. The third
parameter is the ticks to wait between runs, and this is also 1 second between each subsequent run of the task.
&lt;/para&gt;
&lt;/callout&gt;
&lt;/calloutlist&gt;</pre>
</div>
</div>

</div>
</div>
<div class="paragraph">
<p>One last file will have to be created for this plugin. Like other files, this can be easily created by clicking on the stop sign and selecting the option <code>Create class "TNTTask" with constructor "TNTTask(org.devoxx4kids.bukkit.plugins.tntmagnet.MyPlugin, int, org.bukkit.entity.Player, org.bukkit.block.Block)" in package org.devoxx4kids.bukkit.plugins.tntmagnet</code>.</p>
</div>
<div class="paragraph">
<p>NetBeans will create this file and open it in the main window. The updated file, with newly added code highlighted in bold, is shown in <a href="#TNTMagnet_Runnable">TNTMagnet Runnable class</a>.</p>
</div>
<div id="TNTMagnet_Runnable" class="exampleblock">
<div class="title">Example 55. TNTMagnet Runnable class</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">public class TNTTask extends BukkitRunnable { <b class="conum">(1)</b>

    &lt;emphasis role="strong&gt;private int counter; <b class="conum">(2)</b>
    Player player;
    Block block;&lt;/emphasis&gt;

    public TNTTask(int counter, Player p, Block b) { <b class="conum">(3)</b>
        this.player = p;
        this.block = b;
        this.counter = counter;
    }

    &lt;emphasis role="strong&gt;@Override
    public void run() { <b class="conum">(4)</b>
        if (counter &gt; 0) { <b class="conum">(5)</b>
            player.sendMessage(ChatColor.GOLD + "Detonating in "
            + ChatColor.DARK_PURPLE + counter-- + ChatColor.GOLD
            + " seconds!");

            return;
        }
        player.sendMessage(ChatColor.GOLD + "Your " <b class="conum">(6)</b>
            + ChatColor.RED + "TNT Magnet "
            + ChatColor.GOLD + "has detonated!");

        Entity bat = block.getWorld().spawnEntity(new Location( <b class="conum">(7)</b>
            block.getWorld(),
            block.getX() + 0.5,
            block.getY() + 0.5,
            block.getZ() + 0.5),
            EntityType.BAT);

        List&lt;Entity&gt; entitylist = ((LivingEntity) bat)
            .getNearbyEntities(4.0, 4.0, 4.0);

        bat.remove();

        for (int i = 0; i &lt; entitylist.toArray().length; i++) { <b class="conum">(8)</b>
            entitylist.get(i).teleport(
                new Location(block.getWorld(),
                    block.getX() + 0.5,
                    block.getY() + 0.5,
                    block.getZ() + 0.5));
        }

        block.setType(Material.AIR);

        TNTPrimed tnt = (TNTPrimed) block.getWorld().spawnEntity(
            new Location(block.getWorld(),
                block.getX() + 0.5,
                block.getY() + 0.5,
                block.getZ()),
                EntityType.PRIMED_TNT);

        tnt.setFuseTicks(0);

        this.cancel(); <b class="conum">(9)</b>
    }&lt;/emphasis&gt;
}</code></pre>
</div>
</div>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>This class extends from <code>BukkitRunnable</code>. In this case, <code>TNTTask</code> is the child class and <code>BukkitRunnable</code> is the parent class.</p>
</li>
<li>
<p>Three variables are created. The first one will be used to determine how many seconds are left until the TNT explodes. The other two will store the player who placed the TNT and the TNT itself.</p>
</li>
<li>
<p>The player, block, and counter variables are set to the ones given in the constructor. This will allow us to access these values in other methods of the class.</p>
</li>
<li>
<p>The method <code>run()</code> in any <code>BukkitRunnable</code> class is executed when the class is instantiated in the Listener. Note the return type of this method is <code>void</code>. This is a Java keyword indicating that the method does not return any value. However the method can still return after any statement by placing an <code>`empty'' `return</code> statement. We&#8217;ll look at this usage in this method next.</p>
</li>
<li>
<p>If the counter is greater than 0, the player is sent a message telling them how much time is remaining before their TNT Magnet explodes. The method also returns using <code>return</code> statement.</p>
</li>
<li>
<p>If the method has not returned, the counter is equal to 0, and it is time for the TNT Magnet to explode. The player is sent a message telling them that their TNT Magnet has detonated.</p>
</li>
<li>
<p>A bat is spawned at the location of the TNT, and its nearby entities are stored in a list. A bat is a good mob to spawn because it is so small you cannot see it outside the TNT. The bat is then removed.</p>
</li>
<li>
<p>All the entities in the list are teleported to the TNT. This is done using a ``for'' loop that runs through the entire list. The TNT is then removed by setting it to AIR, and primed TNT is spawned there with no fuse, so it blows up automatically.</p>
</li>
<li>
<p>The task has executed the exepcted number of times until this time and so <code>this.cancel()</code> cancels the task so that it does not keep repeating forever.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>To use this plugin, find a mob that you would like to blow up and place a TNT block next to it. After 5 seconds, if the mob hasn&#8217;t moven out of range, it will be dead from the force of the explosion, especially if you have the BiggerTNTExplosions plugin installed.</p>
</div>
<div class="paragraph">
<p>More details about Bukkit Schedulers can be found at <a href="http://wiki.bukkit.org/Scheduler_Programming" class="bare">http://wiki.bukkit.org/Scheduler_Programming</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_rocket_launcher">Rocket Launcher</h3>
<div class="paragraph">
<p>This is yet another fun plugin that will add a <code>rocket launcher'' which throws explosive fireballs with 2.5 times the power of TNT. The rocket launcher will be a Diamond Horse Armor item by default, but you can change it to whatever you want. The plugin will also add a </code>safety'' feature that lets you turn the rocket launcher on or off, so it doesn&#8217;t shoot fireballs when you don&#8217;t want it to.</p>
</div>
<div class="paragraph">
<p>First of all, like every other plugin, use the Bukkit Recipe to create a new plugin.</p>
</div>
<div class="paragraph">
<p>This plugin doesn&#8217;t need anything in <code>MyPlugin.java</code> except for a line that registers a Listener. This line can be found in <a href="#ExplosionPlugin_Registering_Listener">Register the SpongeWater Listener</a>. Change the <code>TNTListener</code> to <code>RocketLauncher</code> and create the new class by clicking on the stop sign.</p>
</div>
<div class="paragraph">
<p>In the Listener, the code from <a href="#RocketLauncher_Listener_Methods">RocketLauncher Listener methods</a> will have to be added. This code does all the work of firing fireballs and turning safety on/off.</p>
</div>
<div id="RocketLauncher_Listener_Methods" class="exampleblock">
<div class="title">Example 56. RocketLauncher Listener methods</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">Map&lt;String, Boolean&gt; safety = new HashMap(); <b class="conum">(1)</b>

@EventHandler
public void checkForNewPlayer(PlayerJoinEvent e){ <b class="conum">(2)</b>
    if (!(safety.containsKey(e.getPlayer().getName()))) {
        safety.put(e.getPlayer().getName(), true);
    }
}

@EventHandler
public void fireGun(PlayerInteractEvent e) { <b class="conum">(3)</b>
    Player p = e.getPlayer();

    if(e.getAction() == Action.LEFT_CLICK_AIR ||
        e.getAction() == Action.LEFT_CLICK_BLOCK){ <b class="conum">(3)</b>

        if(e.getPlayer().getItemInHand().getType()
            != Material.DIAMOND_BARDING){
            return;
        }

        if(safety.get(p.getName())){
            safety.put(p.getName(), false);
            p.sendMessage(ChatColor.AQUA + "Safety is now OFF.");
        } else {
            safety.put(p.getName(), true);
            p.sendMessage(ChatColor.AQUA + "Safety is now ON.");
        }

        return;
    }

    if (e.getAction() != Action.RIGHT_CLICK_AIR
        &amp;&amp; e.getAction() != Action.RIGHT_CLICK_BLOCK) { <b class="conum">(4)</b>
        return;
    }
    if (p.getItemInHand().getType() != Material.DIAMOND_BARDING ||
        safety.get(p.getName())) {
        return;
    }

    Fireball f = e.getPlayer().launchProjectile(Fireball.class);
    f.setIsIncendiary(false);
}

@EventHandler
public void makeBigExplosion(EntityExplodeEvent event) { <b class="conum">(5)</b>
    Entity e = event.getEntity();

    if (!(e instanceof Fireball)) {
        return;
    }
    Fireball f = (Fireball) e;
    if (f.isIncendiary()) {
        return;
    }
    World w = f.getWorld();
    w.createExplosion(f.getLocation(), 10.0F);
    event.setCancelled(true);
}</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>There are some important parts in this code:</p>
</div>
<div class="colist arabic">
<ol>
<li>
<p>A <code>HashMap</code> variable is created to store the safety state of all the players.</p>
</li>
<li>
<p>This method is called when a player joins the server. The server then generates the event and is captured as <code>PlayerJoinEvent</code> Bukkit class. If a player without a safety value joins, they get a default value of true, meaning that rocket launchers won&#8217;t fire for them unless they turn off the safety.</p>
</li>
<li>
<p>This method is called when a player interacts with an object or air. The server then generates an event and is captured as <code>PlayerInteractEvent</code> Bukkit class.</p>
</li>
<li>
<p>Specific interactions of a player can be identified by calling <code>getAction()</code> method on the event. If the player left clicks in air or on a block then we check the item in hand. If the item in hand with is diamond horse armor (DIAMOND_BARDING), then their safety state is switched from off to on or vice versa. The player is notified about their safety state. <code>get</code> and <code>put</code> are methods on <code>HashMap</code> to retrieve the stored values and save the values respectively.</p>
</li>
<li>
<p>If the player right clicks with a diamond horse armor, a fireball is created. It is not incendiary, meaning it won&#8217;t make fire. This is to identify it as a rocket launcher fireball, and not a different fireball.</p>
</li>
<li>
<p>This method is called when an entity explode event happens, as identified by <code>EntityExplodeEvent</code> Bukkit class. If the entity is a fireball and it is not incendiary, it will stop the explosion and make a much bigger one, because the fireball is from a rocket launcher.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Now, build the plugin and install it into your server. Get a Diamond Horse Armor from your inventory, turn the safety off by left-clicking with it, and blow up whatever you want! <a href="#RocketLauncher_Explosion">RocketLauncher explosion</a> shows the size of an explosion made by a rocket launcher.</p>
</div>
<div id="RocketLauncher_Explosion" class="imageblock">
<div class="content">
<img src="images/rocket-launcher-explosion.png" alt="rocket launcher explosion">
</div>
<div class="title">Figure 37. RocketLauncher explosion</div>
</div>
</div>
<div class="sect2">
<h3 id="_summary_10">Summary</h3>
<div class="paragraph">
<p>This chapter showed you some more examples of fun plugins that can be made using the Bukkit API. You added TNT magnets for blowing up stuff and rocket launchers to make even more explosions.</p>
</div>
<div class="paragraph">
<p>A void return type from Java method and an advanced Java concept of inheritance was also explained. A new Bukkit event handler that shows how to handle player interaction was explained as well.</p>
</div>
<div class="paragraph">
<p>How to handle when player interacts with an object or air</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="Warp_Board">Warp Board</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This is the last plugin that we will make in this book. The plugin will show you how to add a custom inventory with three clickable items. Each click will teleport you to a different place. It will be called a Warp Board.</p>
</div>
<div class="sect2">
<h3 id="_warp_board">Warp Board</h3>
<div class="paragraph">
<p>This plugin is very useful for large servers. When a player joins the game, they are given a compass in their inventory that is renamed ``Warp Board'' in gold letters. When they right-click with it, it opens up an inventory with the same size as a small chest. The inventory contains three items:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Emerald Block</p>
</li>
<li>
<p>Diamond Block</p>
</li>
<li>
<p>Redstone Block</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>When a player clicks on one of the icons, he/she gets teleported to a specific place. The player can also do the command <code>/warpboard</code> or <code>/wb</code> to open up the Warp Board. The Warp Board looks like as shown in <a href="#WarpBoard_Minecraft_Inventory">Warp Board</a>.</p>
</div>
<div id="WarpBoard_Minecraft_Inventory" class="imageblock">
<div class="content">
<img src="images/minecraft-warp-board.png" alt="minecraft warp board">
</div>
<div class="title">Figure 38. Warp Board</div>
</div>
<div class="paragraph">
<p>The bottom inventory is the player&#8217;s inventory, and the top inventory is the Warp Board. The compass is shown in the bottom left corner as part of player&#8217;s inventory and the three items are shown in the Warp Board&#8217;s inventory.</p>
</div>
</div>
<div class="sect2">
<h3 id="_registering_the_command">Registering the command</h3>
<div class="paragraph">
<p>First thing is to use the Bukkit Recipe and create a new plugin. Choose the plugin name as <code>WarpBoard</code> and the package name as <code>org.devoxx4kids.bukkit.plugins.warpboard</code>.</p>
</div>
<div class="paragraph">
<p>In <code>plugin.yml</code>, the <code>/warpboard</code> command will have to be registered. Complete <code>plugin.yml</code> is shown in <a href="#WarpBoard_Registering_Command">Registering the /warpboard command</a> and the updated portions are in bold.</p>
</div>
<div id="WarpBoard_Registering_Command" class="exampleblock">
<div class="title">Example 57. Registering the /warpboard command</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">name: WarpBoard
version: "1.0-SNAPSHOT"
author: Your Name
main: org.aditya.bukkit.plugins.warpboard.MyPlugin
commands:
    warpboard:
        description: Opens up a Warp Board from which players can teleport to different places.
        usage: /warpboard
        aliases: wb</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>It registers the <code>/warpboard</code> command with an alias: <code>/wb</code>. No arguments are needed to open the board.</p>
</div>
</div>
<div class="sect2">
<h3 id="_adding_command_functionality">Adding command functionality</h3>
<div class="paragraph">
<p>Now, the command handler in <code>MyPlugin.java</code> needs to be updated. For that, you will first have to make a variable at the top of the class file, like <a href="#WarpBoard_Inventory_Variable">WarpBoard inventory variable</a>.</p>
</div>
<div id="WarpBoard_Inventory_Variable" class="exampleblock">
<div class="title">Example 58. WarpBoard inventory variable</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">public Inventory inv;</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>This variable will store the inventory that will be shown to the player.</p>
</div>
<div class="paragraph">
<p>Next, two new methods will have to be added to the bottom of the file, before the last <code>}</code>. They are shown in <a href="#WarpBoard_MyPlugin_java_Methods">WarpBoard MyPlugin.java methods</a>.</p>
</div>
<div id="WarpBoard_MyPlugin_java_Methods" class="exampleblock">
<div class="title">Example 59. WarpBoard MyPlugin.java methods</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">@Override
public boolean onCommand(CommandSender sender,
                         Command cmd,
                         String label,
                         String[] args) { <b class="conum">(1)</b>
    if (!(cmd.getName().equals("warpboard"))) {
        return false;
    }
    if(!(sender instanceof Player)){
        return false;
    }

    openGUI(((Player) sender));

    return true;
}

public void openGUI(Player p) { <b class="conum">(2)</b>
    ItemStack isEmerald = new ItemStack(Material.EMERALD_BLOCK); <b class="conum">(3)</b>
    ItemMeta imEmerald = isEmerald.getItemMeta();
    imEmerald.setDisplayName(ChatColor.GOLD + "Warp to " <b class="conum">(4)</b>
        + ChatColor.GREEN + "Emerald Land");
    isEmerald.setItemMeta(imEmerald);

    ItemStack isDiamond = new ItemStack(Material.DIAMOND_BLOCK);
    ItemMeta imDiamond = isDiamond.getItemMeta();
    imDiamond.setDisplayName(ChatColor.GOLD + "Warp to "
        + ChatColor.BLUE + "Diamond Land");
    isDiamond.setItemMeta(imDiamond);

    ItemStack isRedstone = new ItemStack(Material.REDSTONE_BLOCK);
    ItemMeta imRedstone = isRedstone.getItemMeta();
    imRedstone.setDisplayName(ChatColor.GOLD + "Warp to "
        + ChatColor.RED + "Redstone Land");
    isRedstone.setItemMeta(imRedstone);

    inv = Bukkit.createInventory(p, 27, ChatColor.DARK_PURPLE <b class="conum">(5)</b>
        + "Warp Board");
    inv.setItem(12, isEmerald); <b class="conum">(6)</b>
    inv.setItem(13, isDiamond);
    inv.setItem(14, isRedstone);
    p.openInventory(inv); <b class="conum">(7)</b>
}</code></pre>
</div>
</div>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>This method is like all other <code>onCommand()</code> methods - it checks for the appropriate command name or one of its aliases. It also returns if the sender isn&#8217;t a player because a command block or the console cannot open an inventory. A check for arguments is not required because no arguments are needed for this command. If every thing looks good then it invokes another method and pass the player as a parameter.</p>
</li>
<li>
<p>The second method, <code>openGUI(Player p)</code>, is where all the magic happens.</p>
</li>
<li>
<p>Creates three new <code>ItemStack</code> variables, one each for emerald, diamond, and redstone block. <code>ItemStack</code> is used to create a stack of items. Different metadata can be attached to each stack, such as display name and enchantment of different levels.</p>
</li>
<li>
<p>Sets the name of the item to text like <code>Warp to Emerald Land'', one for each block. The text </code>Warp to'' is highlighted in gold color and the name of the element is highlighted in green, blue, and red color respectively.</p>
</li>
<li>
<p>Create the inventory with the name ``Warp Board'' in purple letters. The first parameter identifies the holder of the inventory, the player in this case. The second parameter defines the size of the inventory, must be a multiple of 9. Third and the last parameter is the title of the inventory that is displayed when it is viewed.</p>
</li>
<li>
<p>Set the three middle slots, identified by 12, 13, and 14, in the inventory to the previously created `ItemStack`s.</p>
</li>
<li>
<p>Opens the inventory and show it to the player.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_create_the_listener_and_add_event_handlers">Create the Listener and add event handlers</h3>
<div class="paragraph">
<p>Lastly, a Listener will be created to check for the items being clicked on. Create a Listener by clicking on the stop sign and selecting the appropriate option. Add event handler code from <a href="#WarpBoard_Listener_Methods">WarpBoard Listener methods</a> to the Listener.</p>
</div>
<div id="WarpBoard_Listener_Methods" class="exampleblock">
<div class="title">Example 60. WarpBoard Listener methods</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">@EventHandler
public void giveWarpBoardCompass(PlayerJoinEvent e){ <b class="conum">(1)</b>
    Player p = e.getPlayer();
    ItemStack is = new ItemStack(Material.COMPASS);
    ItemMeta im = is.getItemMeta();
    im.setDisplayName(ChatColor.GOLD + "Warp Board");
    is.setItemMeta(im);
    p.getInventory().setItem(0, is);
}

@EventHandler
public void InventoryClick(InventoryClickEvent e) { <b class="conum">(2)</b>
    Player p = (Player) e.getWhoClicked(); <b class="conum">(3)</b>

    if (!e.getInventory().getTitle() <b class="conum">(4)</b>
        .contains(ChatColor.DARK_PURPLE + "Warp Board")) {
        return;
    }
    e.setCancelled(true);

    if (e.getCurrentItem().getType() == Material.EMERALD_BLOCK) { <b class="conum">(5)</b>
        p.sendMessage(ChatColor.GOLD + "Warping to "
            + ChatColor.GREEN + "Emerald Land");
        p.teleport(new Location(p.getWorld(), 0.5, 100, 0.5));
    } else if (e.getCurrentItem().getType() == Material.DIAMOND_BLOCK) {
        p.sendMessage(ChatColor.GOLD + "Warping to "
            + ChatColor.BLUE + "Diamond Land");
        p.teleport(new Location(p.getWorld(), 100.5, 100, 0.5));
    } else if (e.getCurrentItem().getType() == Material.REDSTONE_BLOCK) {
        p.sendMessage(ChatColor.GOLD + "Warping to "
            + ChatColor.RED + "Redstone Land");
        p.teleport(new Location(p.getWorld(), 200.5, 100, 0.5));
    }
}

@EventHandler
public void openCustomInventory(PlayerInteractEvent e){ <b class="conum">(6)</b>
    if(e.getAction() != Action.RIGHT_CLICK_AIR &amp;&amp;
        e.getAction() != Action.RIGHT_CLICK_BLOCK){
        return;
    }
    if(!e.getItem().getItemMeta().getDisplayName()
        .equals(ChatColor.GOLD + "Warp Board")){
        return;
    }
    e.getPlayer().performCommand("warpboard");
}</code></pre>
</div>
</div>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Checks for a <code>PlayerJoinEvent</code>, which happens when a player joins the server. Gives the player a compass when they join. It is called ``Warp Board'' in gold letters, which is impossible to legitimately obtain in Minecraft - you need plugins to do it for you. That way, players cannot craft Warp Boards. The compass is placed in the first slot of the player&#8217;s hotbar.</p>
</li>
<li>
<p>This event handler is called when the player clicks a slot in inventory. The server generates an event and this is captured as <code>InventoryClickEvent</code> in Bukkit.</p>
</li>
<li>
<p>Player who clicked on the inventory is obtained in <code>p</code> variable.</p>
</li>
<li>
<p>If the clicked inventory is not our <code>`Warp Board'' inventory then further execution of the method is halted by using a `return</code> statement.</p>
</li>
<li>
<p>We learned about <code>if' statements in earlier chapters. They are useful if you want some statements to execute when a particular condition is met. Java extends the `if</code> statements and also provide <em>if-else</em> statements. The <code>else</code> part is immediately after the code statements of <code>if</code> block, and is followed by another set of statements which are executed if the condition is not met. In addition, the <code>else</code> statement may be combined with an additional <code>if</code> statement. This allows to create a sequence of sophisticated <code>if</code> and <code>else-if</code> blocks and execute certain piece of code based upon different conditions.</p>
</li>
<li>
<p>This event handler is called when the player interacts with an object and is captured as <code>PlayerInteractEvent</code> Bukkit class. Checks for a player right-clicking with a compass renamed to <code>`Warp Board'' in gold letters. If that happens, it does the `/warpboard</code> command from the player who clicked with the compass. Note, a command is issued from the event handler here using the <code>performCommand()</code> method.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_verify_that_it_works_2">Verify that it works</h3>
<div class="paragraph">
<p>Now, you can build the plugin, install it, and restart or reload your server for the changes to take place. You should start off with the compass mentioned in the beginning of this plugin&#8217;s explanation. Right-click with it to open the Warp Board. Alternatively you can use the <code>/warpboard</code> command to open it. Warp to all the places and build things at each of those places. The items in the Warp Board are renamed to ``Warp to [Item Name] Land'', so you should build things out of their corresponding warp item. One example of a warp is shown in <a href="#WarpBoard_Emerald_Land">Emerald Land warpboard example</a> and it is used with the Emerald Land warp.</p>
</div>
<div id="WarpBoard_Emerald_Land" class="imageblock">
<div class="content">
<img src="images/minecraft-emerald-land-warp.png" alt="minecraft emerald land warp">
</div>
<div class="title">Figure 39. Emerald Land warpboard example</div>
</div>
</div>
<div class="sect2">
<h3 id="_summary_11">Summary</h3>
<div class="paragraph">
<p>This chapter showed you one last plugin that can be made with Bukkit. You added a Warp Board that lets you teleport to different places, and you also added a command and a compass to open it. In addition we also learned about if-else statements in Java.</p>
</div>
<div class="paragraph">
<p>This is the last plugin that will be explained in this book, but you can try making some plugins yourself! <a href="#Bukkit_javadoc_links">Bukkit Javadocs for different builds</a> provide a complete summary of where to find complete Bukkit API for different builds.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="Managing_your_server_with_CraftBukkit">Managing your CraftBukkit server</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Part I of this book explained how to start your own Bukkit server and install plugins in it. The commands were simple and easy to understand. However you feel the need of taking control of your server and managing it more efficiently. This chapter will refresh the introduction to Bukkit and CraftBukkit and the difference between them. It will also explain how to run a Minecraft server using CraftBukkit and show basic commands for managing the server.</p>
</div>
<div class="sect2">
<h3 id="_bukkit_api">Bukkit API</h3>
<div class="paragraph">
<p>Bukkit is a free, open-source, software project that provide the means to extend Minecraft multiplayer servers. It is neither the official modding Application Programming Interface (API) nor supported by Mojang, yet. However it is one of the most popular way to build server-side plugins, which are plugins that only work on servers. That means you cannot change any client-side functionality using Bukkit.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">What is the difference between mods and plugins?</div>
<div class="paragraph">
<p>Mods involve <em>modifying</em> the source code of Minecraft to do something or add additional functionality. Plugins are extra software that <em>plug</em> into an application, instead of modifying the source code. Mods generally provide a framework that recognize plugins built using that framework. This makes mod free-standing, while plugins are generally built on the framework provided by mods.</p>
</div>
<div class="paragraph">
<p>For example, CraftBukkit is a modded Minecraft server that recognizes plugins built using Bukkit API.</p>
</div>
</div>
</div>
<div class="paragraph">
<p>The <code>vanilla'' or un-modded server as downloaded from <a href="http://minecraft.net" class="bare">http://minecraft.net</a> does not understand the plugins built using Bukkit API. CraftBukkit is a </code>modified'' or ``modded'' server that does understand this API. It is available for download at <a href="https://dl.bukkit.org/downloads/craftbukkit/" class="bare">https://dl.bukkit.org/downloads/craftbukkit/</a> at no cost at all. So plugin builders use Bukkit API to build <em>plugins</em> and install them on their CraftBukkit server.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">What is the difference between Bukkit and CraftBukkit?</div>
<div class="paragraph">
<p>Bukkit is the API used by developers to make plugins. CraftBukkit is the modded Minecraft server that understands plugins built using Bukkit API.</p>
</div>
</div>
</div>
<div class="paragraph">
<p>Multiple plugins with different functionalities can be easily installed on CraftBukkit server. Multiple clients can then connect to this server and all use the same plugins as shown in <a href="#Bukkit_plugins">Bukkit Plugins</a>.</p>
</div>
<div id="Bukkit_plugins" class="imageblock">
<div class="content">
<img src="images/craftbukkit-mods.png" alt="CraftBukkit Mods">
</div>
<div class="title">Figure 40. Bukkit Plugins</div>
</div>
<div class="paragraph">
<p>This book will teach you how to build Bukkit plugins and install them on CraftBukkit server.</p>
</div>
</div>
<div class="sect2">
<h3 id="Which_CraftBukkit_Build_to_use">Which CraftBukkit build to use ?</h3>
<div class="paragraph">
<p>CraftBukkit can be downloaded from <a href="https://dl.bukkit.org/downloads/craftbukkit/" class="bare">https://dl.bukkit.org/downloads/craftbukkit/</a>. It is typically available in three different builds:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Recommended</p>
</li>
<li>
<p>Beta</p>
</li>
<li>
<p>Development</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>These builds differ in terms of what version of Minecraft is supported and what items, blocks, and entities can be changed. For example, the support at the time of this writing is shown in <a href="#Bukkit_Builds">Bukkit Builds</a>.</p>
</div>
<table id="Bukkit_Builds" class="tableblock frame-all grid-all" style="width: 50%;">
<caption class="title">Table 9. Bukkit Builds</caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Build</th>
<th class="tableblock halign-left valign-top">Version</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Recommended</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1.6.4-R2.0</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Beta</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1.7.9-R0.2</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Development</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1.7.10-R0.1</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Each version is split into two parts, separated by a <code>-</code>. The first part indicates the supported Minecraft version. Multiple releases are made for each build as new functionality is added. The second part indicates the release number for that particular build. The first release for a build is typically labeled 0.1 and generally incremented by 0.1 with each release.</p>
</div>
<div class="paragraph">
<p>At the time of this writing, the `Recommended' build is most stable and tested with Minecraft 1.6.4. `Development' is where support for the latest Minecraft version is available, 1.7.10 in this case. As you can imagine, all the latest and cool features are added here first and so there might be some bugs with this build. `Beta' build is in between `Recommended' and `Development' and can be used if a more recent Minecraft version server is needed but with some stability.</p>
</div>
</div>
<div class="sect2">
<h3 id="Running_CraftBukkit_Server">Run a CraftBukkit server</h3>
<div class="paragraph">
<p>Most of the publicly available Minecraft servers use Bukkit, because it is an easy solution to problems like world protection and minigame making. World protection is making sure certain players can&#8217;t break blocks in certain areas. For example, you could specify that only you and people you trust can break blocks at your spawn area. Minigames are a fun part of some servers. They include things like Player vs. Player arenas where you fight with other players and Spleef arenas where you try to break blocks underneath other players. Some Bukkit plugins allow you to easily create miningames like that and make sure that they can&#8217;t be broken or exploited.</p>
</div>
<div class="paragraph">
<p>There are so many plugins for Bukkit (over 10,000) that it can do pretty much anything! You can find all of these plugins at <a href="http://plugins.bukkit.org/" class="bare">http://plugins.bukkit.org/</a>.</p>
</div>
<div class="paragraph">
<p>It is extremely easy to install a Bukkit server, and very easy to install plugins after that. To do this, first go to <a href="https://dl.bukkit.org/downloads/craftbukkit/" class="bare">https://dl.bukkit.org/downloads/craftbukkit/</a> and download one of the CraftBukkit builds. The recommended build is usually the most bug-free, and would probably be the best choice. The build is downloaded as a JAR file and server can be easily started using the command shown in <a href="#Starting_CraftBukkit_Server">Start a CraftBukkit server</a>.</p>
</div>
<div id="Starting_CraftBukkit_Server" class="exampleblock">
<div class="title">Example 61. Start a CraftBukkit server</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-text" data-lang="text">java -jar &lt;JAR FILE NAME&gt;</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>As of this writing 1.6.4-R2.0 is the recommended build but we&#8217;ll be using the beta build 1.7.9-R0.2 so that more recent functionality of the game can be used. So the command to start the server for us is shown in <a href="#Starting_CraftBukkit_179_Server">Start a CraftBukkit 1.7.9 Server</a>.</p>
</div>
<div id="Starting_CraftBukkit_179_Server" class="exampleblock">
<div class="title">Example 62. Start a CraftBukkit 1.7.9 Server</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-text" data-lang="text">java -jar craftbukkit-1.7.9-R0.2.jar</code></pre>
</div>
</div>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
<div class="title">Starting the server in a separate directory</div>
<div class="paragraph">
<p>It is strongly recommended to copy this JAR file to a new directory and then start the server. This is because starting the server will generate a bunch of files and directories and this will keep your changes contained in a single directory.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Starting the server shows output in <a href="#CraftBukkit_server_log">CraftBukkit server log</a>.</p>
</div>
<div id="CraftBukkit_server_log" class="exampleblock">
<div class="title">Example 63. CraftBukkit server log</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre>Loading libraries, please wait...
[17:49:30 INFO]: Starting minecraft server version 1.7.9 <b class="conum">(1)</b>
[17:49:30 INFO]: Loading properties <b class="conum">(2)</b>
[17:49:30 WARN]: server.properties does not exist <b class="conum">(3)</b>
[17:49:30 INFO]: Generating new properties file <b class="conum">(4)</b>
[17:49:30 INFO]: Default game type: SURVIVAL <b class="conum">(5)</b>
[17:49:30 INFO]: Generating keypair
[17:49:30 INFO]: Starting Minecraft server on *:25565 <b class="conum">(6)</b>
[17:49:30 INFO]: This server is running CraftBukkit version git-Bukkit-1.7.9-R0.1-10-g8688bd4-b3092jnks (MC: 1.7.9) (Implementing API version 1.7.9-R0.2)
[17:49:30 WARN]: Failed to load user banlist:
java.io.FileNotFoundException: banned-players.json (No such file or directory) <b class="conum">(7)</b>
	at java.io.FileInputStream.open(Native Method) ~[?:1.8.0_20]
	at java.io.FileInputStream.&lt;init&gt;(FileInputStream.java:138) ~[?:1.8.0_20]
	at net.minecraft.util.com.google.common.io.Files.newReader(Files.java:86) ~[craftbukkit-1.7.9-R0.2.jar:git-Bukkit-1.7.9-R0.1-10-g8688bd4-b3092jnks]
	at net.minecraft.server.v1_7_R3.JsonList.load(JsonList.java:147) ~[craftbukkit-1.7.9-R0.2.jar:git-Bukkit-1.7.9-R0.1-10-g8688bd4-b3092jnks]
	at net.minecraft.server.v1_7_R3.DedicatedPlayerList.y(SourceFile:99) [craftbukkit-1.7.9-R0.2.jar:git-Bukkit-1.7.9-R0.1-10-g8688bd4-b3092jnks]
	at net.minecraft.server.v1_7_R3.DedicatedPlayerList.&lt;init&gt;(SourceFile:25) [craftbukkit-1.7.9-R0.2.jar:git-Bukkit-1.7.9-R0.1-10-g8688bd4-b3092jnks]
	at net.minecraft.server.v1_7_R3.DedicatedServer.init(DedicatedServer.java:126) [craftbukkit-1.7.9-R0.2.jar:git-Bukkit-1.7.9-R0.1-10-g8688bd4-b3092jnks]
	at net.minecraft.server.v1_7_R3.MinecraftServer.run(MinecraftServer.java:436) [craftbukkit-1.7.9-R0.2.jar:git-Bukkit-1.7.9-R0.1-10-g8688bd4-b3092jnks]
	at net.minecraft.server.v1_7_R3.ThreadServerApplication.run(SourceFile:628) [craftbukkit-1.7.9-R0.2.jar:git-Bukkit-1.7.9-R0.1-10-g8688bd4-b3092jnks]
[17:49:30 WARN]: Failed to load ip banlist:
java.io.FileNotFoundException: banned-ips.json (No such file or directory) <b class="conum">(8)</b>
	at java.io.FileInputStream.open(Native Method) ~[?:1.8.0_20]
	at java.io.FileInputStream.&lt;init&gt;(FileInputStream.java:138) ~[?:1.8.0_20]
	at net.minecraft.util.com.google.common.io.Files.newReader(Files.java:86) ~[craftbukkit-1.7.9-R0.2.jar:git-Bukkit-1.7.9-R0.1-10-g8688bd4-b3092jnks]
	at net.minecraft.server.v1_7_R3.JsonList.load(JsonList.java:147) ~[craftbukkit-1.7.9-R0.2.jar:git-Bukkit-1.7.9-R0.1-10-g8688bd4-b3092jnks]
	at net.minecraft.server.v1_7_R3.DedicatedPlayerList.x(SourceFile:91) [craftbukkit-1.7.9-R0.2.jar:git-Bukkit-1.7.9-R0.1-10-g8688bd4-b3092jnks]
	at net.minecraft.server.v1_7_R3.DedicatedPlayerList.&lt;init&gt;(SourceFile:27) [craftbukkit-1.7.9-R0.2.jar:git-Bukkit-1.7.9-R0.1-10-g8688bd4-b3092jnks]
	at net.minecraft.server.v1_7_R3.DedicatedServer.init(DedicatedServer.java:126) [craftbukkit-1.7.9-R0.2.jar:git-Bukkit-1.7.9-R0.1-10-g8688bd4-b3092jnks]
	at net.minecraft.server.v1_7_R3.MinecraftServer.run(MinecraftServer.java:436) [craftbukkit-1.7.9-R0.2.jar:git-Bukkit-1.7.9-R0.1-10-g8688bd4-b3092jnks]
	at net.minecraft.server.v1_7_R3.ThreadServerApplication.run(SourceFile:628) [craftbukkit-1.7.9-R0.2.jar:git-Bukkit-1.7.9-R0.1-10-g8688bd4-b3092jnks]
[17:49:30 WARN]: Failed to load operators list:
java.io.FileNotFoundException: ops.json (No such file or directory) <b class="conum">(9)</b>
	at java.io.FileInputStream.open(Native Method) ~[?:1.8.0_20]
	at java.io.FileInputStream.&lt;init&gt;(FileInputStream.java:138) ~[?:1.8.0_20]
	at net.minecraft.util.com.google.common.io.Files.newReader(Files.java:86) ~[craftbukkit-1.7.9-R0.2.jar:git-Bukkit-1.7.9-R0.1-10-g8688bd4-b3092jnks]
	at net.minecraft.server.v1_7_R3.JsonList.load(JsonList.java:147) ~[craftbukkit-1.7.9-R0.2.jar:git-Bukkit-1.7.9-R0.1-10-g8688bd4-b3092jnks]
	at net.minecraft.server.v1_7_R3.DedicatedPlayerList.z(SourceFile:107) [craftbukkit-1.7.9-R0.2.jar:git-Bukkit-1.7.9-R0.1-10-g8688bd4-b3092jnks]
	at net.minecraft.server.v1_7_R3.DedicatedPlayerList.&lt;init&gt;(SourceFile:29) [craftbukkit-1.7.9-R0.2.jar:git-Bukkit-1.7.9-R0.1-10-g8688bd4-b3092jnks]
	at net.minecraft.server.v1_7_R3.DedicatedServer.init(DedicatedServer.java:126) [craftbukkit-1.7.9-R0.2.jar:git-Bukkit-1.7.9-R0.1-10-g8688bd4-b3092jnks]
	at net.minecraft.server.v1_7_R3.MinecraftServer.run(MinecraftServer.java:436) [craftbukkit-1.7.9-R0.2.jar:git-Bukkit-1.7.9-R0.1-10-g8688bd4-b3092jnks]
	at net.minecraft.server.v1_7_R3.ThreadServerApplication.run(SourceFile:628) [craftbukkit-1.7.9-R0.2.jar:git-Bukkit-1.7.9-R0.1-10-g8688bd4-b3092jnks]
[17:49:30 WARN]: Failed to load white-list:
java.io.FileNotFoundException: whitelist.json (No such file or directory) <b class="conum">(10)</b>
	at java.io.FileInputStream.open(Native Method) ~[?:1.8.0_20]
	at java.io.FileInputStream.&lt;init&gt;(FileInputStream.java:138) ~[?:1.8.0_20]
	at net.minecraft.util.com.google.common.io.Files.newReader(Files.java:86) ~[craftbukkit-1.7.9-R0.2.jar:git-Bukkit-1.7.9-R0.1-10-g8688bd4-b3092jnks]
	at net.minecraft.server.v1_7_R3.JsonList.load(JsonList.java:147) ~[craftbukkit-1.7.9-R0.2.jar:git-Bukkit-1.7.9-R0.1-10-g8688bd4-b3092jnks]
	at net.minecraft.server.v1_7_R3.DedicatedPlayerList.B(SourceFile:123) [craftbukkit-1.7.9-R0.2.jar:git-Bukkit-1.7.9-R0.1-10-g8688bd4-b3092jnks]
	at net.minecraft.server.v1_7_R3.DedicatedPlayerList.&lt;init&gt;(SourceFile:30) [craftbukkit-1.7.9-R0.2.jar:git-Bukkit-1.7.9-R0.1-10-g8688bd4-b3092jnks]
	at net.minecraft.server.v1_7_R3.DedicatedServer.init(DedicatedServer.java:126) [craftbukkit-1.7.9-R0.2.jar:git-Bukkit-1.7.9-R0.1-10-g8688bd4-b3092jnks]
	at net.minecraft.server.v1_7_R3.MinecraftServer.run(MinecraftServer.java:436) [craftbukkit-1.7.9-R0.2.jar:git-Bukkit-1.7.9-R0.1-10-g8688bd4-b3092jnks]
	at net.minecraft.server.v1_7_R3.ThreadServerApplication.run(SourceFile:628) [craftbukkit-1.7.9-R0.2.jar:git-Bukkit-1.7.9-R0.1-10-g8688bd4-b3092jnks]
[17:49:30 INFO]: Preparing level "world" <b class="conum">(11)</b>
[17:49:30 WARN]: Unable to find spawn biome
[17:49:31 INFO]: Preparing start region for level 0 (Seed: 180975645564076834)
[17:49:31 INFO]: ----- Bukkit Auto Updater -----
[17:49:31 INFO]: It appears that you're running a Beta Build, when you've specified in bukkit.yml that you prefer to run Recommended Builds.
[17:49:31 INFO]: If you would like to be kept informed about new Beta Build releases, it is recommended that you change 'preferred-channel' in your bukkit.yml to 'beta'.
[17:49:31 INFO]: With that set, you will be told whenever a new version is available for download, so that you can always keep up to date and secure with the latest fixes.
[17:49:31 INFO]: If you would like to disable this warning, simply set 'suggest-channels' to false in bukkit.yml.
[17:49:31 INFO]: ----- ------------------- -----
[17:49:32 INFO]: Preparing spawn area: 16%
[17:49:33 INFO]: Preparing spawn area: 40%
[17:49:34 INFO]: Preparing spawn area: 61%
[17:49:35 INFO]: Preparing spawn area: 84%
[17:49:35 INFO]: Preparing start region for level 1 (Seed: 180975645564076834)
[17:49:36 INFO]: Preparing spawn area: 30%
[17:49:37 INFO]: Preparing spawn area: 59%
[17:49:38 INFO]: Preparing spawn area: 97%
[17:49:39 INFO]: Preparing start region for level 2 (Seed: 180975645564076834)
[17:49:40 INFO]: Done (9.175s)! For help, type "help" or "?"</pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>It also opens up the Minecraft console for giving any commands on the server. Your output may look slightly different based upon the version of JAR file. Lets understand what happened during server startup.</p>
</div>
<div class="colist arabic">
<ol>
<li>
<p>This line tells you which version of Minecraft you are running. In this case, it is version 1.7.9.</p>
</li>
<li>
<p>Tries to load <code>server.properties</code> file. This file stores all the settings for a multiplayer server (very self-explanatory!) using <code>name=value</code> format where <code>name</code> is the name of the property and <code>value</code> is the value of the property. For example, <code>max-players=20</code> define the maximum number of players that can play on the server at the same time. The property name is fixed and the property values can be edited. Any changes to this file require a server restart or reload. Some other properties that it includes, but is not limited to, whether the nether is allowed, whether command blocks are allowed, and whether generated structures appear in the world.</p>
</li>
<li>
<p>Indicates that the file can not be found. This is expected because we are running in a directory with no prior contents.</p>
</li>
<li>
<p>This line indicates that the server is creating a new <code>server.properties</code> file. Subsequent runs of the server will reuse this file.</p>
</li>
<li>
<p>Defines the gamemode to be creative, survival, hardcore, or spectator. The default mode is surival.</p>
</li>
<li>
<p>Shows the port on which Minecraft is running. By default, Minecraft starts on port 25565. It can be started on a different port as shown in <a href="#Running_Minecraft_on_a_different_port">Running Minecraft on a different port</a>.</p>
</li>
<li>
<p>This line says <code>banned-players.json</code> is not found. This file contain information about player names that are banned on the server. This file is created during first run of the server and reused during subsequent runs.</p>
</li>
<li>
<p>This line says <code>banned-ips.json</code> is not found. This file contain information about IP address of the machines that are banned on the server. This means no player from that IP address can join the server. Like <code>banned-players.json</code>, this file is created during first run and used during subsequent runs.</p>
</li>
<li>
<p>This line says <code>ops.json</code> file is not found. This file contain information about operators on the server, and like <code>server.properties</code>, does not exist on this newly created server. Like previous files, this file is also created during first run of the server and reused during subsequent runs.</p>
</li>
<li>
<p>This line says <code>white-list.json</code> file does not exist. This is yet again very similar to <code>server.properties</code> and <code>ops.json</code>. This file contains the server whitelist and is a way to make sure only a certain set of players can join a server. If you aren&#8217;t on the whitelist and it is turned on, you can&#8217;t join the server.</p>
</li>
<li>
<p>The last few lines talk about preparing the spawn area. The first few lines with <code>Preparing spawn area:</code> are for the Overworld. Levels 1 and 2 are the Nether and The End, respectively. These lines are printed when the server is preparing the start area in the world.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>The empty directory is populated with the files and directories as shown in <a href="#Bukkit_Server_Directory_Structure">Bukkit server directory structure</a>.</p>
</div>
<div id="Bukkit_Server_Directory_Structure" class="imageblock">
<div class="content">
<img src="images/bukkit-1.7.2-directory.png" alt="bukkit 1.7.2 directory">
</div>
<div class="title">Figure 41. Bukkit server directory structure</div>
</div>
<div class="paragraph">
<p>The purpose of each file and directory and how to use it is explained in <a href="#Bukkit_server_directory_explanation">Bukkit Server Directory Explanation</a>.</p>
</div>
<table id="Bukkit_server_directory_explanation" class="tableblock frame-all grid-all spread">
<caption class="title">Table 10. Bukkit Server Directory Explanation</caption>
<colgroup>
<col style="width: 14%;">
<col style="width: 42%;">
<col style="width: 42%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Purpose</th>
<th class="tableblock halign-left valign-top">How to use it</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">banned-ips.json</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">This file contains the list of IP addresses banned from your server.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Use the <code>ban-ip</code> command shown in <a href="#Minecraft_ban_ip_command">Minecraft ban IP command</a>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">banned-players.json</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">This file contains the list of players are banned from your server.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Use the <code>ban</code> command shown in <a href="#Minecraft_ban_player_command">Minecraft ban player command</a>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">bukkit.yml</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">This file is the main configuration file for Bukkit.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Do not change this file.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">help.yml</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">This file configures how help messages are shown when you use /help for certain commands.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Do not change this file.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">logs</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">This directory contains all of your server logs. Server logs tell you what happened on the server on a specific day.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Do not change any of the logs in this directory as they can be useful for figuring out server crashes or glitches.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ops.json</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">This file tells you which players are operators on the server.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">To op someone on your server, use <a href="#Making_a_player_an_operator">Making a player an operator</a> command.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">permissions.yml</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">This file tells you what commands specific players can do.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Do not change this file. The server will automatically change it.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">plugins</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">This directory contains all of the plugins you have installed on your server.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">When you want to install a new plugin, put it in this folder. When you want to delete a plugin from your server, delete it from this directory.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">server.properties</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">This file contains the server properties as explained earlier.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">You can change this to your liking using any text editor. Server restarts are required if this file is changed.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">white-list.json</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">This file contains information about the whitelist on the server.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">To add someone to the whitelist, use <code>whitelist add &lt;PLAYER&gt;</code> command.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">world</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">This directory contains the information for the overworld dimension in your server.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Do not change this directory unless your world is corrupted. If your world is corrupted, delete this folder and run your server again to regenerate the world.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">world_nether</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">This directory contains the information for the nether dimension in your server.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Do not change this directory unless your nether dimension is corrupted. If your world is corrupted, delete this folder and run your server again to regenerate the world.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">world_the_end</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">This directory contains the information for the end dimension in your server.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Do not change this directory unless your end dimension is corrupted. If your world is corrupted, delete this folder and run your server again to regenerate the world.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>This book will mostly deal with the <code>plugins</code> directory as that&#8217;s where the plugins are installed. Note that this directory is created only after the server is started at least once.</p>
</div>
<div class="paragraph">
<p>Minecraft server can also be started by specifying certain options during the startup. Complete list of options can be found by specifying <code>-help</code> when starting the server as shown in <a href="#Start_Minecraft_server_with_options">Start Minecraft server with options</a>.</p>
</div>
<div id="Start_Minecraft_server_with_options" class="exampleblock">
<div class="title">Example 73. Start Minecraft server with options</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-text" data-lang="text">~&gt; java -jar ~/Downloads/craftbukkit-1.7.9-R0.2.jar -help
Option                                  Description
------                                  -----------
-?, --help                              Show the help
-C, --commands-settings &lt;File: Yml      File for command settings (default:
  file&gt;                                   commands.yml)
-P, --plugins &lt;File: Plugin directory&gt;  Plugin directory to use (default:
                                          plugins)
-W, --universe, --world-container, --   World container
  world-dir &lt;File: Directory
  containing worlds&gt;
-b, --bukkit-settings &lt;File: Yml file&gt;  File for bukkit settings (default:
                                          bukkit.yml)
-c, --config &lt;File: Properties file&gt;    Properties file to use (default:
                                          server.properties)
-d, --date-format &lt;SimpleDateFormat:    Format of the date to display in the
  Log date format&gt;                        console (for log entries)
--demo                                  Demo mode
-h, --host, --server-ip &lt;Hostname or    Host to listen on
  IP&gt;
--log-append &lt;Boolean: Log append&gt;      Whether to append to the log file
                                          (default: true)
--log-count &lt;Integer: Log count&gt;        Specified how many log files to cycle
                                          through (default: 1)
--log-limit &lt;Integer: Max log size&gt;     Limits the maximum size of the log
                                          file (0 = unlimited) (default: 0)
--log-pattern &lt;Log filename&gt;            Specfies the log filename pattern
                                          (default: server.log)
--log-strip-color                       Strips color codes from log file
--noconsole                             Disables the console
--nojline                               Disables jline and emulates the
                                          vanilla console
-o, --online-mode &lt;Boolean:             Whether to use online authentication
  Authentication&gt;
-p, --port, --server-port &lt;Integer:     Port to listen on
  Port&gt;
-s, --max-players, --size &lt;Integer:     Maximum amount of players
  Server size&gt;
-v, --version                           Show the CraftBukkit Version
-w, --level-name, --world &lt;World name&gt;  World name</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>The values specified on the command line when starting the server override the values specified in <code>server.properties</code> file. For example, Bukkit servers require an Internet connection to authenticate usernames with Mojang. By default, the game cannot be played if there is no Internet connection. However the server can be started in an <code>offline' mode where this authentication is disabled. Typically players will set the `offline-mode</code> property to <code>false</code> in <code>server.properties</code> to run the server in offline mode. Now this can alternatively be achieved by running the server as shown in <a href="#Start_Bukkit_server_in_offline_mode">Start Bukkit server in offline mode</a>.</p>
</div>
<div id="Start_Bukkit_server_in_offline_mode" class="exampleblock">
<div class="title">Example 74. Start Bukkit server in offline mode</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-text" data-lang="text">java -jar craftbukkit-1.7.2-R0.3.jar -o false</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="Manage_CraftBukkit_Server">Manage a CraftBukkit Server</h3>
<div class="paragraph">
<p>Several commands are available to manage your CraftBukkit server. Some of them are explained below.</p>
</div>
<div class="paragraph">
<p>The server can be stopped by giving the <code>stop</code> command in the console as shown in <a href="#Stop_CraftBukkit_server">Stop CraftBukkit server</a>.</p>
</div>
<div id="Stop_CraftBukkit_server" class="exampleblock">
<div class="title">Example 75. Stop CraftBukkit server</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-text" data-lang="text">[13:31:14 INFO]: CONSOLE: Stopping the server.
[13:31:14 INFO]: Stopping server
[13:31:14 INFO]: Saving players
[13:31:14 INFO]: Saving worlds
[13:31:14 INFO]: Saving chunks for level 'world'/Overworld
[13:31:14 INFO]: Saving chunks for level 'world_nether'/Nether
[13:31:14 INFO]: Saving chunks for level 'world_the_end'/The End
[13:31:14 INFO]: Stopping server</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>All the plugins can be reloaded by giving the <code>reload</code> command in the console as shown in <a href="#Reload_plugins_and_CraftBukkit_server_configuration">Reload plugins and CraftBukkit server configuration</a>. There is no need to stop and restart the server in this case. In addition, this also loads <code>permissions.yml</code> which define the permissions assigned to each player.</p>
</div>
<div id="Reload_plugins_and_CraftBukkit_server_configuration" class="exampleblock">
<div class="title">Example 76. Reload plugins and CraftBukkit server configuration</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-text" data-lang="text">&gt;reload
[13:31:30 INFO]: Server permissions file permissions.yml is empty, ignoring it
[13:31:30 INFO]: CONSOLE: Reload complete.</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>The log message indicate that the server does not have any <code>permissions.yml</code> file and so no permissions are assigned to any user yet. Also, no plugins have been installed in the server yet and so no message is shown for them. Later chapters will show more detailed messages when the server is reloaded with plugins installed.</p>
</div>
<div class="paragraph">
<p>The complete list of commands can be seen by typing <code>help</code> in the console and see the output as shown in <a href="#CraftBukkit_help_command">CraftBukkit help command</a>.</p>
</div>
<div id="CraftBukkit_help_command" class="exampleblock">
<div class="title">Example 77. CraftBukkit help command</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre>&gt;help
[21:41:33 INFO]: --------- Help: Index ---------------------------
[21:41:33 INFO]: Use /help [n] to get page n of help.
[21:41:33 INFO]: Aliases: Lists command aliases
[21:41:33 INFO]: Bukkit: All commands for Bukkit
[21:41:33 INFO]: Minecraft: All commands for Minecraft
[21:41:33 INFO]: /achievement: Gives the specified player an achievement or changes a statistic value. Use '*' to give all achievements.
[21:41:33 INFO]: /ban: Prevents the specified player from using this server
[21:41:33 INFO]: /ban-ip: Prevents the specified IP address from using this server
[21:41:33 INFO]: /banlist: View all players banned from this server
[21:41:33 INFO]: /clear: Clears the player's inventory. Can specify item and data filters too.
[21:41:33 INFO]: /defaultgamemode: Set the default gamemode
[21:41:33 INFO]: /deop: Takes the specified player's operator status
[21:41:33 INFO]: /difficulty: Sets the game difficulty
[21:41:33 INFO]: /effect: Adds/Removes effects on players
[21:41:33 INFO]: /enchant: Adds enchantments to the item the player is currently holding. Specify 0 for the level to remove an enchantment. Specify force to ignore normal enchantment restrictions
[21:41:33 INFO]: /gamemode: Changes the player to a specific game mode
[21:41:33 INFO]: /gamerule: Sets a server's game rules
[21:41:33 INFO]: /give: Gives the specified player a certain amount of items
[21:41:33 INFO]: /help: Shows the help menu
[21:41:33 INFO]: /kick: Removes the specified player from the server
[21:41:33 INFO]: /kill: Commits suicide, only usable as a player
[21:41:33 INFO]: /list: Lists all online players
[21:41:33 INFO]: /me: Performs the specified action in chat
[21:41:33 INFO]: /minecraft:achievement: A Mojang provided command.
[21:41:33 INFO]: /minecraft:ban: A Mojang provided command.
[21:41:33 INFO]: /minecraft:ban-ip: A Mojang provided command.
[21:41:33 INFO]: /minecraft:banlist: A Mojang provided command.
[21:41:33 INFO]: /minecraft:clear: A Mojang provided command.
[21:41:33 INFO]: /minecraft:defaultgamemode: A Mojang provided command.
[21:41:33 INFO]: /minecraft:deop: A Mojang provided command.
[21:41:33 INFO]: /minecraft:difficulty: A Mojang provided command.
[21:41:33 INFO]: /minecraft:effect: A Mojang provided command.
[21:41:33 INFO]: /minecraft:enchant: A Mojang provided command.
[21:41:33 INFO]: /minecraft:gamemode: A Mojang provided command.
[21:41:33 INFO]: /minecraft:gamerule: A Mojang provided command.
[21:41:33 INFO]: /minecraft:give: A Mojang provided command.
[21:41:33 INFO]: /minecraft:help: A Mojang provided command.
[21:41:33 INFO]: /minecraft:kick: A Mojang provided command.
[21:41:33 INFO]: /minecraft:kill: A Mojang provided command.
[21:41:33 INFO]: /minecraft:list: A Mojang provided command.
[21:41:33 INFO]: /minecraft:me: A Mojang provided command.
[21:41:33 INFO]: /minecraft:op: A Mojang provided command.
[21:41:33 INFO]: /minecraft:pardon: A Mojang provided command.
[21:41:33 INFO]: /minecraft:pardon-ip: A Mojang provided command.
[21:41:33 INFO]: /minecraft:playsound: A Mojang provided command.
[21:41:33 INFO]: /minecraft:say: A Mojang provided command.
[21:41:33 INFO]: /minecraft:scoreboard: A Mojang provided command.
[21:41:33 INFO]: /minecraft:seed: A Mojang provided command.
[21:41:33 INFO]: /minecraft:setidletimeout: A Mojang provided command.
[21:41:33 INFO]: /minecraft:setworldspawn: A Mojang provided command.
[21:41:33 INFO]: /minecraft:spawnpoint: A Mojang provided command.
[21:41:33 INFO]: /minecraft:spreadplayers: A Mojang provided command.
[21:41:33 INFO]: /minecraft:tell: A Mojang provided command.
[21:41:33 INFO]: /minecraft:testfor: A Mojang provided command.
[21:41:33 INFO]: /minecraft:time: A Mojang provided command.
[21:41:33 INFO]: /minecraft:toggledownfall: A Mojang provided command.
[21:41:33 INFO]: /minecraft:tp: A Mojang provided command.
[21:41:33 INFO]: /minecraft:weather: A Mojang provided command.
[21:41:33 INFO]: /minecraft:whitelist: A Mojang provided command.
[21:41:33 INFO]: /minecraft:xp: A Mojang provided command.
[21:41:33 INFO]: /netstat: A Mojang provided command.
[21:41:33 INFO]: /op: Gives the specified player operator status
[21:41:33 INFO]: /pardon: Allows the specified player to use this server
[21:41:33 INFO]: /pardon-ip: Allows the specified IP address to use this server
[21:41:33 INFO]: /playsound: Plays a sound to a given player
[21:41:33 INFO]: /plugins: Gets a list of plugins running on the server
[21:41:33 INFO]: /reload: Reloads the server configuration and plugins
[21:41:33 INFO]: /save-all: Saves the server to disk
[21:41:33 INFO]: /save-off: Disables server autosaving
[21:41:33 INFO]: /save-on: Enables server autosaving
[21:41:33 INFO]: /say: Broadcasts the given message as the sender
[21:41:33 INFO]: /scoreboard: Scoreboard control
[21:41:33 INFO]: /seed: Shows the world seed
[21:41:33 INFO]: /setblock: A Mojang provided command.
[21:41:33 INFO]: /setidletimeout: Sets the server's idle timeout
[21:41:33 INFO]: /setworldspawn: Sets a worlds's spawn point. If no coordinates are specified, the player's coordinates will be used.
[21:41:33 INFO]: /spawnpoint: Sets a player's spawn point
[21:41:33 INFO]: /spreadplayers: Spreads players around a point
[21:41:33 INFO]: /stop: Stops the server with optional reason
[21:41:33 INFO]: /summon: A Mojang provided command.
[21:41:33 INFO]: /tell: Sends a private message to the given player
[21:41:33 INFO]: /tellraw: A Mojang provided command.
[21:41:33 INFO]: /testfor: Tests whether a specifed player is online
[21:41:33 INFO]: /testforblock: A Mojang provided command.
[21:41:33 INFO]: /time: Changes the time on each world
[21:41:33 INFO]: /timings: Records timings for all plugin events
[21:41:33 INFO]: /toggledownfall: Toggles rain on/off on a given world
[21:41:33 INFO]: /tp: Teleports the given player (or yourself) to another player or coordinates
[21:41:33 INFO]: /version: Gets the version of this server including any plugins in use
[21:41:33 INFO]: /weather: Changes the weather
[21:41:33 INFO]: /whitelist: Manages the list of players allowed to use this server
[21:41:33 INFO]: /xp: Gives the specified player a certain amount of experience. Specify &lt;amount&gt;L to give levels instead, with a negative amount resulting in taking levels.</pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>More details about each command can be obtained by typing <code>help &lt;COMMAND NAME&gt;</code> in the console. Complete list of commands is also explained at <a href="http://wiki.bukkit.org/CraftBukkit_Commands" class="bare">http://wiki.bukkit.org/CraftBukkit_Commands</a>.</p>
</div>
<div class="paragraph">
<p>Does it feel powerful to run your own Minecraft server? Make yourself more powerful by becoming an <code>`operator''. To do this, give the `op</code> command as shown in <a href="#Making_a_player_an_operator">Making a player an operator</a>.</p>
</div>
<div id="Making_a_player_an_operator" class="exampleblock">
<div class="title">Example 78. Making a player an operator</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-text" data-lang="text">&gt;op YOUR USERNAME
[19:19:21 INFO]: CONSOLE: Opped YOUR USERNAME</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>Learn more about administrating a CraftBukkit server at <a href="http://wiki.bukkit.org/Administering_A_Craftbukkit_Server" class="bare">http://wiki.bukkit.org/Administering_A_Craftbukkit_Server</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="Bukkit_documentation">Bukkit documentation</h3>
<div class="paragraph">
<p>The documentation for any Java API is available in HTML format, and is called a <em>javadoc</em>. For example, the javadocs for all Java APIs are available at <a href="http://docs.oracle.com/javase/8/docs/api/java/" class="bare">http://docs.oracle.com/javase/8/docs/api/java/</a>.</p>
</div>
<div class="paragraph">
<p>Javadocs for all Bukkit builds are available at <a href="http://jd.bukkit.org" class="bare">http://jd.bukkit.org</a>. Javadocs for the latest beta build (1.7.9-R0.2 as of this writing) are at <a href="http://jd.bukkit.org/beta/apidocs/" class="bare">http://jd.bukkit.org/beta/apidocs/</a> and shown in <a href="#Bukkit_Javadocs">Bukkit Javadocs</a>.</p>
</div>
<div id="Bukkit_Javadocs" class="imageblock">
<div class="content">
<img src="images/bukkit-beta-javadocs.png" alt="Bukkit Javadocs">
</div>
<div class="title">Figure 42. Bukkit Javadocs</div>
</div>
<div class="paragraph">
<p>The page is divided in three sections. The top left section shows all Java packages in the API, bottom left section shows all classes in all the packages, and right section shows the documentation for the selected package or class. You&#8217;ll learn about Java packages and classes in <a href="#Getting_Started_with_Java">[Getting_Started_with_Java]</a>.</p>
</div>
<div class="paragraph">
<p>The usual flow will be to select a package in the top left section, which shows all classes in that package in the bottom left section. Then selecting a class in the bottom left section shows documentation for that class in the right section. For example, <a href="#Bukkit_Entity_Event_Javadocs">Bukkit EntityEvent javadocs</a> shows <code>org.bukkit.event.entity</code> package is selected on the top left, classes in that package are shown in the bottom left, and <code>EntityEvent</code> class documentation is shown in the right section.</p>
</div>
<div id="Bukkit_Entity_Event_Javadocs" class="imageblock">
<div class="content">
<img src="images/bukkit-beta-entity-event-javadoc.png" alt="bukkit beta entity event javadoc">
</div>
<div class="title">Figure 43. Bukkit EntityEvent javadocs</div>
</div>
<div class="paragraph">
<p>A full documentation of the Bukkit API can be found at</p>
</div>
<table id="Bukkit_javadoc_links" class="tableblock frame-all grid-all spread">
<caption class="title">Table 11. Bukkit Javadocs for different builds</caption>
<colgroup>
<col style="width: 20%;">
<col style="width: 80%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Build</th>
<th class="tableblock halign-left valign-top">Javadocs</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Recommended</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://jd.bukkit.org/rb/apidocs/" class="bare">http://jd.bukkit.org/rb/apidocs/</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Beta</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://jd.bukkit.org/beta/apidocs/" class="bare">http://jd.bukkit.org/beta/apidocs/</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Development</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://jd.bukkit.org/dev/apidocs/" class="bare">http://jd.bukkit.org/dev/apidocs/</a></p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_summary_12">Summary</h3>
<div class="paragraph">
<p>This chapter introduced Bukkit and CraftBukkit. It explained the difference between different CraftBukkit builds and which one to use. It showed how to read Bukkit API using javadocs. It explained how to run your own Minecraft server using CraftBukkit and explained basic commands for administrating the server.</p>
</div>
<div class="paragraph">
<p>The next chapter will introduce Java programming language and related tools that will be used to create plugins.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="Tools_for_building_plugins">Tools for Building Plugins</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The chapter provides a brief introduction to Maven and how it is used to build plugins. It concludes with guidance on tools to simplify the process of building plugins.</p>
</div>
<div class="sect2">
<h3 id="Maven">Maven</h3>
<div class="paragraph">
<p>As explained in <a href="#Getting_Started_with_Java">[Getting_Started_with_Java]</a>, JARs are created by packaging Java source files and configuration files. The source files are compiled into classes using <code>javac</code> command, and finally packaged into JAR files using <code>jar</code> command. This process is commonly known as ``build''. Building a plugin manually everytime is tedious as multiple Java source files may need to be compiled together. Similarly different class files and resources may need to be bundled to create a JAR file. Maven is a tool that simplifies building JAR files, plugin in our case.</p>
</div>
<div class="paragraph">
<p>Complete books have been written to understand the workings of Maven. However we need to understand some basic principles only to create our plugin:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><strong>Project Structure</strong>: All Java source files and configuration files are put together in a <em>project</em>. Maven requires all files in a project belong to one directory. This top level directory has different directories for everything in the project, such as Java source files, resources, and configuration files. For example, all Java source files go in <code>src/main/java</code>, all resources go in <code>src/main/resources</code> directory, and all configuration files go in <code>src/main/configuration</code> directory. These directory locations can be overridden but that is typically not needed. This really simplifies creating your plugin as you can look at Java project from a friend and instantly understand where the source and configuration files should be.</p>
</li>
<li>
<p><strong>Project Object Model (POM)</strong>: POM provides a detailed description of your project. It is commonly named <em>pom.xml</em>, and placed in the top level project directory. Typically pom.xml will contain lots of information, however for our plugin the most important information is the version of Bukkit API that is used to build our plugins. This would be specified as shown in <a href="#CraftBukkit_maven_dependency">CraftBukkit maven dependency</a>.</p>
<div id="CraftBukkit_maven_dependency" class="exampleblock">
<div class="title">Example 79. CraftBukkit maven dependency</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-xml" data-lang="xml">&lt;dependency&gt;
    &lt;groupId&gt;org.bukkit&lt;/groupId&gt;
        &lt;artifactId&gt;craftbukkit&lt;/artifactId&gt;
        &lt;version&gt;1.7.9-R0.2&lt;/version&gt;
        &lt;scope&gt;provided&lt;/scope&gt;
        &lt;type&gt;jar&lt;/type&gt;
    &lt;/dependency&gt;
&lt;/dependencies&gt;</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>This will be automatically generated for us so don&#8217;t worry too much about the syntax.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
<div class="title">Change CraftBukkit API version</div>
<div class="paragraph">
<p>Maven dependency shown above specifies the CraftBukkit API version to 1.7.9-R0.2. If a newer version of CraftBukkit API is released, or a different version of the API needs to be used then this value needs to match the new one.</p>
</div>
</td>
</tr>
</table>
</div>
</li>
<li>
<p><strong>Phases</strong>: Maven ``builds'' the project using a small set of <em>commands</em>. Each command can have different <em>phases</em>. A command, or any of the phase, is issued to Maven to perform a specific action. If a command is issued then all phases within it are invoked as well.</p>
<div class="paragraph">
<p>For example <code>compile</code> phase compiles the project source code, <code>package</code> phase packages the compiled code in its distributable format (JAR in our case), <code>install</code> installs the package into the local repository, and others. There are several other phases such as <code>validate</code>, <code>test</code>, and <code>verify</code> but we&#8217;ll mostly be dealing with <code>compile</code>, <code>package</code>, and <code>install</code> phases only.</p>
</div>
<div class="paragraph">
<p>Once again, we&#8217;ll be using these commands in a much simplified way but its good to understand whats happening under the hood.</p>
</div>
</li>
<li>
<p><strong>Maven repository</strong> is used to hold the JAR files that are specified as dependencies in <code>pom.xml</code>.</p>
<div class="paragraph">
<p>A repository can be either <em>local</em> or <em>remote</em>. A remote repository is typically accessible using http:// protocol, hosted on Internet, and serves JAR files that provide different functionality. The dependencies on remote repository are published by the person or company creating the JAR file so that others can access it.</p>
</div>
<div class="paragraph">
<p>A local repository is a cache of the remote downloads on your local machine.</p>
</div>
<div class="paragraph">
<p>By default, Maven tries to find, or resolve, dependencies in the local repository. If they are not available in the local repository then Maven downloads it from the remote repository and caches it in the local repository. This reduces the need to download the dependencies from remote repository every time.</p>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>All the directories, source and configuration files, and POM together are referred as <em>Maven project</em>.</p>
</div>
<div id="Maven_project" class="imageblock">
<div class="content">
<img src="images/maven-flow.png" alt="maven flow">
</div>
<div class="title">Figure 44. Maven project, phases, and repositories</div>
</div>
<div class="paragraph">
<p>For authoring our plugins, we&#8217;ll create a Maven project with CraftBukkit dependency (which includes Bukkit API), and use Maven to package them in a JAR file and copy it to our Minecraft server.</p>
</div>
</div>
<div class="sect2">
<h3 id="Tools_for_Authoring_Plugins">Tools for Authoring Plugins</h3>
<div class="paragraph">
<p>Building a plugin requires the steps outlined in <a href="#Steps_for_creating_a_plugin">Steps for creating a plugin</a>:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Generate a Maven project with CraftBukkit dependency in <code>pom.xml</code></p>
</li>
<li>
<p>Author Java files, edit configuration files, create new images, etc.</p>
</li>
<li>
<p>Compile and package them in a JAR file</p>
</li>
<li>
<p>Copy the JAR file to CraftBukkit&#8217;s <code>plugins</code> directory</p>
</li>
</ol>
</div>
<div id="Steps_for_creating_a_plugin" class="imageblock">
<div class="content">
<img src="images/create-plugin-flow.png" alt="create plugin flow">
</div>
<div class="title">Figure 45. Steps for creating a plugin</div>
</div>
<div class="paragraph">
<p>First step will be explained in <a href="#Create_Sample_Plugin">[Create_Sample_Plugin]</a>. As explained in the previous sections, the third step is easily automated using Maven. Fourth step is fairly straight forward with usual operating system commands, and we&#8217;ll see how Maven helps us in that. Most of our time however will be spent in the second step.</p>
</div>
<div class="paragraph">
<p>Java files can be authored using Notepad or any simple text editor. But that&#8217;s like going from San Francsico to New York , which is over 2500 miles, driving in a car. It will take a few days to reach the destination but could be a lot of fun as you&#8217;ll visit all the states in between, eat at local restaurants, and meet different people. Now imagine you&#8217;ve to travel between the two cities regularly. This would certainly become very time consuming and boring very quickly. In that case, a more efficient way to travel between these two cities is to fly in a plane. This will not only save you time but will also be a lot more efficient.</p>
</div>
<div class="paragraph">
<p>Integrated Development Environment, or popularly known as IDEs, are tools that simplify the entire process of authoring Java source files and then invoking Maven lifecycles to compile and package them into JAR files. These IDEs provide several advantages over a simple text based editor such as showing visual hints if the syntax of your program is not correct. In several cases the IDEs will also provide a `quick fix' that can be applied to solve the error. This allows you to fix the error before compiling the source code. Another powerful adavantage is easy-to-use menu items that enable you to compile and bundle the classes and resource files in a JAR file with a single click. Overall, this allows you to spend more time on writing the plugins instead of how to fix the errors and package the JAR file.</p>
</div>
<div class="paragraph">
<p>There are several IDEs available to download. In general, here are the capabilities that we are looking for in an IDE:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Runs on all the common operating systems such as Macintosh, Windows, and Linux</p>
</li>
<li>
<p>Provide in-built support for Java authoring and Maven</p>
</li>
<li>
<p>Simple and intuitive interface</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>You are free to choose any IDE that you prefer, This book will use NetBeans for its simple and intuitive interface.</p>
</div>
<div class="sect3">
<h4 id="_netbeans_2">NetBeans</h4>
<div class="paragraph">
<p>The NetBeans IDE can run on Macintosh, Windows, Linux, and other operating systems that has a JVM. It can be downloaded from <a href="https://netbeans.org/downloads/" class="bare">https://netbeans.org/downloads/</a>. Make sure to click on <code>Download'' button in </code>Java SE'' column as shown in <a href="#NetBeans_download">NetBeans download</a>.</p>
</div>
<div id="NetBeans_download" class="imageblock">
<div class="content">
<img src="images/netbeans-download.png" alt="NetBeans Download">
</div>
<div class="title">Figure 46. NetBeans download</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_summary_13">Summary</h3>
<div class="paragraph">
<p>The chapter provided a brief introduction to Maven and how it is useful for building plugins. The chapter finally provided some guidance on tools that simplify the process of creating JAR files.</p>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2015-09-19 21:56:42 PDT
</div>
</div>
</body>
</html>